(function(){var t={4364:function(t,e,r){"use strict";var o=r(9242),s=r(1020),a=r(3396),l=r(7100),i=r(9847),n=r(833),c=r(2449),d=r(2905);const p={class:"d-flex justify-content-between"},u={class:"d-flex"},f=(0,a._)("img",{src:l,id:"logo",alt:""},null,-1),m=(0,a._)("span",{id:"name"},"BC Crafts Manager",-1),h=[f,m],g=(0,a._)("img",{src:i,class:"mr-1",alt:""},null,-1),b=(0,a._)("img",{src:n,class:"mr-1",alt:""},null,-1),y=(0,a._)("img",{src:c,alt:""},null,-1),C=(0,a._)("a",{href:"https://github.com/capyfied/bccm",title:"GitHub",target:"_blank"},[(0,a._)("img",{src:d,id:"github",class:"mx-2",alt:""})],-1),w={class:"container-fluid"};function v(t,e,r,s,l,i){const n=(0,a.up)("Alert"),c=(0,a.up)("Explorer"),d=(0,a.up)("About"),f=(0,a.up)("Settings");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",p,[(0,a._)("div",u,[(0,a._)("span",{id:"main-link",class:"menu-link",onClick:e[0]||(e[0]=e=>t.page="home")},h),(0,a._)("span",{class:"menu-link",onClick:e[1]||(e[1]=e=>t.page="settings")},[g,(0,a.Uk)(" Settings")]),(0,a._)("span",{class:"menu-link",onClick:e[2]||(e[2]=e=>t.page="about")},[b,(0,a.Uk)(" Help")])]),"home"==t.page?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.queryField=e),id:"query",class:"mx-3",onInput:e[4]||(e[4]=t=>i.updateQuery()),placeholder:"Filter items..."},null,544)),[[o.nr,t.queryField]]):(0,a.kq)("",!0),(0,a._)("span",null,[(0,a._)("button",{class:"btn btn-success",onClick:e[5]||(e[5]=t=>i.loadFromClipboard()),style:{height:"28px","margin-top":"3px"}},[y,(0,a.Uk)(" Load from clipboard ")]),C])]),(0,a._)("main",w,[(0,a.Wm)(n),"home"==t.page?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0),"about"==t.page?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),"settings"==t.page?((0,a.wg)(),(0,a.j4)(f,{key:2,onGoTo:i.goTo},null,8,["onGoTo"])):(0,a.kq)("",!0)])],64)}r(3408),r(4590);function k(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function _(){return new Promise((t=>{navigator.clipboard.readText?navigator.clipboard.readText().then((e=>t(e))):t(prompt("Paste your text below:"))}))}function x(t,e="download"){const r=new Blob([t],{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function S(t){return new Promise((function(e){const r=new FileReader;r.onload=()=>{e(r.result.split("\n"))},r.readAsText(t)}))}function T(t){return t.map((t=>t.map(String).map((t=>t.replaceAll('"','""'))).map((t=>`"${t}"`)).join(","))).join("\r\n")}function D(t,e,r){if(e==r)return;const o=t[e];t[e]=t[r],t[r]=o}function E(t,e=300){let r;return(...o)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(this,o)}),e)}}function F(t,e,r=null){return 1==e?t:r||t+"s"}function N(t,e="name"){for(let r in t){const o=t[r];let s=o[e];while(![-1,parseInt(r)].includes(t.findIndex((t=>t[e]==s)))){const t=s.match(/^(.*) \((\d+)\)$/);s=t?`${t[1]} (${parseInt(t[2])+1})`:`${s} (2)`}o[e]=s}}const U=(0,s.Q_)("alert",{state:()=>({message:null,type:null,dismissalTimeout:null}),actions:{alert(t,e="error"){if(t){let r;"error"==e?(r=1e4,console.error(t)):r=5e3,clearTimeout(this.dismissalTimeout),this.message=t,this.type=e,this.dismissalTimeout=setTimeout((()=>{this.alert(null)}),r)}else this.message=null,this.type=null}}});r(7658);var J=r(2482),B=r(7840),O=r.n(B);function L(t,e){if(!t)throw new $(e)}function A(t,e,r,o=!0){if(void 0==t[e]||null==t[e]){if(!o)return;throw console.log(t),new $(`Attribute is missing: "${e}".`)}if(typeof t[e]!=r)throw console.log(t),new $(`Error on attribute "${e}": expected ${r} but got ${typeof t[e]}`)}class $ extends Error{constructor(t){super(t),this.name="InvalidCraftError"}}class q{constructor(){(0,J.Z)(this,"uuid",null),(0,J.Z)(this,"parent",null),(0,J.Z)(this,"item",null),(0,J.Z)(this,"property",null),(0,J.Z)(this,"lock",null),(0,J.Z)(this,"name",null),(0,J.Z)(this,"description",null),(0,J.Z)(this,"color",null),(0,J.Z)(this,"private",null),(0,J.Z)(this,"type",null)}static fromJson(t,e){if(!t||!e)throw"Missing argument";const r=new q;return r.uuid=t.uuid,r.item=t.item,r.parent=e,r.property=t.property,r.lock=t.lock,r.name=t.name,r.description=t.description,r.color=t.color,r.private=1==t.private,r.type=t.type,r.priority=t.priority,r}toJson(){return{uuid:this.uuid,item:this.item,property:this.property,lock:this.lock,name:this.name,description:this.description,color:this.color,private:this.private,type:this.type,priority:this.priority}}validate(){A(this,"uuid","string"),A(this,"item","string"),A(this,"property","string",!1),A(this,"lock","string",!1),A(this,"name","string"),A(this,"description","string",!1),A(this,"color","string",!1),A(this,"private","boolean"),A(this,"type","string",!1),A(this,"priority","number",!1),L(this.name.length>0&&this.name.length<=q.NAME_MAX_LENGTH,`Name must be between 1 and ${q.NAME_MAX_LENGTH} characters`),L(this.name.length<=q.DESCR_MAX_LENGTH,`Description must be between 1 and ${q.DESCR_MAX_LENGTH} characters`)}move(t){const e=this.parent.crafts.indexOf(this);if(-1==e)throw"Could not find craft";"down"==t&&e<this.parent.crafts.length-1?D(this.parent.crafts,e,e+1):"up"==t&&e>0?D(this.parent.crafts,e,e-1):console.warn(`Cannot move craft ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.item.toLowerCase().includes(t)}static fromCompressedBCJson(t){return M.convertCompressedBCJsonToCraft(t)}static fromBCJson(t){return M.convertBCJsonToCraft(t)}toBCJson(){return M.convertCraftToBCJson(this)}toCompressedBCJson(){return M.convertCraftToCompressedBCJson(this)}}(0,J.Z)(q,"NAME_MAX_LENGTH",30),(0,J.Z)(q,"DESCR_MAX_LENGTH",100);class M{static convertCraftToBCJson(t){return{Item:t.item,Property:t.property,Lock:t.lock,Name:t.name,Description:t.description,Color:t.color,Private:t.private,Type:t.type,OverridePriority:t.priority}}static convertCraftToCompressedBCJson(t){return O().compressToBase64(JSON.stringify(t.toBCJson()))}static convertBCJsonToCraft(t){const e=new q;return e.uuid=k(),e.item=t.Item,e.property=t.Property,e.lock=t.Lock,e.name=t.Name,e.description=t.Description,e.color=t.Color,e.private=1==t.Private,e.type=t.Type,e.priority=t.OverridePriority,e}static convertCompressedBCJsonToCraft(t){return this.convertBCJsonToCraft(JSON.parse(O().decompressFromBase64(t)))}static convertCraftsToBCImportCommand(t){const e=this.convertCraftsToBCDataString(t.map((t=>t.toBCJson())));return`CraftingLoadServer("${e.replace(/"/g,'\\"')}")`}static convertCraftsToBCDataString(t){if(!t)throw"No crafts to encode.";if(t.length>this.maxCraftsExportable)throw new I;let e="";for(let r of t)null!=r&&null!=r.Item&&""!=r.Item?(e=e+r.Item+"¶",e=e+(null==r.Property?"":r.Property)+"¶",e=e+(null==r.Lock?"":r.Lock)+"¶",e=e+(null==r.Name?"":r.Name.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.Description?"":r.Description.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.Color?"":r.Color.replace("¶"," ").replace("§"," "))+"¶",e=e+(null!=r.Private&&r.Private?"T":"")+"¶",e=e+(null==r.Type?"":r.Type.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.OverridePriority?"":r.OverridePriority.toString())+"§"):e+="§";while(e.length>=1&&"§"==e.substring(e.length-1))e=e.substring(0,e.length-1);return O().compressToUTF16(e)}static convertStringToCrafts(t){if(!t)throw new z("No data to import.");if(t=t.trim(),"{"==t[0]||"["==t[0]){let r;try{r=JSON.parse(t)}catch(e){throw new z("JSON",`The provided text is not valid JSON: "${t.length>10?`${t.substr(0,9)}...`:t}"`)}return Array.isArray(r)?r.map((t=>this.convertAnyJSONToCrafts(t))).flat().filter((t=>null!=t)):this.convertAnyJSONToCrafts(r)}try{const e=t.replace(/[^a-zA-Z0-9=+/]+/g," ").split(" ").filter((t=>t.length>0));return e.map((t=>q.fromCompressedBCJson(t)))}catch(e){throw new z("BC compressed craft JSON",e)}}static convertAnyJSONToCrafts(t){if(t.version)try{return(new j).deserialize(t).rootFolder.findAllCrafts()}catch(e){throw new z("BCCM database export",e)}else{if(t.uuid&&t.item)return[t];if(!t.Item)throw new z("JSON","Could not detect a valid format.");try{return[this.convertBCJsonToCraft(t)]}catch(e){throw new z("BC JSON",e)}}}}(0,J.Z)(M,"maxCraftsExportable",40);class I extends Error{constructor(){super(`Cannot export more than ${M.maxCraftsExportable} crafts at once.`),this.name="ExportLimitError"}}class z extends Error{constructor(t,e){super(`An error occurred when attempting to process the data as ${t}: ${e}`),this.name="ImportError"}}class Z{constructor(t,e){(0,J.Z)(this,"uuid",null),(0,J.Z)(this,"name",null),(0,J.Z)(this,"parent",null),(0,J.Z)(this,"subfolders",null),(0,J.Z)(this,"crafts",null),(0,J.Z)(this,"collapsed",null),(0,J.Z)(this,"isFolder",!0),this.uuid=k(),this.name=t,this.parent=e,this.subfolders=[],this.crafts=[],this.collapsed=!1}findAllCrafts(){return this.crafts.concat(...this.subfolders.map((t=>t.findAllCrafts())))}findCraft(t){let e=this.crafts.find((e=>e.uuid==t));if(e)return e;for(let r of this.subfolders)if(e=r.findCraft(t),e)return e;return!1}findFolder(t){return this.uuid==t?this:this.subfolders.reduce(((e,r)=>e||r.findFolder(t)),null)}toJson(){return{uuid:this.uuid,name:this.name,subfolders:this.subfolders.map((t=>t.toJson())),crafts:this.crafts.map((t=>t.toJson())),collapsed:this.collapsed}}isEmpty(){return 0==this.crafts.length&&0==this.subfolders.length}isWithin(t){return t==this||!!this.parent&&this.parent.isWithin(t)}getAncestry(){return this.parent?this.parent.getAncestry().concat([this]):[this]}static fromJson(t,e=null){const r=new Z;return r.uuid=t.uuid,r.name=t.name,r.parent=e,r.subfolders=t.subfolders.map((t=>Z.fromJson(t,r))),r.crafts=(t.crafts||t.items).map((t=>q.fromJson(t,r))),r.collapsed=t.collapsed,r}toBCImportCommand(){return M.convertCraftsToBCImportCommand(this.findAllCrafts())}move(t){const e=this.parent.subfolders.indexOf(this);if(-1==e)throw"Could not find subfolder";"down"==t&&e<this.parent.subfolders.length-1?D(this.parent.subfolders,e,e+1):"up"==t&&e>0?D(this.parent.subfolders,e,e-1):console.warn(`Cannot move folder ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.crafts.some((e=>e.matchesQuery(t)))||this.subfolders.some((e=>e.matchesQuery(t)))}}class P{constructor(){this.loadJson(P.DEFAULT_SETTINGS)}static fromJson(t){const e=new P;return e.loadJson(t),e}loadJson(t){"string"==typeof t&&(t=JSON.parse(t));const e=P.DEFAULT_SETTINGS;for(let r of P.KEYS)void 0!==t[r]?this[r]=t[r]:(console.warn(`Missing field '${r}' in loaded settings, using default.`),this[r]=e[r]);this.validate()}toJson(){const t={};return P.KEYS.forEach((e=>{t[e]=this[e]})),t}validate(){A(this,"confirmCraftDeletion","boolean")}}(0,J.Z)(P,"DEFAULT_SETTINGS",{confirmCraftDeletion:!0}),(0,J.Z)(P,"KEYS",Object.keys(P.DEFAULT_SETTINGS));class j{constructor(){if((0,J.Z)(this,"rootFolder",null),(0,J.Z)(this,"settings",null),this.saveToLocalStorageWithDebounce=E((()=>this.saveToLocalStorage()),1e3),window.localStorage.database)try{this.deserialize(window.localStorage.database)}catch(t){window.localStorage.failed=window.localStorage.database,console.error(`Error loading saved database: ${t.message}. Copying old database to localStorage.failed and resetting.`),this.reset()}else this.reset()}reset(){this.rootFolder=new Z("Crafted items"),this.settings=new P,this.saveToLocalStorage()}addCrafts(t){let e={new:0,edited:0,failed:0};const r=this.rootFolder.findAllCrafts();N(t);for(let s of t){try{s.validate()}catch(o){console.warn(`Skipping invalid craft "${s.name}": ${o.message}"`),e.failed++;continue}const t=r.find((t=>t.name==s.name));t?(Object.assign(t,s),e.edited++):(s.parent=this.rootFolder,this.rootFolder.crafts.push(s),e.new++)}return this.saveToLocalStorage(),e.total=e.new+e.edited+e.failed,e}removeCraft(t){t.parent.crafts=t.parent.crafts.filter((e=>e!=t))}moveCraft(t,e){const r=t.parent;r!=e&&(r.crafts=r.crafts.filter((e=>e!=t)),e.crafts.push(t),t.parent=e),this.saveToLocalStorage()}moveFolder(t,e){if(!t.parent)throw new R("Cannot move the root folder.");if(t==e)throw new R("Cannot move folder into itself.");if(e==t.parent)return;if(e.isWithin(t))throw new R("Cannot move a folder into one of its descendents.");const r=t.parent;r.subfolders=r.subfolders.filter((e=>e!=t)),t.parent=e,e.subfolders.push(t)}addFolder(t,e){const r=new Z(e,t);return t.subfolders.push(r),this.saveToLocalStorage(),r}removeFolder(t){if(!t.parent)throw"Cannot delete root folder.";t.parent.subfolders=t.parent.subfolders.filter((e=>e!=t)),this.saveToLocalStorage()}importCrafts(t){return this.addCrafts(M.convertStringToCrafts(t))}serialize(){return JSON.stringify({version:1,rootFolder:this.rootFolder.toJson(),settings:this.settings.toJson()})}deserialize(t){if(!t)throw new H("No data to process.");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new H(`The provided text is not valid JSON: "${t.length>10?`${t.substr(0,9)}...`:t}"`)}try{if(!t.rootFolder)throw new H("Parsed JSON does not contain rootFolder attribute.");this.rootFolder=Z.fromJson(t.rootFolder)}catch(e){throw new H("Unexpected error when deserializing crafts: "+e)}try{if(!t.settings)throw new H("Parsed JSON does not contain settings attribute.");this.settings=P.fromJson(t.settings)}catch(e){console.warn("Unexpected error when deserializing settings, using defaults instead. Reason: "+e),this.settings=new P}return this}saveToLocalStorage(){window.localStorage.database=this.serialize()}findCraftCount(){return this.rootFolder.findAllCrafts().length}findRepeatedCraftName(){return this.rootFolder.findAllCrafts().map((t=>t.name)).filter(((t,e,r)=>r.indexOf(t)!==e))[0]||null}}class H extends Error{constructor(t){super(t),this.name="DeserializationError"}}class R extends Error{constructor(t){super(t),this.name="MoveError"}}const G=(0,s.Q_)("explorer",{state:()=>({database:new j,query:"",selectedEntity:null,multiselectionEntities:[],repeatedCraftName:null}),getters:{multiselectionCrafts(t){const e=new Set;for(let r of t.multiselectionEntities)r.isFolder?r.findAllCrafts().forEach((t=>e.add(t))):e.add(r);return[...e]}},actions:{toggleMultiselectionOf(t){this.multiselectionEntities.includes(t)?this.multiselectionEntities=this.multiselectionEntities.filter((e=>e!=t)):this.multiselectionEntities.push(t)},findRepeatedCraftName(){this.repeatedCraftName=this.database.findRepeatedCraftName()}}});var V={...(0,s.rn)(G,["database","query","selectedEntity","multiselectionEntities","multiselectionCrafts","repeatedCraftName"]),...(0,s.Kc)(U,G)},Y=r(7139),W=r(8167),Q=r(8894);const K={class:"row"},X={class:"my-1"},tt={key:1,id:"repeated-notice",class:"explorer-notice"},et=(0,a._)("p",{class:"my-1"},[(0,a._)("img",{src:W,class:"icon"}),(0,a.Uk)(" Repeated craft name:")],-1),rt={class:"my-1 text-bold"},ot={key:3,class:"p-5 mt-5 text-center"},st=(0,a._)("img",{src:Q,class:"ml-2",style:{width:"20px"}},null,-1);function at(t,e,r,s,l,i){const n=(0,a.up)("Folder"),c=(0,a.up)("FolderDetails"),d=(0,a.up)("CraftDetails");return(0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("div",{id:"craft-list",class:(0,Y.C_)("scrollable "+(t.selectedEntity?"col-8 col-xl-9":"col-12")),onKeydown:e[2]||(e[2]=(0,o.D2)(((...e)=>t.deleteSelectedEntity&&t.deleteSelectedEntity(...e)),["delete"]))},[t.multiselectionCrafts.length>0?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"multiselection-notice",class:(0,Y.C_)({"explorer-notice":!0,invalid:i.tooManyMultiselected})},[(0,a._)("p",X,(0,Y.zw)(t.multiselectionCrafts.length)+" "+(0,Y.zw)(i.pluralize("craft",t.multiselectionCrafts.length))+" selected.",1),(0,a._)("button",{class:"btn-transparent text-bold pl-0",onClick:e[0]||(e[0]=t=>this.explorerStore.multiselectionEntities=[])},"Cancel"),(0,a._)("button",{class:"btn-transparent float-right text-bold pr-0",onClick:e[1]||(e[1]=t=>i.copyMultiselection())},"Export")],2)):(0,a.kq)("",!0),t.repeatedCraftName?((0,a.wg)(),(0,a.iD)("div",tt,[et,(0,a._)("p",rt,(0,Y.zw)(t.repeatedCraftName),1)])):(0,a.kq)("",!0),t.database.rootFolder.crafts.length>0||t.database.rootFolder.subfolders.length>0?((0,a.wg)(),(0,a.j4)(n,{key:2,folder:t.database.rootFolder,depth:0},null,8,["folder"])):((0,a.wg)(),(0,a.iD)("div",ot,[(0,a.Uk)(" Import some crafts to display them here. "),st]))],34),t.selectedEntity?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[t.selectedEntity.isFolder?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"col-4 col-xl-3"})):((0,a.wg)(),(0,a.j4)(d,{key:1,class:"col-4 col-xl-3"}))],64)):(0,a.kq)("",!0)])}var lt=r(5166),it=r(6338),nt=r(4485),ct=r(6240),dt=r(8231),pt=r(5362),ut=r(5588),ft=r(8688);const mt={id:"sidepanel",class:"scrollable"},ht={class:"d-flex justify-content-between"},gt=(0,a._)("h1",null,[(0,a._)("img",{src:l,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit craft")],-1),bt=(0,a._)("img",{src:lt,class:"icon"},null,-1),yt=[bt],Ct={class:"float-right"},wt=["maxlength"],vt={class:"float-right"},kt=["maxlength"],_t={key:0,style:{float:"right"}},xt=(0,a._)("img",{src:it,class:"icon",alt:""},null,-1),St=(0,a._)("img",{src:nt,class:"icon",alt:""},null,-1),Tt={class:"row mt-3 mx-n1"},Dt={class:"col-12 col-md-6 p-1"},Et=(0,a._)("img",{src:ct},null,-1),Ft={class:"col-12 col-md-6 p-1"},Nt=(0,a._)("img",{src:ct},null,-1),Ut={class:"col-12 col-md-6 p-1"},Jt=(0,a._)("img",{src:dt},null,-1),Bt={class:"col-12 col-md-6 p-1"},Ot=(0,a._)("img",{src:c},null,-1),Lt={class:"col-12 col-md-6 p-1"},At=["disabled"],$t=(0,a._)("img",{src:pt},null,-1),qt={class:"col-12 col-md-6 p-1"},Mt=(0,a._)("img",{src:ut},null,-1),It={class:"col-12 col-md-6 p-1"},zt=["disabled"],Zt=(0,a._)("img",{src:ft},null,-1);function Pt(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",mt,[(0,a._)("div",ht,[gt,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},yt)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a._)("small",Ct,(0,Y.zw)(i.craft.name.length)+"/"+(0,Y.zw)(i.nameMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.craft.name=t),onInput:e[2]||(e[2]=t=>i.handleNameInput()),maxlength:i.nameMaxLength},null,40,wt),[[o.nr,i.craft.name]])]),(0,a._)("label",null,[(0,a.Uk)(" Description "),(0,a._)("small",vt,(0,Y.zw)(i.craft.description.length)+"/"+(0,Y.zw)(i.descrMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>i.craft.description=t),onChange:e[4]||(e[4]=e=>t.database.saveToLocalStorage()),maxlength:i.descrMaxLength},null,40,kt),[[o.nr,i.craft.description]])]),(0,a._)("label",null,[(0,a.Uk)(" Colors "),i.craft.color?((0,a.wg)(),(0,a.iD)("span",_t,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.craft.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,Y.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256))])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>i.craft.color=t),disabled:""},null,512),[[o.nr,i.craft.color]])]),(0,a._)("label",null,[(0,a.Uk)(" Item codename "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>i.craft.item=t),disabled:""},null,512),[[o.nr,i.craft.item]])]),(0,a._)("label",null,[xt,(0,a.Uk)(" Property "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>i.craft.property=t),disabled:""},null,512),[[o.nr,i.craft.property]])]),(0,a._)("label",null,[(0,a.Uk)(" Default position "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>i.craft.type=t),disabled:""},null,512),[[o.nr,i.craft.type]])]),(0,a._)("label",null,[St,(0,a.Uk)(" Lock "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>i.craft.lock=t),disabled:""},null,512),[[o.nr,i.craft.lock]])]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>i.craft.private=t),onChange:e[11]||(e[11]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,i.craft.private]]),(0,a.Uk)(" Private ")]),(0,a._)("div",Tt,[(0,a._)("div",Dt,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[12]||(e[12]=(...t)=>i.copyCompressedBCJson&&i.copyCompressedBCJson(...t))},[Et,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",Ft,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[13]||(e[13]=(...t)=>i.copyBCJson&&i.copyBCJson(...t))},[Nt,(0,a.Uk)(" Copy as JSON")])]),(0,a._)("div",Ut,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[14]||(e[14]=e=>t.explorerStore.toggleMultiselectionOf(i.craft))},[Jt,(0,a.Uk)(" Select ")])]),(0,a._)("div",Bt,[(0,a._)("button",{class:"btn btn-warning w-100",onClick:e[15]||(e[15]=(...t)=>i.overwriteCraftWithClipboard&&i.overwriteCraftWithClipboard(...t)),title:"Overwrite this craft with the data currently in the clipboard"},[Ot,(0,a.Uk)(" Overwrite ")])]),(0,a._)("div",Lt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[16]||(e[16]=t=>i.moveCraft("up")),disabled:!i.craft.parent||i.craft.parent.crafts[0]==i.craft},[$t,(0,a.Uk)(" Move up ")],8,At)]),(0,a._)("div",qt,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[17]||(e[17]=(...t)=>i.deleteCraft&&i.deleteCraft(...t))},[Mt,(0,a.Uk)(" Delete ")])]),(0,a._)("div",It,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[18]||(e[18]=t=>i.moveCraft("down")),disabled:!i.craft.parent||i.craft.parent.crafts[i.craft.parent.crafts.length-1]==i.craft},[Zt,(0,a.Uk)(" Move down ")],8,zt)])])])}var jt={name:"CraftDetails",computed:{craft(){return this.selectedEntity},nameMaxLength(){return q.NAME_MAX_LENGTH},descrMaxLength(){return q.DESCR_MAX_LENGTH},...V},methods:{handleNameInput(){this.explorerStore.findRepeatedCraftName(),this.repeatedCraftName||this.database.saveToLocalStorage()},deleteCraft(){if(!this.database.settings.confirmCraftDeletion||confirm("Are you sure you want to delete this craft?")){const t=this.craft.parent,e=t.crafts.indexOf(this.craft),r=e<1?0:e-1;this.database.removeCraft(this.craft),this.explorerStore.selectedEntity=t.crafts[r]||null}},copyCompressedBCJson(){window.navigator.clipboard.writeText(this.craft.toCompressedBCJson())},copyBCJson(){window.navigator.clipboard.writeText(JSON.stringify(this.craft.toBCJson()))},overwriteCraftWithClipboard(){_().then((t=>{if(t&&t.length>100)try{const e=q.fromCompressedBCJson(t),r=this.craft;for(let t of["item","property","lock","name","description","color","private","type","priority"])r[t]=e[t];this.database.saveToLocalStorage()}catch(e){console.error(e),this.alertStore.alert("Could not parse the provided craft.")}else this.alertStore.alert("You need to have an exported craft in your clipboard.")}))},moveCraft(t){this.craft.move(t),this.database.saveToLocalStorageWithDebounce()}},created(){this.handleNameInput=E(this.handleNameInput,500)}},Ht=r(89);const Rt=(0,Ht.Z)(jt,[["render",Pt]]);var Gt=Rt,Vt=r(3735),Yt=r(4355),Wt=r(2165);const Qt={id:"sidepanel",class:"scrollable"},Kt={class:"d-flex justify-content-between"},Xt=(0,a._)("h1",null,[(0,a._)("img",{src:Vt,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit folder")],-1),te=(0,a._)("img",{src:lt,class:"icon"},null,-1),ee=[te],re={key:0,class:"mt-2 text-sm"},oe={key:1,class:"mt-2 text-sm"},se={class:"row mt-2 mx-n1"},ae={class:"col-12 col-md-6 p-1"},le=(0,a._)("img",{src:ct},null,-1),ie={class:"col-12 col-md-6 p-1"},ne=(0,a._)("img",{src:ct},null,-1),ce={class:"col-12 col-md-6 p-1"},de=(0,a._)("img",{src:Yt},null,-1),pe={class:"col-12 col-md-6 p-1"},ue=(0,a._)("img",{src:dt},null,-1),fe={class:"col-12 col-md-6 p-1"},me=["disabled"],he=(0,a._)("img",{src:pt},null,-1),ge={class:"col-12 col-md-6 p-1"},be=["disabled"],ye=(0,a._)("img",{src:Wt},null,-1),Ce={class:"col-12 col-md-6 p-1"},we=["disabled"],ve=(0,a._)("img",{src:ft},null,-1),ke={class:"col-12 col-md-6 p-1"},_e=["disabled"],xe=(0,a._)("img",{src:ut},null,-1);function Se(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",Qt,[(0,a._)("div",Kt,[Xt,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},ee)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.folder.name=t),ref:"txtName",onChange:e[2]||(e[2]=e=>t.database.saveToLocalStorage()),maxlength:"30"},null,544),[[o.nr,i.folder.name]])]),i.totalCrafts>0?((0,a.wg)(),(0,a.iD)("div",re,(0,Y.zw)(i.totalCrafts)+" total "+(0,Y.zw)(i.pluralize("craft",i.totalCrafts)),1)):((0,a.wg)(),(0,a.iD)("div",oe,"No crafts")),(0,a._)("div",se,[(0,a._)("div",ae,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[3]||(e[3]=(...t)=>i.copyImportCommand&&i.copyImportCommand(...t))},[le,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",ie,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[4]||(e[4]=(...t)=>i.copyBCJson&&i.copyBCJson(...t))},[ne,(0,a.Uk)(" Copy as JSON")])]),(0,a._)("div",ce,[(0,a._)("button",{class:"btn btn-success w-100",onClick:e[5]||(e[5]=(...t)=>i.addFolder&&i.addFolder(...t))},[de,(0,a.Uk)(" New subfolder")])]),(0,a._)("div",pe,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[6]||(e[6]=e=>t.explorerStore.toggleMultiselectionOf(i.folder))},[ue,(0,a.Uk)(" Select ")])]),(0,a._)("div",fe,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[7]||(e[7]=t=>i.moveFolder("up")),disabled:!i.folder.parent||i.folder.parent.subfolders[0]==i.folder},[he,(0,a.Uk)(" Move up ")],8,me)]),(0,a._)("div",ge,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",disabled:0==i.totalCrafts,onClick:e[8]||(e[8]=(...t)=>i.toggleVisibilityOfAllCrafts&&i.toggleVisibilityOfAllCrafts(...t))},[ye,(0,a.Uk)(" Toggle visibility ")],8,be)]),(0,a._)("div",Ce,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[9]||(e[9]=t=>i.moveFolder("down")),disabled:!i.folder.parent||i.folder.parent.subfolders[i.folder.parent.subfolders.length-1]==i.folder},[ve,(0,a.Uk)(" Move down ")],8,we)]),(0,a._)("div",ke,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[10]||(e[10]=(...t)=>i.deleteFolder&&i.deleteFolder(...t)),disabled:!i.folder.parent},[xe,(0,a.Uk)(" Delete ")],8,_e)])])])}var Te={name:"FolderDetails",computed:{folder(){return this.selectedEntity},totalCrafts(){return this.folder.findAllCrafts().length},...V},methods:{addFolder(){const t=this.database.addFolder(this.folder,"New folder");this.folder.collapsed=!1,this.explorerStore.selectedEntity=t,this.$refs.txtName.focus()},deleteFolder(){const t=this.folder.findAllCrafts().length;(0==t||confirm(`Delete ${this.folder.name||"this folder"} and the ${t} craft(s) inside?`))&&(this.database.removeFolder(this.folder),this.explorerStore.selectedEntity=this.folder.parent)},copyImportCommand(){try{window.navigator.clipboard.writeText(this.folder.toBCImportCommand())}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},copyBCJson(){window.navigator.clipboard.writeText(JSON.stringify(this.folder.findAllCrafts().map((t=>t.toBCJson()))))},moveFolder(t){this.folder.move(t),this.database.saveToLocalStorageWithDebounce()},toggleVisibilityOfAllCrafts(){const t=this.folder.findAllCrafts(),e=t[0].private;t.forEach((t=>{t.private=!e})),this.database.saveToLocalStorage()},pluralize:F}};const De=(0,Ht.Z)(Te,[["render",Se]]);var Ee=De,Fe=r(4652),Ne=r(3254),Ue=r(3210);const Je=["checked"],Be={class:"total-crafts"},Oe=["src"],Le={key:0,class:"crafts-table w-100"},Ae=["onClick"],$e={class:"c-name"},qe=["onDragstart"],Me=["checked","onChange"],Ie={class:"c-priv text-center"},ze={key:0,src:Ne,class:"icon",title:"Private",alt:"Private"},Ze={key:1,src:Ue,class:"icon",title:"Public",alt:"Public"},Pe={class:"c-craft"},je={class:"mr-2"},He={class:"c-prop"},Re=(0,a._)("img",{src:it,class:"icon",alt:""},null,-1),Ge={key:1,class:"muted"},Ve={class:"c-lock"},Ye=(0,a._)("img",{src:nt,class:"icon",alt:""},null,-1),We={key:1,class:"muted"},Qe={class:"c-type"},Ke={key:0,class:"muted"},Xe={class:"c-priority"},tr={class:"c-descr"},er={key:0,class:"muted"};function rr(t,e,s,l,i,n){const c=(0,a.up)("Folder",!0);return(0,a.wg)(),(0,a.iD)("div",{onDrop:e[4]||(e[4]=t=>n.drop(t)),onDragover:e[5]||(e[5]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:e[6]||(e[6]=(0,o.iM)((()=>{}),["prevent"]))},[(0,a._)("div",{class:(0,Y.C_)({"folder clickable":!0,active:t.selectedEntity==s.folder}),onClick:e[3]||(e[3]=e=>t.explorerStore.selectedEntity=s.folder)},[s.depth>0?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"c-tree",style:(0,Y.j5)({marginLeft:13*s.depth+"px"})},"├",4)):(0,a.kq)("",!0),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:1,src:Vt,class:"icon mx-1",alt:"",draggable:"",onDragstart:e[0]||(e[0]=t=>n.startDrag(t,s.folder))},null,32)):((0,a.wg)(),(0,a.iD)("input",{key:2,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(s.folder),onChange:e[1]||(e[1]=e=>t.explorerStore.toggleMultiselectionOf(s.folder))},null,40,Je)),(0,a._)("span",null,[(0,a.Uk)((0,Y.zw)(s.folder.name||"Unnamed")+" ",1),(0,a._)("span",Be,"("+(0,Y.zw)(n.totalCrafts)+")",1)]),!s.folder.parent||s.folder.isEmpty()||t.query?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:3,class:"px-2",onClick:e[2]||(e[2]=t=>n.toggleCollapse()),alt:"Toggle collapse"},[(0,a._)("img",{src:r(8278)(`./${n.effectiveCollapsed?"plus":"minus"}.svg`),class:"icon-sm",alt:""},null,8,Oe)]))],2),n.effectiveCollapsed?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.subfolders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.uuid},[(0,a.wy)((0,a.Wm)(c,{folder:e,depth:s.depth+1,query:t.query},null,8,["folder","depth","query"]),[[o.F8,!t.query||e.matchesQuery(t.query)]])])))),128)),s.folder.crafts?((0,a.wg)(),(0,a.iD)("table",Le,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.crafts,((e,r)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{key:e.uuid,class:(0,Y.C_)({active:t.selectedEntity==e}),onClick:r=>t.explorerStore.selectedEntity=e},[(0,a._)("td",$e,[(0,a._)("span",{class:"c-tree",style:(0,Y.j5)({marginLeft:13*(s.depth+1)+"px"})},(0,Y.zw)(r==s.folder.crafts.length-1?"└":"├"),5),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:0,src:Fe,class:"clickable-icon",draggable:"",onDragstart:t=>n.startDrag(t,e),title:"Drag to move craft to a different folder",alt:""},null,40,qe)):((0,a.wg)(),(0,a.iD)("input",{key:1,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(e),onChange:r=>t.explorerStore.toggleMultiselectionOf(e)},null,40,Me)),(0,a._)("span",null,(0,Y.zw)(e.name),1)]),(0,a._)("td",Ie,[e.private?((0,a.wg)(),(0,a.iD)("img",ze)):((0,a.wg)(),(0,a.iD)("img",Ze))]),(0,a._)("td",Pe,[(0,a._)("span",je,(0,Y.zw)(e.item),1),e.color?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,Y.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256)):(0,a.kq)("",!0)]),(0,a._)("td",He,[e.property?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Re,(0,a.Uk)(" "+(0,Y.zw)(e.property),1)],64)):((0,a.wg)(),(0,a.iD)("span",Ge,"No property"))]),(0,a._)("td",Ve,[e.lock?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Ye,(0,a.Uk)(" "+(0,Y.zw)(e.lock.replace("Padlock","")),1)],64)):((0,a.wg)(),(0,a.iD)("span",We,"No lock"))]),(0,a._)("td",Qe,[(0,a.Uk)((0,Y.zw)(e.type)+" ",1),e.type?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Ke,"No position"))]),(0,a._)("td",Xe,(0,Y.zw)(e.priority),1),(0,a._)("td",tr,[(0,a.Uk)((0,Y.zw)(e.description)+" ",1),e.description?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",er,"No description"))])],10,Ae)),[[o.F8,!t.query||e.matchesQuery(t.query)]]))),128))])])):(0,a.kq)("",!0)],64))],32)}var or={name:"Folder",props:{folder:Object,depth:Number},computed:{totalCrafts(){return this.folder.findAllCrafts().length},effectiveCollapsed(){return this.folder.collapsed&&!this.query},...V},methods:{startDrag(t,e){t.stopPropagation(),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",e.isFolder?t.dataTransfer.setData("folderUuid",e.uuid):t.dataTransfer.setData("craftUuid",e.uuid)},drop(t){t.stopPropagation();try{if(t.dataTransfer.getData("craftUuid")){const e=this.database.rootFolder.findCraft(t.dataTransfer.getData("craftUuid"));if(!e)throw"Couldn't find craft: "+t.dataTransfer.getData("craftUuid");this.database.moveCraft(e,this.folder)}else{const e=this.database.rootFolder.findFolder(t.dataTransfer.getData("folderUuid"));if(!e)throw"Couldn't find folder: "+t.dataTransfer.getData("folderUuid");this.database.moveFolder(e,this.folder),this.folder.collapsed=!1}}catch(e){if("MoveError"!=e.name)throw e;console.warn(e.message)}},toggleCollapse(){this.folder.collapsed=!this.folder.collapsed&&null!=this.folder.parent}}};const sr=(0,Ht.Z)(or,[["render",rr]]);var ar=sr,lr={name:"Home",components:{Folder:ar,CraftDetails:Gt,FolderDetails:Ee},computed:{...V,tooManyMultiselected(){return this.multiselectionCrafts.length>M.maxCraftsExportable}},methods:{handleCraftClick(t){this.selectedEntity=t},copyMultiselection(){try{window.navigator.clipboard.writeText(M.convertCraftsToBCImportCommand(this.multiselectionCrafts))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},pluralize:F},created(){this.explorerStore.findRepeatedCraftName()}};const ir=(0,Ht.Z)(lr,[["render",at]]);var nr=ir,cr=r(8076),dr=r(121);const pr={class:"p-4"},ur=(0,a.uE)('<h1 class="mt-0"> What&#39;s this?</h1><p>A GUI to back up, organize, and edit items crafted in BC in a convenient way.</p><h1>Where&#39;s my data stored?</h1><p>In your browser&#39;s local storage. This means you should make regular backups (see Settings page).</p><h1>How do I import crafts from BC?</h1><p>There are currently two ways:</p><h2><img src="'+cr+'" class="icon"> Importing a single craft (via FBC):</h2><ol><li>Open your crafted item in BC</li><li>Click the FBC &quot;Export&quot; button</li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h2><img src="'+cr+'" class="icon"> Importing all your crafts at once (via console):</h2><ol><li>Open the browser console on BC</li><li>Copy the output of <code>JSON.stringify(Player.Crafting)</code></li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h1>How do I export crafts back to BC?</h1><p>There are currently two ways:</p><h2><img src="'+dr+'" class="icon"> Exporting a single craft (via FBC)</h2><ol><li>Select the craft and click &quot;Export to clipboard&quot; </li><li>Go to BC and open a new craft</li><li>Click the FBC &quot;Import&quot; button</li></ol><h2><img src="'+dr+'" class="icon"> Exporting many crafts at once (via console)</h2><img src="'+W+'" class="icon ml-4 mr-1"><span style="color:#d1b758;font-size:90%;">This replaces <u>all</u> your BC crafts.</span><ol><li>Select a folder to export and click &quot;Export to clipboard&quot;, or select multiple crafts/folders together and click &quot;Export&quot;</li><li>Open the browser console on BC</li><li>Paste the clipboard contents</li></ol>',18),fr=[ur];function mr(t,e,r,o,s,l){return(0,a.wg)(),(0,a.iD)("div",pr,fr)}var hr={name:"About"};const gr=(0,Ht.Z)(hr,[["render",mr]]);var br=gr;const yr={class:"p-4"},Cr=(0,a._)("h1",{class:"mt-0"},"Settings",-1),wr=(0,a._)("h1",null,"Backup",-1),vr=(0,a._)("p",null,"Export your BCCM data as JSON. This will allow you to restore your data even if you clear your browser's storage.",-1),kr=(0,a._)("img",{src:dr},null,-1),_r=(0,a._)("img",{src:ct},null,-1),xr=(0,a._)("h1",null,"Restore",-1),Sr=(0,a._)("p",null,"Restore a BCCM JSON backup. This will replace all current data.",-1),Tr=(0,a._)("img",{src:cr},null,-1),Dr=(0,a._)("img",{src:c},null,-1),Er=(0,a._)("h1",null,"Export",-1),Fr=(0,a._)("p",null,"Generate a CSV export you can open as a human-friendly spreadsheet.",-1),Nr=(0,a._)("img",{src:dr},null,-1),Ur=(0,a._)("img",{src:ct},null,-1),Jr=(0,a._)("h1",null,"Reset",-1),Br=(0,a._)("p",null,"Delete all crafts and user data.",-1),Or=(0,a._)("img",{src:ut},null,-1);function Lr(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",yr,[Cr,(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=e=>t.database.settings.confirmCraftDeletion=e),onChange:e[1]||(e[1]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,t.database.settings.confirmCraftDeletion]]),(0,a.Uk)(" Confirm before deleting crafts ")]),wr,vr,(0,a._)("button",{class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>i.downloadBackup&&i.downloadBackup(...t))},[kr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=(...t)=>i.backupToClipboard&&i.backupToClipboard(...t))},[_r,(0,a.Uk)(" Copy to clipboard")]),xr,Sr,(0,a._)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=e=>t.$refs.uploader.click())},[Tr,(0,a.Uk)("Load from file")]),(0,a._)("input",{ref:"uploader",type:"file",onChange:e[5]||(e[5]=(...t)=>i.handleFileSelect&&i.handleFileSelect(...t)),accept:".json",style:{display:"none"}},null,544),(0,a._)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>i.restoreFromClipboard&&i.restoreFromClipboard(...t))},[Dr,(0,a.Uk)(" Load from clipboard")]),Er,Fr,(0,a._)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...t)=>i.downloadCsvExport&&i.downloadCsvExport(...t))},[Nr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[8]||(e[8]=(...t)=>i.copyCsvExportToClipboard&&i.copyCsvExportToClipboard(...t))},[Ur,(0,a.Uk)(" Copy to clipboard")]),Jr,Br,(0,a._)("button",{class:"btn btn-danger",onClick:e[9]||(e[9]=(...t)=>i.resetDatabase&&i.resetDatabase(...t))},[Or,(0,a.Uk)("Delete database")])])}var Ar={name:"Settings",computed:{...V},methods:{backupToClipboard(){navigator.clipboard.writeText(this.database.serialize()),this.alertStore.alert("Copied to clipboard.","success")},downloadBackup(){x(this.database.serialize(),`BCCMBackup-${(new Date).toISOString().split("T")[0]}.json`)},restoreFromClipboard(){_().then(this.importDatabase)},handleFileSelect(t){S(t.target.files[0]).then((t=>this.importDatabase(t.join(""))))},importDatabase(t){try{this.database.deserialize(t),this.database.saveToLocalStorage(),this.$emit("goTo","home"),this.alertStore.alert(`Loaded database with ${this.database.findCraftCount()} crafts.`,"success")}catch(e){this.alertStore.alert(e.message)}},copyCsvExportToClipboard(){navigator.clipboard.writeText(this.getDatabaseCsv())},downloadCsvExport(){x(this.getDatabaseCsv(),`crafts-${(new Date).toISOString().split("T")[0]}.csv`)},getDatabaseCsv(){return T([["Name","Item","Private","Property","Lock","Type","Color","Description","Folder","Export"]].concat(this.database.rootFolder.findAllCrafts().map((t=>[t.name,t.item,t.private,t.property,t.lock,t.type||"",t.color,t.description,t.parent.getAncestry().slice(1).map((t=>t.name)).join("."),t.toCompressedBCJson()]))))},resetDatabase(){confirm("Are you sure you want to delete all your data?")&&(this.database.reset(),this.explorerStore.selectedEntity=null,this.$emit("goTo","home"))}}};const $r=(0,Ht.Z)(Ar,[["render",Lr]]);var qr=$r;function Mr(t,e,r,o,s,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,Y.C_)(`footer-alert ${l.type}`)},(0,Y.zw)(l.message),3)}var Ir={name:"Alert",computed:{message(){return this.alertStore.message},type(){return this.alertStore.type},...(0,s.Kc)(U)}};const zr=(0,Ht.Z)(Ir,[["render",Mr]]);var Zr=zr,Pr={name:"App",components:{Alert:Zr,Explorer:nr,Settings:qr,About:br},data:()=>({page:"home",queryField:""}),computed:{...V},methods:{goTo(t){this.page=t},loadFromClipboard(){_().then((t=>{if(t)try{const e=this.database.importCrafts(t);console.log(`Imported ${e.new+e.edited}/${e.total} crafts (${e.new} new, ${e.edited} edited, ${e.failed} failed)`),e.failed>0?1==e.total?this.alertStore.alert("Could not load the craft, see console for details."):this.alertStore.alert(`Could not load ${e.failed} out of ${e.total} ${F("craft",e.total)}, see console for details.`):0==e.edited?this.alertStore.alert(`Added ${e.new} new ${F("craft",e.new)}.`,"success"):this.alertStore.alert(0==e.new?`Updated ${e.edited} ${F("craft",e.edited)}.`:`Added ${e.new} new ${F("craft",e.new)}, and updated ${e.edited}.`,"success")}catch(e){this.alertStore.alert("Couldn't parse clipboard data, see console for details."),console.error(e)}else this.alertStore.alert("Clipboard is empty.")}))},updateQuery(){this.explorerStore.query=this.queryField.toLowerCase()}},created(){this.updateQuery=E(this.updateQuery,200)}};const jr=(0,Ht.Z)(Pr,[["render",v]]);var Hr=jr;const Rr=(0,s.WB)(),Gr=(0,o.ri)(Hr);window.app=Gr,Gr.use(Rr),Gr.mount("#app")},8278:function(t,e,r){var o={"./about.svg":833,"./arrow-down.svg":8688,"./arrow-ne.svg":8894,"./arrow-up.svg":5362,"./checkbox.svg":8231,"./clip-read.svg":2449,"./clip-write.svg":6240,"./cog.svg":9847,"./craft.svg":7100,"./cross.svg":5166,"./drag.svg":4652,"./folder.svg":3735,"./github.svg":2905,"./load.svg":8076,"./lock.svg":4485,"./logo.svg":5522,"./minus.svg":275,"./plus.svg":4355,"./private.svg":3254,"./public.svg":3210,"./save.svg":121,"./star.svg":6338,"./trash.svg":5588,"./visibility.svg":2165,"./warn.svg":8167};function s(t){var e=a(t);return r(e)}function a(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}s.keys=function(){return Object.keys(o)},s.resolve=a,t.exports=s,s.id=8278},833:function(t,e,r){"use strict";t.exports=r.p+"img/about.b9065e51.svg"},8688:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-down.1cf83ab8.svg"},8894:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-ne.e7788b52.svg"},5362:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-up.fb3b820b.svg"},8231:function(t,e,r){"use strict";t.exports=r.p+"img/checkbox.c1759961.svg"},2449:function(t,e,r){"use strict";t.exports=r.p+"img/clip-read.12962e4f.svg"},6240:function(t,e,r){"use strict";t.exports=r.p+"img/clip-write.630c71d8.svg"},9847:function(t,e,r){"use strict";t.exports=r.p+"img/cog.11fa8f2d.svg"},7100:function(t,e,r){"use strict";t.exports=r.p+"img/craft.cb62eadc.svg"},5166:function(t,e,r){"use strict";t.exports=r.p+"img/cross.047dc357.svg"},4652:function(t,e,r){"use strict";t.exports=r.p+"img/drag.cc380d7e.svg"},3735:function(t,e,r){"use strict";t.exports=r.p+"img/folder.4c905663.svg"},2905:function(t,e,r){"use strict";t.exports=r.p+"img/github.4fe90b8f.svg"},8076:function(t,e,r){"use strict";t.exports=r.p+"img/load.aed85cb8.svg"},4485:function(t,e,r){"use strict";t.exports=r.p+"img/lock.f44b2e25.svg"},5522:function(t,e,r){"use strict";t.exports=r.p+"img/logo.08a29e38.svg"},275:function(t,e,r){"use strict";t.exports=r.p+"img/minus.5e739917.svg"},4355:function(t,e,r){"use strict";t.exports=r.p+"img/plus.2d1d194c.svg"},3254:function(t,e,r){"use strict";t.exports=r.p+"img/private.54e41622.svg"},3210:function(t,e,r){"use strict";t.exports=r.p+"img/public.749147b3.svg"},121:function(t,e,r){"use strict";t.exports=r.p+"img/save.e2a4a06f.svg"},6338:function(t,e,r){"use strict";t.exports=r.p+"img/star.35ce245d.svg"},5588:function(t,e,r){"use strict";t.exports=r.p+"img/trash.331d8fc4.svg"},2165:function(t,e,r){"use strict";t.exports=r.p+"img/visibility.8e7adac8.svg"},8167:function(t,e,r){"use strict";t.exports=r.p+"img/warn.a9a4355b.svg"}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,a){if(!o){var l=1/0;for(d=0;d<t.length;d++){o=t[d][0],s=t[d][1],a=t[d][2];for(var i=!0,n=0;n<o.length;n++)(!1&a||l>=a)&&Object.keys(r.O).every((function(t){return r.O[t](o[n])}))?o.splice(n--,1):(i=!1,a<l&&(l=a));if(i){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[o,s,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.p="/bccm/"}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,a,l=o[0],i=o[1],n=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(n)var d=n(r)}for(e&&e(o);c<l.length;c++)a=l[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(d)},o=self["webpackChunkbccm"]=self["webpackChunkbccm"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(4364)}));o=r.O(o)})();
//# sourceMappingURL=app.28d16b31.js.map