(function(){var __webpack_modules__={7628:function(t,e,r){"use strict";var o=r(9242),s=r(1020),a=r(3396),i=r(7100),n=r(9847),l=r(833),c=r(2449),d=r(2905);const p={class:"d-flex justify-content-between"},u={class:"d-flex"},f=(0,a._)("img",{src:i,id:"logo",alt:""},null,-1),m=(0,a._)("span",{id:"name"},"BC Crafts Manager",-1),h=[f,m],g=(0,a._)("img",{src:n,class:"mr-1",alt:""},null,-1),_=(0,a._)("img",{src:l,class:"mr-1",alt:""},null,-1),b=(0,a._)("img",{src:c,alt:""},null,-1),y=(0,a._)("a",{href:"https://github.com/capyfied/bccm",title:"GitHub",target:"_blank"},[(0,a._)("img",{src:d,id:"github",class:"mx-2",alt:""})],-1),w={class:"container-fluid"};function C(t,e,r,s,i,n){const l=(0,a.up)("Alert"),c=(0,a.up)("Explorer"),d=(0,a.up)("About"),f=(0,a.up)("Settings"),m=(0,a.up)("LZStringTester");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",p,[(0,a._)("div",u,[(0,a._)("span",{id:"main-link",class:"menu-link",onClick:e[0]||(e[0]=e=>t.page="home")},h),(0,a._)("span",{class:"menu-link",onClick:e[1]||(e[1]=e=>t.page="settings")},[g,(0,a.Uk)(" Settings")]),(0,a._)("span",{class:"menu-link",onClick:e[2]||(e[2]=e=>t.page="about")},[_,(0,a.Uk)(" Help")])]),"home"==t.page?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.queryField=e),id:"query",class:"mx-3",onInput:e[4]||(e[4]=t=>n.updateQuery()),placeholder:"Filter items..."},null,544)),[[o.nr,t.queryField]]):(0,a.kq)("",!0),(0,a._)("span",null,[(0,a._)("button",{class:"btn btn-success",onClick:e[5]||(e[5]=t=>n.loadFromClipboard()),style:{height:"28px","margin-top":"3px"}},[b,(0,a.Uk)(" Load from clipboard ")]),y])]),(0,a._)("main",w,[(0,a.Wm)(l),"home"==t.page?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0),"about"==t.page?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),"settings"==t.page?((0,a.wg)(),(0,a.j4)(f,{key:2,onGoTo:n.goTo},null,8,["onGoTo"])):(0,a.kq)("",!0),"lztester"==t.page?((0,a.wg)(),(0,a.j4)(m,{key:3})):(0,a.kq)("",!0)])],64)}var v=r(3313);const k=(0,s.Q_)("alert",{state:()=>({message:null,type:null,dismissalTimeout:null}),actions:{alert(t,e="error"){if(t){let r;"error"==e?(r=1e4,console.error(t)):r=5e3,clearTimeout(this.dismissalTimeout),this.message=t,this.type=e,this.dismissalTimeout=setTimeout((()=>{this.alert(null)}),r)}else this.message=null,this.type=null}}});r(7658);var x=r(2482),E=r(9459),T=r(2186);class D{constructor(t,e){(0,x.Z)(this,"uuid",null),(0,x.Z)(this,"name",null),(0,x.Z)(this,"parent",null),(0,x.Z)(this,"subfolders",null),(0,x.Z)(this,"crafts",null),(0,x.Z)(this,"collapsed",null),(0,x.Z)(this,"isFolder",!0),this.uuid=(0,v.Rl)(),this.name=t,this.parent=e,this.subfolders=[],this.crafts=[],this.collapsed=!1}findAllCrafts(){return this.crafts.concat(...this.subfolders.map((t=>t.findAllCrafts())))}findCraft(t){let e=this.crafts.find((e=>e.uuid==t));if(e)return e;for(let r of this.subfolders)if(e=r.findCraft(t),e)return e;return!1}findFolder(t){return this.uuid==t?this:this.subfolders.reduce(((e,r)=>e||r.findFolder(t)),null)}toJson(){return{uuid:this.uuid,name:this.name,subfolders:this.subfolders.map((t=>t.toJson())),crafts:this.crafts.map((t=>t.toJson())),collapsed:this.collapsed}}isEmpty(){return 0==this.crafts.length&&0==this.subfolders.length}isWithin(t){return t==this||!!this.parent&&this.parent.isWithin(t)}getAncestry(){return this.parent?this.parent.getAncestry().concat([this]):[this]}static fromJson(t,e=null){const r=new D;return r.uuid=t.uuid,r.name=t.name,r.parent=e,r.subfolders=t.subfolders.map((t=>D.fromJson(t,r))),r.crafts=t.crafts.map((t=>T.Z.fromJson(t,r))),r.collapsed=t.collapsed,r}toBCImportCommand(t=0){return E.Z.convertCraftsToBCImportCommand(this.findAllCrafts(),t)}move(t){const e=this.parent.subfolders.indexOf(this);if(-1==e)throw"Could not find subfolder";"down"==t&&e<this.parent.subfolders.length-1?(0,v.LF)(this.parent.subfolders,e,e+1):"up"==t&&e>0?(0,v.LF)(this.parent.subfolders,e,e-1):console.warn(`Cannot move folder ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.crafts.some((e=>e.matchesQuery(t)))||this.subfolders.some((e=>e.matchesQuery(t)))}}var S=r(8780);class I{constructor(){this.loadJson(I.DEFAULT_SETTINGS)}static fromJson(t){const e=new I;return e.loadJson(t),e}loadJson(t){"string"==typeof t&&(t=JSON.parse(t));const e=I.DEFAULT_SETTINGS;for(let r of I.KEYS)void 0!==t[r]?this[r]=t[r]:(console.warn(`Missing field '${r}' in loaded settings, using default.`),this[r]=e[r]);this.validate()}toJson(){const t={};return I.KEYS.forEach((e=>{t[e]=this[e]})),t}validate(){(0,S.p)(this,"confirmCraftDeletion","boolean"),(0,S.p)(this,"overrideMaxCraftsExportableAsCommand","number")}}(0,x.Z)(I,"DEFAULT_SETTINGS",{confirmCraftDeletion:!0,overrideMaxCraftsExportableAsCommand:0}),(0,x.Z)(I,"KEYS",Object.keys(I.DEFAULT_SETTINGS));var U=r(6943);class O{constructor(){if((0,x.Z)(this,"rootFolder",null),(0,x.Z)(this,"settings",null),this.saveToLocalStorageWithDebounce=(0,v.Ds)((()=>this.saveToLocalStorage()),1e3),window.localStorage.database)try{this.deserialize(window.localStorage.database)}catch(t){window.localStorage.failed=window.localStorage.database,console.error(`Error loading saved database: ${t.message}. Copying old database to localStorage.failed and resetting.`),this.reset()}else this.reset()}reset(){this.rootFolder=new D("Crafted items"),this.settings=new I,this.saveToLocalStorage()}addCrafts(t){let e={new:0,edited:0,failed:0};const r=this.rootFolder.findAllCrafts();(0,v.El)(t);for(let s of t){try{s.parent=this.rootFolder,s.validate()}catch(o){console.warn(`Skipping invalid craft "${s.name}": ${o.message}"`),e.failed++;continue}const t=r.find((t=>t.name==s.name));t?(Object.assign(t,s),e.edited++):(s.parent=this.rootFolder,this.rootFolder.crafts.push(s),e.new++)}return this.saveToLocalStorage(),e.total=e.new+e.edited+e.failed,e}removeCraft(t){t.parent.crafts=t.parent.crafts.filter((e=>e!=t)),this.saveToLocalStorageWithDebounce()}moveCraft(t,e){const r=t.parent;r!=e&&(r.crafts=r.crafts.filter((e=>e!=t)),e.crafts.push(t),t.parent=e),this.saveToLocalStorage()}moveFolder(t,e){if(!t.parent)throw new J("Cannot move the root folder.");if(t==e)throw new J("Cannot move folder into itself.");if(e==t.parent)return;if(e.isWithin(t))throw new J("Cannot move a folder into one of its descendents.");const r=t.parent;r.subfolders=r.subfolders.filter((e=>e!=t)),t.parent=e,e.subfolders.push(t)}addFolder(t,e){const r=new D(e,t);return t.subfolders.push(r),this.saveToLocalStorage(),r}removeFolder(t){if(!t.parent)throw"Cannot delete root folder.";t.parent.subfolders=t.parent.subfolders.filter((e=>e!=t)),this.saveToLocalStorage()}importCrafts(t){return this.addCrafts(U.Z.convertStringToCrafts(t))}serialize(){return JSON.stringify({version:1,rootFolder:this.rootFolder.toJson(),settings:this.settings.toJson()})}deserialize(t){if(!t)throw new F("No data to process.");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new F(`The provided text is not valid JSON: "${(0,v.fk)(t,10)}"`)}try{if(!t.rootFolder)throw new F("Parsed JSON does not contain rootFolder attribute.");this.rootFolder=D.fromJson(t.rootFolder)}catch(e){throw new F("Unexpected error when deserializing crafts: "+e)}try{if(!t.settings)throw new F("Parsed JSON does not contain settings attribute.");this.settings=I.fromJson(t.settings)}catch(e){console.warn("Unexpected error when deserializing settings, using defaults instead. Reason: "+e),this.settings=new I}return this}saveToLocalStorage(){window.localStorage.database=this.serialize()}findCraftCount(){return this.rootFolder.findAllCrafts().length}findRepeatedCraftName(){return this.rootFolder.findAllCrafts().map((t=>t.name)).filter(((t,e,r)=>r.indexOf(t)!==e))[0]||null}}class F extends Error{constructor(t){super(t),this.name="DeserializationError"}}class J extends Error{constructor(t){super(t),this.name="MoveError"}}const B=(0,s.Q_)("explorer",{state:()=>({database:new O,query:"",selectedEntity:null,multiselectionEntities:[],repeatedCraftName:null}),getters:{multiselectionCrafts(t){const e=new Set;for(let r of t.multiselectionEntities)r.isFolder?r.findAllCrafts().forEach((t=>e.add(t))):e.add(r);return[...e]}},actions:{toggleMultiselectionOf(t){this.multiselectionEntities.includes(t)?this.multiselectionEntities=this.multiselectionEntities.filter((e=>e!=t)):this.multiselectionEntities.push(t)},findRepeatedCraftName(){this.repeatedCraftName=this.database.findRepeatedCraftName()}}});var L={...(0,s.rn)(B,["database","query","selectedEntity","multiselectionEntities","multiselectionCrafts","repeatedCraftName"]),...(0,s.Kc)(k,B)},A=r(7139),N=r(8167),q=r(8894);const M={class:"row"},$={class:"my-1"},Z={key:1,id:"repeated-notice",class:"explorer-notice"},P=(0,a._)("p",{class:"my-1"},[(0,a._)("img",{src:N,class:"icon"}),(0,a.Uk)(" Repeated craft name:")],-1),j={class:"my-1 text-bold"},z={key:3,class:"p-5 mt-5 text-center"},R=(0,a._)("img",{src:q,class:"ml-2",style:{width:"20px"}},null,-1);function W(t,e,r,s,i,n){const l=(0,a.up)("Folder"),c=(0,a.up)("FolderDetails"),d=(0,a.up)("CraftDetails");return(0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",{id:"craft-list",class:(0,A.C_)("scrollable "+(t.selectedEntity?"col-8 col-xl-9":"col-12")),onKeydown:e[2]||(e[2]=(0,o.D2)(((...e)=>t.deleteSelectedEntity&&t.deleteSelectedEntity(...e)),["delete"]))},[t.multiselectionCrafts.length>0?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"multiselection-notice",class:(0,A.C_)({"explorer-notice":!0,invalid:n.tooManyMultiselected})},[(0,a._)("p",$,(0,A.zw)(t.multiselectionCrafts.length)+" "+(0,A.zw)(n.pluralize("craft",t.multiselectionCrafts.length))+" selected.",1),(0,a._)("button",{class:"btn-transparent text-bold pl-0",onClick:e[0]||(e[0]=t=>this.explorerStore.multiselectionEntities=[])},"Cancel"),(0,a._)("button",{class:"btn-transparent float-right text-bold pr-0",onClick:e[1]||(e[1]=t=>n.copyMultiselection())},"Export")],2)):(0,a.kq)("",!0),t.repeatedCraftName?((0,a.wg)(),(0,a.iD)("div",Z,[P,(0,a._)("p",j,(0,A.zw)(t.repeatedCraftName),1)])):(0,a.kq)("",!0),t.database.rootFolder.crafts.length>0||t.database.rootFolder.subfolders.length>0?((0,a.wg)(),(0,a.j4)(l,{key:2,folder:t.database.rootFolder,depth:0},null,8,["folder"])):((0,a.wg)(),(0,a.iD)("div",z,[(0,a.Uk)(" Import some crafts to display them here. "),R]))],34),t.selectedEntity?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[t.selectedEntity.isFolder?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"col-4 col-xl-3"})):((0,a.wg)(),(0,a.j4)(d,{key:1,class:"col-4 col-xl-3"}))],64)):(0,a.kq)("",!0)])}var H=r(5166),G=r(6338),K=r(4485),V=r(6240),Y=r(5362),Q=r(4443),X=r(8688),tt=r(5588);const et={id:"sidepanel",class:"scrollable"},rt={class:"d-flex justify-content-between"},ot=(0,a._)("h1",null,[(0,a._)("img",{src:i,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit craft")],-1),st=(0,a._)("img",{src:H,class:"icon"},null,-1),at=[st],it={class:"float-right"},nt=["maxlength"],lt={class:"float-right"},ct=["maxlength"],dt={key:0,style:{float:"right"}},pt=(0,a._)("img",{src:G,class:"icon",alt:""},null,-1),ut=(0,a._)("img",{src:K,class:"icon",alt:""},null,-1),ft=["value"],mt={class:"row mt-3 mx-n1"},ht={class:"col-12 col-md-6 p-1"},gt=(0,a._)("img",{src:V},null,-1),_t={class:"col-12 col-md-6 p-1"},bt=(0,a._)("img",{src:V},null,-1),yt={class:"col-12 col-md-6 p-1"},wt=["disabled"],Ct=(0,a._)("img",{src:Y},null,-1),vt={class:"col-12 col-md-6 p-1"},kt=(0,a._)("img",{src:Q},null,-1),xt={class:"col-12 col-md-6 p-1"},Et=["disabled"],Tt=(0,a._)("img",{src:X},null,-1),Dt={class:"col-12 col-md-6 p-1"},St=(0,a._)("img",{src:c},null,-1),It={class:"col-12 col-md-6 p-1"},Ut=(0,a._)("img",{src:tt},null,-1);function Ot(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",et,[(0,a._)("div",rt,[ot,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},at)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a._)("small",it,(0,A.zw)(n.craft.name.length)+"/"+(0,A.zw)(n.nameMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>n.craft.name=t),onInput:e[2]||(e[2]=t=>n.handleNameInput()),maxlength:n.nameMaxLength},null,40,nt),[[o.nr,n.craft.name]])]),(0,a._)("label",null,[(0,a.Uk)(" Description "),(0,a._)("small",lt,(0,A.zw)(n.craft.description.length)+"/"+(0,A.zw)(n.descrMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>n.craft.description=t),onChange:e[4]||(e[4]=e=>t.database.saveToLocalStorage()),maxlength:n.descrMaxLength},null,40,ct),[[o.nr,n.craft.description]])]),(0,a._)("label",null,[(0,a.Uk)(" Colors "),n.craft.color?((0,a.wg)(),(0,a.iD)("span",dt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.craft.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,A.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256))])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>n.craft.color=t),disabled:""},null,512),[[o.nr,n.craft.color]])]),(0,a._)("label",null,[(0,a.Uk)(" Item codename "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>n.craft.item=t),disabled:""},null,512),[[o.nr,n.craft.item]])]),(0,a._)("label",null,[pt,(0,a.Uk)(" Property "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>n.craft.property=t),disabled:""},null,512),[[o.nr,n.craft.property]])]),(0,a._)("label",null,[(0,a.Uk)(" Default position "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>n.craft.type=t),disabled:""},null,512),[[o.nr,n.craft.type]])]),(0,a._)("label",null,[ut,(0,a.Uk)(" Lock "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>n.craft.lock=t),disabled:""},null,512),[[o.nr,n.craft.lock]])]),(0,a._)("label",null,[(0,a.Uk)(" Override priority "),(0,a._)("input",{type:"text",value:n.prettyPriority,disabled:""},null,8,ft)]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>n.craft.private=t),onChange:e[11]||(e[11]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,n.craft.private]]),(0,a.Uk)(" Private ")]),(0,a._)("div",mt,[(0,a._)("div",ht,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[12]||(e[12]=(...t)=>n.copyCompressedBCJson&&n.copyCompressedBCJson(...t))},[gt,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",_t,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[13]||(e[13]=(...t)=>n.copyBCJson&&n.copyBCJson(...t))},[bt,(0,a.Uk)(" Copy as JSON")])]),(0,a._)("div",yt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[14]||(e[14]=t=>n.moveCraft("up")),disabled:!n.craft.parent||n.craft.parent.crafts[0]==n.craft},[Ct,(0,a.Uk)(" Move up ")],8,wt)]),(0,a._)("div",vt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[15]||(e[15]=e=>t.explorerStore.toggleMultiselectionOf(n.craft))},[kt,(0,a.Uk)(" Select ")])]),(0,a._)("div",xt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[16]||(e[16]=t=>n.moveCraft("down")),disabled:!n.craft.parent||n.craft.parent.crafts[n.craft.parent.crafts.length-1]==n.craft},[Tt,(0,a.Uk)(" Move down ")],8,Et)]),(0,a._)("div",Dt,[(0,a._)("button",{class:"btn btn-warning w-100",onClick:e[17]||(e[17]=(...t)=>n.overwriteCraftWithClipboard&&n.overwriteCraftWithClipboard(...t)),title:"Overwrite this craft with the data currently in the clipboard"},[St,(0,a.Uk)(" Overwrite ")])]),(0,a._)("div",It,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[18]||(e[18]=(...t)=>n.deleteCraft&&n.deleteCraft(...t))},[Ut,(0,a.Uk)(" Delete ")])])])])}var Ft={name:"CraftDetails",computed:{craft(){return this.selectedEntity},nameMaxLength(){return T.Z.NAME_MAX_LENGTH},descrMaxLength(){return T.Z.DESCR_MAX_LENGTH},prettyPriority(){const t=this.craft.priority;if(null===t)return"";if("object"!==typeof t)return t;try{return Object.entries(t).map((t=>`${t[0]}: ${t[1]}`)).join(", ")}catch{return JSON.stringify(t)}},...L},methods:{handleNameInput(){this.explorerStore.findRepeatedCraftName(),this.repeatedCraftName||this.database.saveToLocalStorage()},deleteCraft(){if(!this.database.settings.confirmCraftDeletion||confirm("Are you sure you want to delete this craft?")){const t=this.craft.parent,e=t.crafts.indexOf(this.craft),r=e<1?0:e-1;this.database.removeCraft(this.craft),this.explorerStore.selectedEntity=t.crafts[r]||null}},copyCompressedBCJson(){window.navigator.clipboard.writeText(this.craft.toCompressedBCJson())},copyBCJson(){window.navigator.clipboard.writeText(JSON.stringify(this.craft.toBCJson()))},overwriteCraftWithClipboard(){(0,v.Xi)().then((t=>{if(t&&t.length>100)try{const e=T.Z.fromCompressedBCJson(t),r=this.craft;for(let t of["item","property","lock","name","description","color","private","type","priority"])r[t]=e[t];this.database.saveToLocalStorage()}catch(e){console.error(e),this.alertStore.alert("Could not parse the provided craft.")}else this.alertStore.alert("You need to have an exported craft in your clipboard.")}))},moveCraft(t){this.craft.move(t),this.database.saveToLocalStorageWithDebounce()}},created(){this.handleNameInput=(0,v.Ds)(this.handleNameInput,500)}},Jt=r(89);const Bt=(0,Jt.Z)(Ft,[["render",Ot]]);var Lt=Bt,At=r(3735),Nt=r(4355),qt=r(2165);const Mt={id:"sidepanel",class:"scrollable"},$t={class:"d-flex justify-content-between"},Zt=(0,a._)("h1",null,[(0,a._)("img",{src:At,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit folder")],-1),Pt=(0,a._)("img",{src:H,class:"icon"},null,-1),jt=[Pt],zt={key:0,class:"mt-2 text-sm"},Rt={key:1,class:"mt-2 text-sm"},Wt={class:"row mt-2 mx-n1"},Ht={class:"col-12 col-md-6 p-1"},Gt=["disabled"],Kt=(0,a._)("img",{src:V},null,-1),Vt={class:"col-12 col-md-6 p-1"},Yt=["disabled"],Qt=(0,a._)("img",{src:V},null,-1),Xt={class:"col-12 col-md-6 p-1"},te=(0,a._)("img",{src:Nt},null,-1),ee={class:"col-12 col-md-6 p-1"},re=(0,a._)("img",{src:Q},null,-1),oe={class:"col-12 col-md-6 p-1"},se=["disabled"],ae=(0,a._)("img",{src:Y},null,-1),ie={class:"col-12 col-md-6 p-1"},ne=["disabled"],le=(0,a._)("img",{src:qt},null,-1),ce={class:"col-12 col-md-6 p-1"},de=["disabled"],pe=(0,a._)("img",{src:X},null,-1),ue={class:"col-12 col-md-6 p-1"},fe=["disabled"],me=(0,a._)("img",{src:tt},null,-1);function he(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",Mt,[(0,a._)("div",$t,[Zt,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},jt)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>n.folder.name=t),ref:"txtName",onChange:e[2]||(e[2]=e=>t.database.saveToLocalStorage()),maxlength:"30"},null,544),[[o.nr,n.folder.name]])]),n.totalCrafts>0?((0,a.wg)(),(0,a.iD)("div",zt,(0,A.zw)(n.totalCrafts)+" total "+(0,A.zw)(n.pluralize("craft",n.totalCrafts)),1)):((0,a.wg)(),(0,a.iD)("div",Rt,"No crafts")),(0,a._)("div",Wt,[(0,a._)("div",Ht,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[3]||(e[3]=(...t)=>n.copyImportCommand&&n.copyImportCommand(...t)),disabled:0==n.totalCrafts},[Kt,(0,a.Uk)(" Copy as command")],8,Gt)]),(0,a._)("div",Vt,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[4]||(e[4]=(...t)=>n.copyAsCompressedBCJsons&&n.copyAsCompressedBCJsons(...t)),disabled:0==n.totalCrafts},[Qt,(0,a.Uk)(" Copy as export")],8,Yt)]),(0,a._)("div",Xt,[(0,a._)("button",{class:"btn btn-success w-100",onClick:e[5]||(e[5]=(...t)=>n.addFolder&&n.addFolder(...t))},[te,(0,a.Uk)(" New subfolder")])]),(0,a._)("div",ee,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[6]||(e[6]=e=>t.explorerStore.toggleMultiselectionOf(n.folder))},[re,(0,a.Uk)(" Select ")])]),(0,a._)("div",oe,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[7]||(e[7]=t=>n.moveFolder("up")),disabled:!n.folder.parent||n.folder.parent.subfolders[0]==n.folder},[ae,(0,a.Uk)(" Move up ")],8,se)]),(0,a._)("div",ie,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",disabled:0==n.totalCrafts,onClick:e[8]||(e[8]=(...t)=>n.toggleVisibilityOfAllCrafts&&n.toggleVisibilityOfAllCrafts(...t))},[le,(0,a.Uk)(" Toggle visibility ")],8,ne)]),(0,a._)("div",ce,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[9]||(e[9]=t=>n.moveFolder("down")),disabled:!n.folder.parent||n.folder.parent.subfolders[n.folder.parent.subfolders.length-1]==n.folder},[pe,(0,a.Uk)(" Move down ")],8,de)]),(0,a._)("div",ue,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[10]||(e[10]=(...t)=>n.deleteFolder&&n.deleteFolder(...t)),disabled:!n.folder.parent},[me,(0,a.Uk)(" Delete ")],8,fe)])])])}var ge=r(9708),_e={name:"FolderDetails",computed:{folder(){return this.selectedEntity},totalCrafts(){return this.folder.findAllCrafts().length},...L},methods:{addFolder(){const t=this.database.addFolder(this.folder,"New folder");this.folder.collapsed=!1,this.explorerStore.selectedEntity=t,this.$refs.txtName.focus()},deleteFolder(){const t=this.folder.findAllCrafts().length;(0==t||confirm(`Delete ${this.folder.name||"this folder"} and the ${t} craft(s) inside?`))&&(this.database.removeFolder(this.folder),this.explorerStore.selectedEntity=this.folder.parent)},copyImportCommand(){try{const t=this.database.settings.overrideMaxCraftsExportableAsCommand;window.navigator.clipboard.writeText(this.folder.toBCImportCommand(t))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},copyAsCompressedBCJsons(){window.navigator.clipboard.writeText(ge.Z.convertCraftsToCompressedBCJsons(this.folder.findAllCrafts()))},moveFolder(t){this.folder.move(t),this.database.saveToLocalStorageWithDebounce()},toggleVisibilityOfAllCrafts(){const t=this.folder.findAllCrafts(),e=t[0].private;t.forEach((t=>{t.private=!e})),this.database.saveToLocalStorage()},pluralize:v._6}};const be=(0,Jt.Z)(_e,[["render",he]]);var ye=be,we=r(4652),Ce=r(3254),ve=r(3210);const ke=["checked"],xe={class:"total-crafts"},Ee=["src"],Te={key:0,class:"crafts-table w-100"},De=["onClick"],Se={class:"c-name"},Ie=["onDragstart"],Ue=["checked","onChange"],Oe={class:"c-priv text-center"},Fe={key:0,src:Ce,class:"icon",title:"Private",alt:"Private"},Je={key:1,src:ve,class:"icon",title:"Public",alt:"Public"},Be={class:"c-craft"},Le={class:"mr-2"},Ae={class:"c-prop"},Ne=(0,a._)("img",{src:G,class:"icon",alt:""},null,-1),qe={key:1,class:"muted"},Me={class:"c-lock"},$e=(0,a._)("img",{src:K,class:"icon",alt:""},null,-1),Ze={key:1,class:"muted"},Pe={class:"c-type"},je={key:0,class:"muted"},ze={class:"c-priority"},Re={key:1,class:"muted"},We={class:"c-descr"},He={key:0,class:"muted"};function Ge(t,e,s,i,n,l){const c=(0,a.up)("Folder",!0);return(0,a.wg)(),(0,a.iD)("div",{onDrop:e[4]||(e[4]=t=>l.drop(t)),onDragover:e[5]||(e[5]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:e[6]||(e[6]=(0,o.iM)((()=>{}),["prevent"]))},[(0,a._)("div",{class:(0,A.C_)({"folder clickable":!0,active:t.selectedEntity==s.folder}),onClick:e[3]||(e[3]=e=>t.explorerStore.selectedEntity=s.folder)},[s.depth>0?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"c-tree",style:(0,A.j5)({marginLeft:13*s.depth+"px"})},"├",4)):(0,a.kq)("",!0),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:1,src:At,class:"icon mx-1",alt:"",draggable:"",onDragstart:e[0]||(e[0]=t=>l.startDrag(t,s.folder))},null,32)):((0,a.wg)(),(0,a.iD)("input",{key:2,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(s.folder),onChange:e[1]||(e[1]=e=>t.explorerStore.toggleMultiselectionOf(s.folder))},null,40,ke)),(0,a._)("span",null,[(0,a.Uk)((0,A.zw)(s.folder.name||"Unnamed")+" ",1),(0,a._)("span",xe,"("+(0,A.zw)(l.totalCrafts)+")",1)]),!s.folder.parent||s.folder.isEmpty()||t.query?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:3,class:"px-2",onClick:e[2]||(e[2]=t=>l.toggleCollapse()),alt:"Toggle collapse"},[(0,a._)("img",{src:r(8278)(`./${l.effectiveCollapsed?"plus":"minus"}.svg`),class:"icon-sm",alt:""},null,8,Ee)]))],2),l.effectiveCollapsed?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.subfolders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.uuid},[(0,a.wy)((0,a.Wm)(c,{folder:e,depth:s.depth+1,query:t.query},null,8,["folder","depth","query"]),[[o.F8,!t.query||e.matchesQuery(t.query)]])])))),128)),s.folder.crafts?((0,a.wg)(),(0,a.iD)("table",Te,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.crafts,((e,r)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{key:e.uuid,class:(0,A.C_)({active:t.selectedEntity==e}),onClick:r=>t.explorerStore.selectedEntity=e},[(0,a._)("td",Se,[(0,a._)("span",{class:"c-tree",style:(0,A.j5)({marginLeft:13*(s.depth+1)+"px"})},(0,A.zw)(r==s.folder.crafts.length-1?"└":"├"),5),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:0,src:we,class:"clickable-icon",draggable:"",onDragstart:t=>l.startDrag(t,e),title:"Drag to move craft to a different folder",alt:""},null,40,Ie)):((0,a.wg)(),(0,a.iD)("input",{key:1,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(e),onChange:r=>t.explorerStore.toggleMultiselectionOf(e)},null,40,Ue)),(0,a._)("span",null,(0,A.zw)(e.name),1)]),(0,a._)("td",Oe,[e.private?((0,a.wg)(),(0,a.iD)("img",Fe)):((0,a.wg)(),(0,a.iD)("img",Je))]),(0,a._)("td",Be,[(0,a._)("span",Le,(0,A.zw)(e.item),1),e.color?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,A.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256)):(0,a.kq)("",!0)]),(0,a._)("td",Ae,[e.property?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Ne,(0,a.Uk)(" "+(0,A.zw)(e.property),1)],64)):((0,a.wg)(),(0,a.iD)("span",qe,"No property"))]),(0,a._)("td",Me,[e.lock?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[$e,(0,a.Uk)(" "+(0,A.zw)(e.lock.replace("Padlock","")),1)],64)):((0,a.wg)(),(0,a.iD)("span",Ze,"No lock"))]),(0,a._)("td",Pe,[(0,a.Uk)((0,A.zw)(e.type)+" ",1),e.type?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",je,"No position"))]),(0,a._)("td",ze,[null!=e.priority?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,A.zw)("number"==typeof e.priority?e.priority:"{...}"),1)],64)):((0,a.wg)(),(0,a.iD)("span",Re,"-"))]),(0,a._)("td",We,[(0,a.Uk)((0,A.zw)(e.description)+" ",1),e.description?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",He,"No description"))])],10,De)),[[o.F8,!t.query||e.matchesQuery(t.query)]]))),128))])])):(0,a.kq)("",!0)],64))],32)}var Ke={name:"Folder",props:{folder:Object,depth:Number},computed:{totalCrafts(){return this.folder.findAllCrafts().length},effectiveCollapsed(){return this.folder.collapsed&&!this.query},...L},methods:{startDrag(t,e){t.stopPropagation(),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",e.isFolder?t.dataTransfer.setData("folderUuid",e.uuid):t.dataTransfer.setData("craftUuid",e.uuid)},drop(t){t.stopPropagation();try{if(t.dataTransfer.getData("craftUuid")){const e=this.database.rootFolder.findCraft(t.dataTransfer.getData("craftUuid"));if(!e)throw"Couldn't find craft: "+t.dataTransfer.getData("craftUuid");this.database.moveCraft(e,this.folder)}else{const e=this.database.rootFolder.findFolder(t.dataTransfer.getData("folderUuid"));if(!e)throw"Couldn't find folder: "+t.dataTransfer.getData("folderUuid");this.database.moveFolder(e,this.folder),this.folder.collapsed=!1}}catch(e){if("MoveError"!=e.name)throw e;console.warn(e.message)}},toggleCollapse(){this.folder.collapsed=!this.folder.collapsed&&null!=this.folder.parent}}};const Ve=(0,Jt.Z)(Ke,[["render",Ge]]);var Ye=Ve,Qe={name:"Home",components:{Folder:Ye,CraftDetails:Lt,FolderDetails:ye},computed:{...L,maxCraftsExportableAsCommand(){return this.database.settings.overrideMaxCraftsExportableAsCommand||E.Z.defaultMaxCraftsExportable},tooManyMultiselected(){return this.multiselectionCrafts.length>this.maxCraftsExportableAsCommand}},methods:{handleCraftClick(t){this.selectedEntity=t},copyMultiselection(){try{window.navigator.clipboard.writeText(E.Z.convertCraftsToBCImportCommand(this.multiselectionCrafts,this.maxCraftsExportableAsCommand))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},pluralize:v._6},created(){this.explorerStore.findRepeatedCraftName()}};const Xe=(0,Jt.Z)(Qe,[["render",W]]);var tr=Xe,er=r(8076),rr=r(121);const or={class:"p-4"},sr=(0,a.uE)('<h1 class="mt-0"> What&#39;s this?</h1><p>A GUI to back up, organize, and edit items crafted in BC in a convenient way.</p><h1>Where&#39;s my data stored?</h1><p>In your browser&#39;s local storage. This means you should make regular backups (see Settings page).</p><h1>How do I import crafts from BC?</h1><p>There are currently two ways:</p><h2><img src="'+er+'" class="icon"> Importing a single craft (via FBC):</h2><ol><li>Open your crafted item in BC</li><li>Click the FBC &quot;Export&quot; button</li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h2><img src="'+er+'" class="icon"> Importing all your crafts at once (via console):</h2><ol><li>Open the browser console on BC</li><li>Copy the output of <code>JSON.stringify(Player.Crafting)</code></li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h1>How do I export crafts back to BC?</h1><p>There are currently two ways:</p><h2><img src="'+rr+'" class="icon"> Exporting a single craft (via FBC)</h2><ol><li>Select the craft and click &quot;Copy as export&quot; </li><li>Go to BC and open a new craft</li><li>Click the FBC &quot;Import&quot; button</li></ol><h2><img src="'+rr+'" class="icon"> Exporting many crafts at once (via console)</h2><img src="'+N+'" class="icon ml-4 mr-1"><span style="color:#d1b758;font-size:90%;">This replaces <u>all</u> your BC crafts.</span><ol><li>Select a folder to export and click &quot;Copy as command&quot;, or select multiple crafts/folders together and click &quot;Export&quot;</li><li>Open the browser console on BC</li><li>Paste the clipboard contents</li></ol>',18),ar=[sr];function ir(t,e,r,o,s,i){return(0,a.wg)(),(0,a.iD)("div",or,ar)}var nr={name:"About"};const lr=(0,Jt.Z)(nr,[["render",ir]]);var cr=lr;const dr={class:"p-4"},pr=(0,a._)("h1",{class:"mt-0"},"Settings",-1),ur={class:"d-block my-3"},fr=(0,a._)("img",{src:l,class:"icon help ml-1",title:"If checked, you will be prompted for confirmation every time you delete a craft."},null,-1),mr=(0,a._)("br",null,null,-1),hr={class:"d-block my-3"},gr=(0,a._)("img",{src:l,class:"icon help ml-1",title:"BC limits how many crafts you can have, so BCCM will prevent you from exporting more than that at once. You can override this limit here if you want. Leave as zero to use the default."},null,-1),_r=(0,a._)("br",null,null,-1),br=(0,a._)("h1",null,"Backup",-1),yr=(0,a._)("p",null,"Export your BCCM data as JSON. This will allow you to restore your data even if you clear your browser's storage.",-1),wr=(0,a._)("img",{src:rr},null,-1),Cr=(0,a._)("img",{src:V},null,-1),vr=(0,a._)("h1",null,"Restore",-1),kr=(0,a._)("p",null,"Restore a BCCM JSON backup. This will replace all current data.",-1),xr=(0,a._)("img",{src:er},null,-1),Er=(0,a._)("img",{src:c},null,-1),Tr=(0,a._)("h1",null,"Export",-1),Dr=(0,a._)("p",null,"Generate a CSV export you can open as a human-friendly spreadsheet.",-1),Sr=(0,a._)("img",{src:rr},null,-1),Ir=(0,a._)("img",{src:V},null,-1),Ur=(0,a._)("h1",null,"Reset",-1),Or=(0,a._)("p",null,"Delete all crafts and user data.",-1),Fr=(0,a._)("img",{src:tt},null,-1),Jr=(0,a._)("h1",null,"More",-1),Br=(0,a._)("img",{src:n,class:"icon"},null,-1);function Lr(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",dr,[pr,(0,a._)("label",null,[(0,a._)("label",ur,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=e=>t.database.settings.confirmCraftDeletion=e),onChange:e[1]||(e[1]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,t.database.settings.confirmCraftDeletion]]),(0,a.Uk)(" Confirm before deleting crafts "),fr,mr]),(0,a._)("label",hr,[(0,a.Uk)(" Override export limit: "),gr,_r,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=e=>t.database.settings.overrideMaxCraftsExportableAsCommand=e),class:"mt-1",min:"0",max:"999",onChange:e[3]||(e[3]=e=>t.database.saveToLocalStorageWithDebounce())},null,544),[[o.nr,t.database.settings.overrideMaxCraftsExportableAsCommand]])])]),br,yr,(0,a._)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...t)=>n.downloadBackup&&n.downloadBackup(...t))},[wr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>n.backupToClipboard&&n.backupToClipboard(...t))},[Cr,(0,a.Uk)(" Copy to clipboard")]),vr,kr,(0,a._)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=e=>t.$refs.uploader.click())},[xr,(0,a.Uk)("Load from file")]),(0,a._)("input",{ref:"uploader",type:"file",onChange:e[7]||(e[7]=(...t)=>n.handleFileSelect&&n.handleFileSelect(...t)),accept:".json",style:{display:"none"}},null,544),(0,a._)("button",{class:"btn btn-primary",onClick:e[8]||(e[8]=(...t)=>n.restoreFromClipboard&&n.restoreFromClipboard(...t))},[Er,(0,a.Uk)(" Load from clipboard")]),Tr,Dr,(0,a._)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>n.downloadCsvExport&&n.downloadCsvExport(...t))},[Sr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[10]||(e[10]=(...t)=>n.copyCsvExportToClipboard&&n.copyCsvExportToClipboard(...t))},[Ir,(0,a.Uk)(" Copy to clipboard")]),Ur,Or,(0,a._)("button",{class:"btn btn-danger",onClick:e[11]||(e[11]=(...t)=>n.resetDatabase&&n.resetDatabase(...t))},[Fr,(0,a.Uk)("Delete database")]),Jr,(0,a._)("button",{class:"btn btn-primary",onClick:e[12]||(e[12]=e=>t.$emit("goTo","lztester"))},[Br,(0,a.Uk)(" LZString decoder")])])}var Ar={name:"Settings",computed:{...L},methods:{backupToClipboard(){navigator.clipboard.writeText(this.database.serialize()),this.alertStore.alert("Copied to clipboard.","success")},downloadBackup(){(0,v.kG)(this.database.serialize(),`BCCMBackup-${(new Date).toISOString().split("T")[0]}.json`)},restoreFromClipboard(){(0,v.Xi)().then(this.importDatabase)},handleFileSelect(t){(0,v.pJ)(t.target.files[0]).then((t=>this.importDatabase(t.join(""))))},importDatabase(t){try{this.database.deserialize(t),this.database.saveToLocalStorage(),this.$emit("goTo","home"),this.alertStore.alert(`Loaded database with ${this.database.findCraftCount()} crafts.`,"success")}catch(e){this.alertStore.alert(e.message)}},copyCsvExportToClipboard(){navigator.clipboard.writeText(this.getDatabaseCsv())},downloadCsvExport(){(0,v.kG)(this.getDatabaseCsv(),`crafts-${(new Date).toISOString().split("T")[0]}.csv`)},getDatabaseCsv(){return(0,v.Sk)([["Name","Item","Private","Property","Lock","Type","Color","Description","Folder","Export"]].concat(this.database.rootFolder.findAllCrafts().map((t=>[t.name,t.item,t.private,t.property,t.lock,t.type||"",t.color,t.description,t.parent.getAncestry().slice(1).map((t=>t.name)).join("."),t.toCompressedBCJson()]))))},resetDatabase(){confirm("Are you sure you want to delete all your data?")&&(this.database.reset(),this.explorerStore.selectedEntity=null,this.$emit("goTo","home"))}}};const Nr=(0,Jt.Z)(Ar,[["render",Lr]]);var qr=Nr;const Mr={class:"p-4"},$r=(0,a._)("h1",{class:"mt-0"},[(0,a._)("img",{src:n,class:"mr-1",alt:"",style:{height:"18px","vertical-align":"bottom"}}),(0,a.Uk)(" LZString decoder "),(0,a._)("img",{src:l,class:"icon help ml-1",title:"Decode a compressed Base64 string into a JSON. This is just an extra tool for testing purposes."})],-1),Zr=(0,a._)("p",null,"Input:",-1),Pr=(0,a._)("p",null,"Output:",-1);function jr(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",Mr,[$r,Zr,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.input=e),rows:"4",class:"w-100"},null,512),[[o.nr,t.input]]),Pr,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.output=t),rows:"20",class:"w-100",readonly:""},null,512),[[o.nr,n.output]])])}var zr=r(7840),Rr=r.n(zr),Wr={name:"LZStringTester",data:()=>({input:""}),computed:{output(){const t=Rr().decompressFromBase64(this.input);return t?JSON.stringify(JSON.parse(t),null,2):"No valid input detected."}}};const Hr=(0,Jt.Z)(Wr,[["render",jr]]);var Gr=Hr,Kr=r(5559);const Vr={key:0,src:Kr,class:"alert-icon"},Yr={key:1,src:Q,class:"alert-icon"};function Qr(t,e,r,o,s,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,A.C_)(`floating-alert ${i.type}`),onClick:e[0]||(e[0]=(...t)=>i.clearAlert&&i.clearAlert(...t))},["error"==i.type?((0,a.wg)(),(0,a.iD)("img",Vr)):(0,a.kq)("",!0),"success"==i.type?((0,a.wg)(),(0,a.iD)("img",Yr)):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,A.zw)(i.message),1)],2)}var Xr={name:"Alert",computed:{message(){return this.alertStore.message},type(){return this.alertStore.type},...(0,s.Kc)(k)},methods:{clearAlert(){this.alertStore.alert(null)}}};const to=(0,Jt.Z)(Xr,[["render",Qr]]);var eo=to,ro={name:"App",components:{Alert:eo,Explorer:tr,Settings:qr,About:cr,LZStringTester:Gr},data:()=>({page:"home",queryField:""}),computed:{...L},methods:{goTo(t){this.page=t},loadFromClipboard(){(0,v.Xi)().then((t=>{if(t)try{const e=this.database.importCrafts(t);console.log(`Imported ${e.new+e.edited}/${e.total} crafts (${e.new} new, ${e.edited} edited, ${e.failed} failed)`),e.failed>0?1==e.total?this.alertStore.alert("Could not load the craft, see console for details."):this.alertStore.alert(`Could not load ${e.failed} out of ${e.total} ${(0,v._6)("craft",e.total)}, see console for details.`):0==e.edited?this.alertStore.alert(`Added ${e.new} new ${(0,v._6)("craft",e.new)}.`,"success"):this.alertStore.alert(0==e.new?`Updated ${e.edited} ${(0,v._6)("craft",e.edited)}.`:`Added ${e.new} new ${(0,v._6)("craft",e.new)}, and updated ${e.edited}.`,"success")}catch(e){this.alertStore.alert("Couldn't parse clipboard data, see console for details."),console.error(e)}else this.alertStore.alert("Clipboard is empty.")}))},updateQuery(){this.explorerStore.query=this.queryField.toLowerCase()}},created(){this.updateQuery=(0,v.Ds)(this.updateQuery,200)}};const oo=(0,Jt.Z)(ro,[["render",C]]);var so=oo;const ao=(0,s.WB)(),io=(0,o.ri)(so);window.app=so,io.use(ao),io.mount("#app")},2186:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});var o=r(2482),s=r(9708),a=r(3313),i=r(8780);class n{constructor(){(0,o.Z)(this,"uuid",null),(0,o.Z)(this,"parent",null),(0,o.Z)(this,"item",null),(0,o.Z)(this,"property",null),(0,o.Z)(this,"lock",null),(0,o.Z)(this,"name",null),(0,o.Z)(this,"description",null),(0,o.Z)(this,"color",null),(0,o.Z)(this,"private",null),(0,o.Z)(this,"type",null),(0,o.Z)(this,"priority",null)}static fromJson(t,e=null){if(!t)throw"Missing argument";const r=new n;return r.uuid=t.uuid,r.parent=e,r.item=t.item,r.property=t.property,r.lock=t.lock,r.name=t.name,r.description=t.description,r.color=t.color,r.private=1==t.private,r.type=t.type,r.priority=t.priority,r}toJson(){return{uuid:this.uuid,item:this.item,property:this.property,lock:this.lock,name:this.name,description:this.description,color:this.color,private:this.private,type:this.type,priority:this.priority}}validate(){(0,i.p)(this,"uuid","string"),(0,i.p)(this,"parent","object"),(0,i.p)(this,"item","string"),(0,i.p)(this,"property","string",!1),(0,i.p)(this,"lock","string",!1),(0,i.p)(this,"name","string"),(0,i.p)(this,"description","string",!1),(0,i.p)(this,"color","string",!1),(0,i.p)(this,"private","boolean"),(0,i.p)(this,"type","string",!1),(0,i.h)(null===this.priority||Number.isInteger(this.priority)||"object"==typeof this.priority,"Priority must be an integer or an object."),(0,i.h)(this.name.length>0&&this.name.length<=n.NAME_MAX_LENGTH,`Name must be between 1 and ${n.NAME_MAX_LENGTH} characters.`),(0,i.h)(this.name.length<=n.DESCR_MAX_LENGTH,`Description must be under ${n.DESCR_MAX_LENGTH} characters.`)}move(t){const e=this.parent.crafts.indexOf(this);if(-1==e)throw"Could not find craft";"down"==t&&e<this.parent.crafts.length-1?(0,a.LF)(this.parent.crafts,e,e+1):"up"==t&&e>0?(0,a.LF)(this.parent.crafts,e,e-1):console.warn(`Cannot move craft ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.item.toLowerCase().includes(t)}static fromCompressedBCJson(t){return s.Z.convertCompressedBCJsonToCraft(t)}static fromBCJson(t){return s.Z.convertBCJsonToCraft(t)}toBCJson(){return s.Z.convertCraftToBCJson(this)}toCompressedBCJson(){return s.Z.convertCraftToCompressedBCJson(this)}}(0,o.Z)(n,"NAME_MAX_LENGTH",30),(0,o.Z)(n,"DESCR_MAX_LENGTH",200)},9459:function(t,e,r){"use strict";r.d(e,{Z:function(){return i}});var o=r(2482),s=r(7840),a=r.n(s);class i{static convertCraftsToBCImportCommand(t,e=0){if(!t)throw"No crafts to encode.";const r=e||this.defaultMaxCraftsExportable;if(t.length>r)throw new n(r);const o=a().compressToBase64(JSON.stringify(t.map((t=>t.toBCJson()))));return`CraftingLoadServer(JSON.parse(LZString.decompressFromBase64("${o}")))`}static convertBCImportCommandToBCCraftJSONs(t){if(!t)throw"No data to deserialize.";if(t=t.match(/decompressFromBase64\(["'`](.*?)["'`]\)/)[1],!t)throw"Failed to extract data from CraftingLoadServer command via regex.";return JSON.parse(a().decompressFromBase64(t))}}(0,o.Z)(i,"defaultMaxCraftsExportable",80);class n extends Error{constructor(t){super(`Cannot export more than ${t} crafts at once.`),this.name="ExportLimitError"}}},9708:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});var o=r(7840),s=r.n(o),a=r(2186),i=r(3313);class n{static convertCraftToBCJson(t){return{Item:t.item,Property:t.property,Lock:t.lock,Name:t.name,Description:t.description,Color:t.color,Private:t.private,Type:t.type,ItemProperty:null===t.priority?void 0:{OverridePriority:t.priority}}}static convertCraftToCompressedBCJson(t){return s().compressToBase64(JSON.stringify(t.toBCJson()))}static convertCraftsToCompressedBCJsons(t){return s().compressToBase64(JSON.stringify(t.map((t=>t.toBCJson()))))}static convertBCJsonToCraft(t){const e=new a.Z;return e.uuid=(0,i.Rl)(),e.item=t.Item,e.property=t.Property,e.lock=t.Lock,e.name=t.Name,e.description=t.Description,e.color=t.Color,e.private=1==t.Private,e.type=t.Type,e.priority=void 0===t.ItemProperty?.OverridePriority?null:t.ItemProperty.OverridePriority,e}static convertCompressedBCJsonToCraft(t){return this.convertBCJsonToCraft(JSON.parse(s().decompressFromBase64(t)))}}},6943:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Importer}});var lz_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7840),lz_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lz_string__WEBPACK_IMPORTED_MODULE_0__),_models_craft_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2186),_util_formats_bcImportCommandFormat_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9459),_util_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3313);class Importer{static convertStringToCrafts(stringToImport){if(stringToImport=(stringToImport||"").trim(),!stringToImport)throw new ImportError(stringToImport,null,"No data to import.");let parsedJson=null;if(stringToImport.match(/^['"`]/)&&stringToImport.match(/['"`]$/))try{stringToImport=eval(stringToImport)}catch(e){throw new ImportError(stringToImport,"string",e)}if(stringToImport.match(/^[a-zA-Z0-9+/=]+$/))try{parsedJson=JSON.parse(lz_string__WEBPACK_IMPORTED_MODULE_0___default().decompressFromBase64(stringToImport))}catch(e){throw new ImportError(stringToImport,"base64",e)}else if(stringToImport.startsWith("CraftingLoadServer("))try{parsedJson=_util_formats_bcImportCommandFormat_js__WEBPACK_IMPORTED_MODULE_2__.Z.convertBCImportCommandToBCCraftJSONs(stringToImport)}catch(e){throw new ImportError(stringToImport,"Import command",e)}else{if("{"!=stringToImport[0]&&"["!=stringToImport[0])throw new ImportError(stringToImport,null,"The provided data does not appear to match any supported format.");try{parsedJson=JSON.parse(stringToImport)}catch(e){throw new ImportError(stringToImport,"JSON",`The provided text is not valid JSON: "${stringToImport.length>10?`${stringToImport.substr(0,9)}...`:stringToImport}"`)}}if(parsedJson.version&&parsedJson.rootFolder)throw new ImportError(stringToImport,null,"This is a full database backup, please use the backup restoring feature on the Settings page to restore this data.");Array.isArray(parsedJson)||(parsedJson=[parsedJson]);try{return parsedJson.filter((t=>null!=t)).map((t=>_models_craft_js__WEBPACK_IMPORTED_MODULE_1__.Z.fromBCJson(t)))}catch(e){throw new ImportError(stringToImport,null,e)}}}class ImportError extends Error{constructor(t,e,r){super(e?`An error occurred when attempting to process the data "${(0,_util_util_js__WEBPACK_IMPORTED_MODULE_3__.fk)(t,20)}" as ${e}: ${r}`:`An error occurred when attempting to process the data "${(0,_util_util_js__WEBPACK_IMPORTED_MODULE_3__.fk)(t,20)}": ${r}`),this.name="ImportError"}}},3313:function(t,e,r){"use strict";r.d(e,{Ds:function(){return c},El:function(){return u},LF:function(){return l},Rl:function(){return o},Sk:function(){return n},Xi:function(){return s},_6:function(){return d},fk:function(){return p},kG:function(){return a},pJ:function(){return i}});r(3408),r(4590);function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function s(){return new Promise((t=>{navigator.clipboard.readText?navigator.clipboard.readText().then((e=>t(e))):t(prompt("Paste your text below:"))}))}function a(t,e="download"){const r=new Blob([t],{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function i(t){return new Promise((function(e){const r=new FileReader;r.onload=()=>{e(r.result.split("\n"))},r.readAsText(t)}))}function n(t){return t.map((t=>t.map(String).map((t=>t.replaceAll('"','""'))).map((t=>`"${t}"`)).join(","))).join("\r\n")}function l(t,e,r){if(e==r)return;const o=t[e];t[e]=t[r],t[r]=o}function c(t,e=300){let r;return(...o)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(this,o)}),e)}}function d(t,e,r=null){return 1==e?t:r||t+"s"}function p(t,e){return t.length<=e?t:t.substring(0,e-3)+"..."}function u(t,e="name"){for(let r in t){const o=t[r];let s=o[e];while(![-1,parseInt(r)].includes(t.findIndex((t=>t[e]==s)))){const t=s.match(/^(.*) \((\d+)\)$/);s=t?`${t[1]} (${parseInt(t[2])+1})`:`${s} (2)`}o[e]=s}}},8780:function(t,e,r){"use strict";function o(t,e){if(!t)throw new a(e)}function s(t,e,r,o=!0){if(void 0==t[e]||null==t[e]){if(!o)return;throw console.log(t),new a(`Attribute is missing: "${e}".`)}if(typeof t[e]!=r)throw console.log(t),new a(`Error on attribute "${e}": expected ${r} but got ${typeof t[e]}`)}r.d(e,{h:function(){return o},p:function(){return s}});class a extends Error{constructor(t){super(t),this.name="InvalidCraftError"}}},8278:function(t,e,r){var o={"./about.svg":833,"./arrow-down.svg":8688,"./arrow-ne.svg":8894,"./arrow-up.svg":5362,"./check.svg":4443,"./clip-read.svg":2449,"./clip-write.svg":6240,"./cog.svg":9847,"./craft.svg":7100,"./cross.svg":5166,"./drag.svg":4652,"./error.svg":5559,"./folder.svg":3735,"./github.svg":2905,"./load.svg":8076,"./lock.svg":4485,"./logo.svg":5522,"./minus.svg":275,"./plus.svg":4355,"./private.svg":3254,"./public.svg":3210,"./save.svg":121,"./star.svg":6338,"./trash.svg":5588,"./visibility.svg":2165,"./warn.svg":8167};function s(t){var e=a(t);return r(e)}function a(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}s.keys=function(){return Object.keys(o)},s.resolve=a,t.exports=s,s.id=8278},833:function(t,e,r){"use strict";t.exports=r.p+"img/about.b9065e51.svg"},8688:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-down.1cf83ab8.svg"},8894:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-ne.e7788b52.svg"},5362:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-up.fb3b820b.svg"},4443:function(t,e,r){"use strict";t.exports=r.p+"img/check.c1759961.svg"},2449:function(t,e,r){"use strict";t.exports=r.p+"img/clip-read.12962e4f.svg"},6240:function(t,e,r){"use strict";t.exports=r.p+"img/clip-write.630c71d8.svg"},9847:function(t,e,r){"use strict";t.exports=r.p+"img/cog.11fa8f2d.svg"},7100:function(t,e,r){"use strict";t.exports=r.p+"img/craft.cb62eadc.svg"},5166:function(t,e,r){"use strict";t.exports=r.p+"img/cross.047dc357.svg"},4652:function(t,e,r){"use strict";t.exports=r.p+"img/drag.cc380d7e.svg"},5559:function(t,e,r){"use strict";t.exports=r.p+"img/error.8eb4b7fb.svg"},3735:function(t,e,r){"use strict";t.exports=r.p+"img/folder.4c905663.svg"},2905:function(t,e,r){"use strict";t.exports=r.p+"img/github.4fe90b8f.svg"},8076:function(t,e,r){"use strict";t.exports=r.p+"img/load.aed85cb8.svg"},4485:function(t,e,r){"use strict";t.exports=r.p+"img/lock.f44b2e25.svg"},5522:function(t,e,r){"use strict";t.exports=r.p+"img/logo.08a29e38.svg"},275:function(t,e,r){"use strict";t.exports=r.p+"img/minus.5e739917.svg"},4355:function(t,e,r){"use strict";t.exports=r.p+"img/plus.2d1d194c.svg"},3254:function(t,e,r){"use strict";t.exports=r.p+"img/private.54e41622.svg"},3210:function(t,e,r){"use strict";t.exports=r.p+"img/public.749147b3.svg"},121:function(t,e,r){"use strict";t.exports=r.p+"img/save.e2a4a06f.svg"},6338:function(t,e,r){"use strict";t.exports=r.p+"img/star.35ce245d.svg"},5588:function(t,e,r){"use strict";t.exports=r.p+"img/trash.331d8fc4.svg"},2165:function(t,e,r){"use strict";t.exports=r.p+"img/visibility.8e7adac8.svg"},8167:function(t,e,r){"use strict";t.exports=r.p+"img/warn.a9a4355b.svg"}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,function(){var t=[];__webpack_require__.O=function(e,r,o,s){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],o=t[c][1],s=t[c][2];for(var i=!0,n=0;n<r.length;n++)(!1&s||a>=s)&&Object.keys(__webpack_require__.O).every((function(t){return __webpack_require__.O[t](r[n])}))?r.splice(n--,1):(i=!1,s<a&&(a=s));if(i){t.splice(c--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,o,s]}}(),function(){__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return __webpack_require__.d(e,{a:e}),e}}(),function(){__webpack_require__.d=function(t,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){__webpack_require__.p="/bccm/"}(),function(){var t={143:0};__webpack_require__.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,a=r[0],i=r[1],n=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)__webpack_require__.o(i,o)&&(__webpack_require__.m[o]=i[o]);if(n)var c=n(__webpack_require__)}for(e&&e(r);l<a.length;l++)s=a[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return __webpack_require__.O(c)},r=self["webpackChunkbccm"]=self["webpackChunkbccm"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(7628)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.41d89854.js.map