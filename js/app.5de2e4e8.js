(function(){var t={6432:function(t,e,r){"use strict";var o=r(9242),s=r(1020),a=r(3396),l=r(7100),i=r(9847),n=r(833),c=r(2449),d=r(2905);const p={class:"d-flex justify-content-between"},u={class:"d-flex"},f=(0,a._)("img",{src:l,id:"logo",alt:""},null,-1),m=(0,a._)("span",{id:"name"},"BC Crafts Manager",-1),h=[f,m],g=(0,a._)("img",{src:i,class:"mr-1",alt:""},null,-1),b=(0,a._)("img",{src:n,class:"mr-1",alt:""},null,-1),y=(0,a._)("img",{src:c,alt:""},null,-1),C=(0,a._)("a",{href:"https://github.com/capyfied/bccm",title:"GitHub",target:"_blank"},[(0,a._)("img",{src:d,id:"github",class:"mx-2",alt:""})],-1),v={class:"container-fluid"};function w(t,e,r,s,l,i){const n=(0,a.up)("Alert"),c=(0,a.up)("Explorer"),d=(0,a.up)("About"),f=(0,a.up)("Settings");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",p,[(0,a._)("div",u,[(0,a._)("span",{id:"main-link",class:"menu-link",onClick:e[0]||(e[0]=e=>t.page="home")},h),(0,a._)("span",{class:"menu-link",onClick:e[1]||(e[1]=e=>t.page="settings")},[g,(0,a.Uk)(" Settings")]),(0,a._)("span",{class:"menu-link",onClick:e[2]||(e[2]=e=>t.page="about")},[b,(0,a.Uk)(" Help")])]),"home"==t.page?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.queryField=e),id:"query",class:"mx-3",onInput:e[4]||(e[4]=t=>i.updateQuery()),placeholder:"Filter items..."},null,544)),[[o.nr,t.queryField]]):(0,a.kq)("",!0),(0,a._)("span",null,[(0,a._)("button",{class:"btn btn-success",onClick:e[5]||(e[5]=t=>i.loadFromClipboard()),style:{height:"28px","margin-top":"3px"}},[y,(0,a.Uk)(" Load from clipboard ")]),C])]),(0,a._)("main",v,[(0,a.Wm)(n),"home"==t.page?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0),"about"==t.page?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),"settings"==t.page?((0,a.wg)(),(0,a.j4)(f,{key:2,onGoTo:i.goTo},null,8,["onGoTo"])):(0,a.kq)("",!0)])],64)}r(3408),r(4590);function k(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function _(){return new Promise((t=>{navigator.clipboard.readText?navigator.clipboard.readText().then((e=>t(e))):t(prompt("Paste your text below:"))}))}function x(t,e="download"){const r=new Blob([t],{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function S(t){return new Promise((function(e){const r=new FileReader;r.onload=()=>{e(r.result.split("\n"))},r.readAsText(t)}))}function T(t){return t.map((t=>t.map(String).map((t=>t.replaceAll('"','""'))).map((t=>`"${t}"`)).join(","))).join("\r\n")}function D(t,e,r){if(e==r)return;const o=t[e];t[e]=t[r],t[r]=o}function E(t,e=300){let r;return(...o)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(this,o)}),e)}}function F(t,e,r=null){return 1==e?t:r||t+"s"}function N(t,e){return t.length<=e?t:t.substring(0,e-3)+"..."}function U(t,e="name"){for(let r in t){const o=t[r];let s=o[e];while(![-1,parseInt(r)].includes(t.findIndex((t=>t[e]==s)))){const t=s.match(/^(.*) \((\d+)\)$/);s=t?`${t[1]} (${parseInt(t[2])+1})`:`${s} (2)`}o[e]=s}}const B=(0,s.Q_)("alert",{state:()=>({message:null,type:null,dismissalTimeout:null}),actions:{alert(t,e="error"){if(t){let r;"error"==e?(r=1e4,console.error(t)):r=5e3,clearTimeout(this.dismissalTimeout),this.message=t,this.type=e,this.dismissalTimeout=setTimeout((()=>{this.alert(null)}),r)}else this.message=null,this.type=null}}});r(7658);var L=r(2482),J=r(7840),O=r.n(J);class A{static convertCraftsToBCImportCommand(t){const e=this.convertBCCraftJSONsToBCDataString(t.map((t=>t.toBCJson())));return`CraftingLoadServer("${e.replace(/"/g,'\\"')}")`}static convertBCCraftJSONsToBCDataString(t){if(!t)throw"No crafts to encode.";if(t.length>this.maxCraftsExportable)throw new $;let e="";for(let r of t)null!=r&&null!=r.Item&&""!=r.Item?(e=e+r.Item+"¶",e=e+(null==r.Property?"":r.Property)+"¶",e=e+(null==r.Lock?"":r.Lock)+"¶",e=e+(null==r.Name?"":r.Name.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.Description?"":r.Description.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.Color?"":r.Color.replace("¶"," ").replace("§"," "))+"¶",e=e+(null!=r.Private&&r.Private?"T":"")+"¶",e=e+(null==r.Type?"":r.Type.replace("¶"," ").replace("§"," "))+"¶",e=e+(null==r.OverridePriority?"":r.OverridePriority.toString())+"§"):e+="§";while(e.length>=1&&"§"==e.substring(e.length-1))e=e.substring(0,e.length-1);return O().compressToUTF16(e)}static convertBCDataStringToBCCraftJSONs(t){if(!t)throw"No data to deserialize.";if(t.startsWith("CraftingLoadServer")&&(t=t.match(/CraftingLoadServer\(["'`](.*?)["'`]\)/)[1],!t))throw"Failed to extract data from CraftingLoadServer command via regex.";const e=O().decompressFromUTF16(t),r=[],o=e.split("§");for(let s=0;s<o.length;s++){const t=o[s].split("¶"),a={};if(a.Item=t.length>=1?t[0]:"",a.Property=t.length>=2?t[1]:"",a.Lock=t.length>=3?t[2]:"",a.Name=t.length>=4?t[3]:"",a.Description=t.length>=5?t[4]:"",a.Color=t.length>=6?t[5]:"",a.Private=t.length>=7&&"T"==t[6],a.Type=t.length>=8&&t[7]||null,a.OverridePriority=t.length>=9&&""!==t[8]?Number.parseInt(t[8]):null,!a.Item||!a.Name||""==a.Item||""==a.Name)throw`Invalid craft found: ${JSON.stringify(a)}, deserialized from line "${o[s]}" of "${e}"`;r.push(a)}return r}}(0,L.Z)(A,"maxCraftsExportable",40);class $ extends Error{constructor(){super(`Cannot export more than ${A.maxCraftsExportable} crafts at once.`),this.name="ExportLimitError"}}class q{static convertCraftToBCJson(t){return{Item:t.item,Property:t.property,Lock:t.lock,Name:t.name,Description:t.description,Color:t.color,Private:t.private,Type:t.type,OverridePriority:t.priority}}static convertCraftToCompressedBCJson(t){return O().compressToBase64(JSON.stringify(t.toBCJson()))}static convertCraftsToCompressedBCJsons(t){return O().compressToBase64(JSON.stringify(t.map((t=>t.toBCJson()))))}static convertBCJsonToCraft(t){const e=new P;return e.uuid=k(),e.item=t.Item,e.property=t.Property,e.lock=t.Lock,e.name=t.Name,e.description=t.Description,e.color=t.Color,e.private=1==t.Private,e.type=t.Type,e.priority=Number.isInteger(t.OverridePriority)?t.OverridePriority:null,e}static convertCompressedBCJsonToCraft(t){return this.convertBCJsonToCraft(JSON.parse(O().decompressFromBase64(t)))}}function I(t,e){if(!t)throw new z(e)}function M(t,e,r,o=!0){if(void 0==t[e]||null==t[e]){if(!o)return;throw console.log(t),new z(`Attribute is missing: "${e}".`)}if(typeof t[e]!=r)throw console.log(t),new z(`Error on attribute "${e}": expected ${r} but got ${typeof t[e]}`)}class z extends Error{constructor(t){super(t),this.name="InvalidCraftError"}}class P{constructor(){(0,L.Z)(this,"uuid",null),(0,L.Z)(this,"parent",null),(0,L.Z)(this,"item",null),(0,L.Z)(this,"property",null),(0,L.Z)(this,"lock",null),(0,L.Z)(this,"name",null),(0,L.Z)(this,"description",null),(0,L.Z)(this,"color",null),(0,L.Z)(this,"private",null),(0,L.Z)(this,"type",null)}static fromJson(t,e=null){if(!t)throw"Missing argument";const r=new P;return r.uuid=t.uuid,r.parent=e,r.item=t.item,r.property=t.property,r.lock=t.lock,r.name=t.name,r.description=t.description,r.color=t.color,r.private=1==t.private,r.type=t.type,r.priority=t.priority,r}toJson(){return{uuid:this.uuid,item:this.item,property:this.property,lock:this.lock,name:this.name,description:this.description,color:this.color,private:this.private,type:this.type,priority:this.priority}}validate(){M(this,"uuid","string"),M(this,"parent","object"),M(this,"item","string"),M(this,"property","string",!1),M(this,"lock","string",!1),M(this,"name","string"),M(this,"description","string",!1),M(this,"color","string",!1),M(this,"private","boolean"),M(this,"type","string",!1),M(this,"priority","number",!1),I(null===this.priority||Number.isInteger(this.priority),"Priority must be an integer."),I(this.name.length>0&&this.name.length<=P.NAME_MAX_LENGTH,`Name must be between 1 and ${P.NAME_MAX_LENGTH} characters.`),I(this.name.length<=P.DESCR_MAX_LENGTH,`Description must be under ${P.DESCR_MAX_LENGTH} characters.`)}move(t){const e=this.parent.crafts.indexOf(this);if(-1==e)throw"Could not find craft";"down"==t&&e<this.parent.crafts.length-1?D(this.parent.crafts,e,e+1):"up"==t&&e>0?D(this.parent.crafts,e,e-1):console.warn(`Cannot move craft ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.item.toLowerCase().includes(t)}static fromCompressedBCJson(t){return q.convertCompressedBCJsonToCraft(t)}static fromBCJson(t){return q.convertBCJsonToCraft(t)}toBCJson(){return q.convertCraftToBCJson(this)}toCompressedBCJson(){return q.convertCraftToCompressedBCJson(this)}}(0,L.Z)(P,"NAME_MAX_LENGTH",30),(0,L.Z)(P,"DESCR_MAX_LENGTH",100);class Z{constructor(t,e){(0,L.Z)(this,"uuid",null),(0,L.Z)(this,"name",null),(0,L.Z)(this,"parent",null),(0,L.Z)(this,"subfolders",null),(0,L.Z)(this,"crafts",null),(0,L.Z)(this,"collapsed",null),(0,L.Z)(this,"isFolder",!0),this.uuid=k(),this.name=t,this.parent=e,this.subfolders=[],this.crafts=[],this.collapsed=!1}findAllCrafts(){return this.crafts.concat(...this.subfolders.map((t=>t.findAllCrafts())))}findCraft(t){let e=this.crafts.find((e=>e.uuid==t));if(e)return e;for(let r of this.subfolders)if(e=r.findCraft(t),e)return e;return!1}findFolder(t){return this.uuid==t?this:this.subfolders.reduce(((e,r)=>e||r.findFolder(t)),null)}toJson(){return{uuid:this.uuid,name:this.name,subfolders:this.subfolders.map((t=>t.toJson())),crafts:this.crafts.map((t=>t.toJson())),collapsed:this.collapsed}}isEmpty(){return 0==this.crafts.length&&0==this.subfolders.length}isWithin(t){return t==this||!!this.parent&&this.parent.isWithin(t)}getAncestry(){return this.parent?this.parent.getAncestry().concat([this]):[this]}static fromJson(t,e=null){const r=new Z;return r.uuid=t.uuid,r.name=t.name,r.parent=e,r.subfolders=t.subfolders.map((t=>Z.fromJson(t,r))),r.crafts=t.crafts.map((t=>P.fromJson(t,r))),r.collapsed=t.collapsed,r}toBCImportCommand(){return A.convertCraftsToBCImportCommand(this.findAllCrafts())}move(t){const e=this.parent.subfolders.indexOf(this);if(-1==e)throw"Could not find subfolder";"down"==t&&e<this.parent.subfolders.length-1?D(this.parent.subfolders,e,e+1):"up"==t&&e>0?D(this.parent.subfolders,e,e-1):console.warn(`Cannot move folder ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.crafts.some((e=>e.matchesQuery(t)))||this.subfolders.some((e=>e.matchesQuery(t)))}}class j{constructor(){this.loadJson(j.DEFAULT_SETTINGS)}static fromJson(t){const e=new j;return e.loadJson(t),e}loadJson(t){"string"==typeof t&&(t=JSON.parse(t));const e=j.DEFAULT_SETTINGS;for(let r of j.KEYS)void 0!==t[r]?this[r]=t[r]:(console.warn(`Missing field '${r}' in loaded settings, using default.`),this[r]=e[r]);this.validate()}toJson(){const t={};return j.KEYS.forEach((e=>{t[e]=this[e]})),t}validate(){M(this,"confirmCraftDeletion","boolean")}}(0,L.Z)(j,"DEFAULT_SETTINGS",{confirmCraftDeletion:!0}),(0,L.Z)(j,"KEYS",Object.keys(j.DEFAULT_SETTINGS));class H{static convertStringToCrafts(t){if(t=(t||"").trim().replace(/^["']/,"").replace(/["']$/,""),!t)throw new R(t,null,"No data to import.");let e=null;if(t.match(/^[a-zA-Z0-9+/=]+$/))try{e=JSON.parse(O().decompressFromBase64(t))}catch(r){throw new R(t,"base64",r)}else if(t.startsWith("CraftingLoadServer("))try{e=A.convertBCDataStringToBCCraftJSONs(t)}catch(r){throw new R(t,"CraftingLoadServer command",r)}else{if("{"!=t[0]&&"["!=t[0])throw new R(t,null,"The provided data does not appear to match any supported format.");try{e=JSON.parse(t)}catch(r){throw new R(t,"JSON",`The provided text is not valid JSON: "${t.length>10?`${t.substr(0,9)}...`:t}"`)}}if(e.version&&e.rootFolder)throw new R(t,null,"This is a full database backup, please use the backup restoring feature on the Settings page to restore this data.");Array.isArray(e)||(e=[e]);try{return e.map((t=>P.fromBCJson(t)))}catch(r){throw new R(t,null,r)}}}class R extends Error{constructor(t,e,r){super(e?`An error occurred when attempting to process the data "${N(t,20)}" as ${e}: ${r}`:`An error occurred when attempting to process the data "${N(t,20)}": ${r}`),this.name="ImportError"}}class G{constructor(){if((0,L.Z)(this,"rootFolder",null),(0,L.Z)(this,"settings",null),this.saveToLocalStorageWithDebounce=E((()=>this.saveToLocalStorage()),1e3),window.localStorage.database)try{this.deserialize(window.localStorage.database)}catch(t){window.localStorage.failed=window.localStorage.database,console.error(`Error loading saved database: ${t.message}. Copying old database to localStorage.failed and resetting.`),this.reset()}else this.reset()}reset(){this.rootFolder=new Z("Crafted items"),this.settings=new j,this.saveToLocalStorage()}addCrafts(t){let e={new:0,edited:0,failed:0};const r=this.rootFolder.findAllCrafts();U(t);for(let s of t){try{s.parent=this.rootFolder,s.validate()}catch(o){console.warn(`Skipping invalid craft "${s.name}": ${o.message}"`),e.failed++;continue}const t=r.find((t=>t.name==s.name));t?(Object.assign(t,s),e.edited++):(s.parent=this.rootFolder,this.rootFolder.crafts.push(s),e.new++)}return this.saveToLocalStorage(),e.total=e.new+e.edited+e.failed,e}removeCraft(t){t.parent.crafts=t.parent.crafts.filter((e=>e!=t))}moveCraft(t,e){const r=t.parent;r!=e&&(r.crafts=r.crafts.filter((e=>e!=t)),e.crafts.push(t),t.parent=e),this.saveToLocalStorage()}moveFolder(t,e){if(!t.parent)throw new W("Cannot move the root folder.");if(t==e)throw new W("Cannot move folder into itself.");if(e==t.parent)return;if(e.isWithin(t))throw new W("Cannot move a folder into one of its descendents.");const r=t.parent;r.subfolders=r.subfolders.filter((e=>e!=t)),t.parent=e,e.subfolders.push(t)}addFolder(t,e){const r=new Z(e,t);return t.subfolders.push(r),this.saveToLocalStorage(),r}removeFolder(t){if(!t.parent)throw"Cannot delete root folder.";t.parent.subfolders=t.parent.subfolders.filter((e=>e!=t)),this.saveToLocalStorage()}importCrafts(t){return this.addCrafts(H.convertStringToCrafts(t))}serialize(){return JSON.stringify({version:1,rootFolder:this.rootFolder.toJson(),settings:this.settings.toJson()})}deserialize(t){if(!t)throw new V("No data to process.");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new V(`The provided text is not valid JSON: "${N(t,10)}"`)}try{if(!t.rootFolder)throw new V("Parsed JSON does not contain rootFolder attribute.");this.rootFolder=Z.fromJson(t.rootFolder)}catch(e){throw new V("Unexpected error when deserializing crafts: "+e)}try{if(!t.settings)throw new V("Parsed JSON does not contain settings attribute.");this.settings=j.fromJson(t.settings)}catch(e){console.warn("Unexpected error when deserializing settings, using defaults instead. Reason: "+e),this.settings=new j}return this}saveToLocalStorage(){window.localStorage.database=this.serialize()}findCraftCount(){return this.rootFolder.findAllCrafts().length}findRepeatedCraftName(){return this.rootFolder.findAllCrafts().map((t=>t.name)).filter(((t,e,r)=>r.indexOf(t)!==e))[0]||null}}class V extends Error{constructor(t){super(t),this.name="DeserializationError"}}class W extends Error{constructor(t){super(t),this.name="MoveError"}}const Y=(0,s.Q_)("explorer",{state:()=>({database:new G,query:"",selectedEntity:null,multiselectionEntities:[],repeatedCraftName:null}),getters:{multiselectionCrafts(t){const e=new Set;for(let r of t.multiselectionEntities)r.isFolder?r.findAllCrafts().forEach((t=>e.add(t))):e.add(r);return[...e]}},actions:{toggleMultiselectionOf(t){this.multiselectionEntities.includes(t)?this.multiselectionEntities=this.multiselectionEntities.filter((e=>e!=t)):this.multiselectionEntities.push(t)},findRepeatedCraftName(){this.repeatedCraftName=this.database.findRepeatedCraftName()}}});var Q={...(0,s.rn)(Y,["database","query","selectedEntity","multiselectionEntities","multiselectionCrafts","repeatedCraftName"]),...(0,s.Kc)(B,Y)},K=r(7139),X=r(8167),tt=r(8894);const et={class:"row"},rt={class:"my-1"},ot={key:1,id:"repeated-notice",class:"explorer-notice"},st=(0,a._)("p",{class:"my-1"},[(0,a._)("img",{src:X,class:"icon"}),(0,a.Uk)(" Repeated craft name:")],-1),at={class:"my-1 text-bold"},lt={key:3,class:"p-5 mt-5 text-center"},it=(0,a._)("img",{src:tt,class:"ml-2",style:{width:"20px"}},null,-1);function nt(t,e,r,s,l,i){const n=(0,a.up)("Folder"),c=(0,a.up)("FolderDetails"),d=(0,a.up)("CraftDetails");return(0,a.wg)(),(0,a.iD)("div",et,[(0,a._)("div",{id:"craft-list",class:(0,K.C_)("scrollable "+(t.selectedEntity?"col-8 col-xl-9":"col-12")),onKeydown:e[2]||(e[2]=(0,o.D2)(((...e)=>t.deleteSelectedEntity&&t.deleteSelectedEntity(...e)),["delete"]))},[t.multiselectionCrafts.length>0?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"multiselection-notice",class:(0,K.C_)({"explorer-notice":!0,invalid:i.tooManyMultiselected})},[(0,a._)("p",rt,(0,K.zw)(t.multiselectionCrafts.length)+" "+(0,K.zw)(i.pluralize("craft",t.multiselectionCrafts.length))+" selected.",1),(0,a._)("button",{class:"btn-transparent text-bold pl-0",onClick:e[0]||(e[0]=t=>this.explorerStore.multiselectionEntities=[])},"Cancel"),(0,a._)("button",{class:"btn-transparent float-right text-bold pr-0",onClick:e[1]||(e[1]=t=>i.copyMultiselection())},"Export")],2)):(0,a.kq)("",!0),t.repeatedCraftName?((0,a.wg)(),(0,a.iD)("div",ot,[st,(0,a._)("p",at,(0,K.zw)(t.repeatedCraftName),1)])):(0,a.kq)("",!0),t.database.rootFolder.crafts.length>0||t.database.rootFolder.subfolders.length>0?((0,a.wg)(),(0,a.j4)(n,{key:2,folder:t.database.rootFolder,depth:0},null,8,["folder"])):((0,a.wg)(),(0,a.iD)("div",lt,[(0,a.Uk)(" Import some crafts to display them here. "),it]))],34),t.selectedEntity?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[t.selectedEntity.isFolder?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"col-4 col-xl-3"})):((0,a.wg)(),(0,a.j4)(d,{key:1,class:"col-4 col-xl-3"}))],64)):(0,a.kq)("",!0)])}var ct=r(5166),dt=r(6338),pt=r(4485),ut=r(6240),ft=r(4443),mt=r(5362),ht=r(8688),gt=r(5588);const bt={id:"sidepanel",class:"scrollable"},yt={class:"d-flex justify-content-between"},Ct=(0,a._)("h1",null,[(0,a._)("img",{src:l,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit craft")],-1),vt=(0,a._)("img",{src:ct,class:"icon"},null,-1),wt=[vt],kt={class:"float-right"},_t=["maxlength"],xt={class:"float-right"},St=["maxlength"],Tt={key:0,style:{float:"right"}},Dt=(0,a._)("img",{src:dt,class:"icon",alt:""},null,-1),Et=(0,a._)("img",{src:pt,class:"icon",alt:""},null,-1),Ft={class:"row mt-3 mx-n1"},Nt={class:"col-12 col-md-6 p-1"},Ut=(0,a._)("img",{src:ut},null,-1),Bt={class:"col-12 col-md-6 p-1"},Lt=(0,a._)("img",{src:ft},null,-1),Jt={class:"col-12 col-md-6 p-1"},Ot=["disabled"],At=(0,a._)("img",{src:mt},null,-1),$t={class:"col-12 col-md-6 p-1"},qt=(0,a._)("img",{src:c},null,-1),It={class:"col-12 col-md-6 p-1"},Mt=["disabled"],zt=(0,a._)("img",{src:ht},null,-1),Pt={class:"col-12 col-md-6 p-1"},Zt=(0,a._)("img",{src:gt},null,-1);function jt(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",bt,[(0,a._)("div",yt,[Ct,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},wt)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a._)("small",kt,(0,K.zw)(i.craft.name.length)+"/"+(0,K.zw)(i.nameMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.craft.name=t),onInput:e[2]||(e[2]=t=>i.handleNameInput()),maxlength:i.nameMaxLength},null,40,_t),[[o.nr,i.craft.name]])]),(0,a._)("label",null,[(0,a.Uk)(" Description "),(0,a._)("small",xt,(0,K.zw)(i.craft.description.length)+"/"+(0,K.zw)(i.descrMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>i.craft.description=t),onChange:e[4]||(e[4]=e=>t.database.saveToLocalStorage()),maxlength:i.descrMaxLength},null,40,St),[[o.nr,i.craft.description]])]),(0,a._)("label",null,[(0,a.Uk)(" Colors "),i.craft.color?((0,a.wg)(),(0,a.iD)("span",Tt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.craft.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,K.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256))])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>i.craft.color=t),disabled:""},null,512),[[o.nr,i.craft.color]])]),(0,a._)("label",null,[(0,a.Uk)(" Item codename "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>i.craft.item=t),disabled:""},null,512),[[o.nr,i.craft.item]])]),(0,a._)("label",null,[Dt,(0,a.Uk)(" Property "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>i.craft.property=t),disabled:""},null,512),[[o.nr,i.craft.property]])]),(0,a._)("label",null,[(0,a.Uk)(" Default position "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>i.craft.type=t),disabled:""},null,512),[[o.nr,i.craft.type]])]),(0,a._)("label",null,[Et,(0,a.Uk)(" Lock "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>i.craft.lock=t),disabled:""},null,512),[[o.nr,i.craft.lock]])]),(0,a._)("label",null,[(0,a.Uk)(" Override priority "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>i.craft.priority=t),disabled:""},null,512),[[o.nr,i.craft.priority]])]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=t=>i.craft.private=t),onChange:e[12]||(e[12]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,i.craft.private]]),(0,a.Uk)(" Private ")]),(0,a._)("div",Ft,[(0,a._)("div",Nt,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[13]||(e[13]=(...t)=>i.copyCompressedBCJson&&i.copyCompressedBCJson(...t))},[Ut,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",Bt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[14]||(e[14]=e=>t.explorerStore.toggleMultiselectionOf(i.craft))},[Lt,(0,a.Uk)(" Select ")])]),(0,a._)("div",Jt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[15]||(e[15]=t=>i.moveCraft("up")),disabled:!i.craft.parent||i.craft.parent.crafts[0]==i.craft},[At,(0,a.Uk)(" Move up ")],8,Ot)]),(0,a._)("div",$t,[(0,a._)("button",{class:"btn btn-warning w-100",onClick:e[16]||(e[16]=(...t)=>i.overwriteCraftWithClipboard&&i.overwriteCraftWithClipboard(...t)),title:"Overwrite this craft with the data currently in the clipboard"},[qt,(0,a.Uk)(" Overwrite ")])]),(0,a._)("div",It,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[17]||(e[17]=t=>i.moveCraft("down")),disabled:!i.craft.parent||i.craft.parent.crafts[i.craft.parent.crafts.length-1]==i.craft},[zt,(0,a.Uk)(" Move down ")],8,Mt)]),(0,a._)("div",Pt,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[18]||(e[18]=(...t)=>i.deleteCraft&&i.deleteCraft(...t))},[Zt,(0,a.Uk)(" Delete ")])])])])}var Ht={name:"CraftDetails",computed:{craft(){return this.selectedEntity},nameMaxLength(){return P.NAME_MAX_LENGTH},descrMaxLength(){return P.DESCR_MAX_LENGTH},...Q},methods:{handleNameInput(){this.explorerStore.findRepeatedCraftName(),this.repeatedCraftName||this.database.saveToLocalStorage()},deleteCraft(){if(!this.database.settings.confirmCraftDeletion||confirm("Are you sure you want to delete this craft?")){const t=this.craft.parent,e=t.crafts.indexOf(this.craft),r=e<1?0:e-1;this.database.removeCraft(this.craft),this.explorerStore.selectedEntity=t.crafts[r]||null}},copyCompressedBCJson(){window.navigator.clipboard.writeText(this.craft.toCompressedBCJson())},overwriteCraftWithClipboard(){_().then((t=>{if(t&&t.length>100)try{const e=P.fromCompressedBCJson(t),r=this.craft;for(let t of["item","property","lock","name","description","color","private","type","priority"])r[t]=e[t];this.database.saveToLocalStorage()}catch(e){console.error(e),this.alertStore.alert("Could not parse the provided craft.")}else this.alertStore.alert("You need to have an exported craft in your clipboard.")}))},moveCraft(t){this.craft.move(t),this.database.saveToLocalStorageWithDebounce()}},created(){this.handleNameInput=E(this.handleNameInput,500)}},Rt=r(89);const Gt=(0,Rt.Z)(Ht,[["render",jt]]);var Vt=Gt,Wt=r(3735),Yt=r(4355),Qt=r(2165);const Kt={id:"sidepanel",class:"scrollable"},Xt={class:"d-flex justify-content-between"},te=(0,a._)("h1",null,[(0,a._)("img",{src:Wt,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit folder")],-1),ee=(0,a._)("img",{src:ct,class:"icon"},null,-1),re=[ee],oe={key:0,class:"mt-2 text-sm"},se={key:1,class:"mt-2 text-sm"},ae={class:"row mt-2 mx-n1"},le={class:"col-12 col-md-6 p-1"},ie=(0,a._)("img",{src:ut},null,-1),ne={class:"col-12 col-md-6 p-1"},ce=(0,a._)("img",{src:ut},null,-1),de={class:"col-12 col-md-6 p-1"},pe=(0,a._)("img",{src:Yt},null,-1),ue={class:"col-12 col-md-6 p-1"},fe=(0,a._)("img",{src:ft},null,-1),me={class:"col-12 col-md-6 p-1"},he=["disabled"],ge=(0,a._)("img",{src:mt},null,-1),be={class:"col-12 col-md-6 p-1"},ye=["disabled"],Ce=(0,a._)("img",{src:Qt},null,-1),ve={class:"col-12 col-md-6 p-1"},we=["disabled"],ke=(0,a._)("img",{src:ht},null,-1),_e={class:"col-12 col-md-6 p-1"},xe=["disabled"],Se=(0,a._)("img",{src:gt},null,-1);function Te(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",Kt,[(0,a._)("div",Xt,[te,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},re)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.folder.name=t),ref:"txtName",onChange:e[2]||(e[2]=e=>t.database.saveToLocalStorage()),maxlength:"30"},null,544),[[o.nr,i.folder.name]])]),i.totalCrafts>0?((0,a.wg)(),(0,a.iD)("div",oe,(0,K.zw)(i.totalCrafts)+" total "+(0,K.zw)(i.pluralize("craft",i.totalCrafts)),1)):((0,a.wg)(),(0,a.iD)("div",se,"No crafts")),(0,a._)("div",ae,[(0,a._)("div",le,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[3]||(e[3]=(...t)=>i.copyImportCommand&&i.copyImportCommand(...t))},[ie,(0,a.Uk)(" Copy as command")])]),(0,a._)("div",ne,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[4]||(e[4]=(...t)=>i.copyAsCompressedBCJsons&&i.copyAsCompressedBCJsons(...t))},[ce,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",de,[(0,a._)("button",{class:"btn btn-success w-100",onClick:e[5]||(e[5]=(...t)=>i.addFolder&&i.addFolder(...t))},[pe,(0,a.Uk)(" New subfolder")])]),(0,a._)("div",ue,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[6]||(e[6]=e=>t.explorerStore.toggleMultiselectionOf(i.folder))},[fe,(0,a.Uk)(" Select ")])]),(0,a._)("div",me,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[7]||(e[7]=t=>i.moveFolder("up")),disabled:!i.folder.parent||i.folder.parent.subfolders[0]==i.folder},[ge,(0,a.Uk)(" Move up ")],8,he)]),(0,a._)("div",be,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",disabled:0==i.totalCrafts,onClick:e[8]||(e[8]=(...t)=>i.toggleVisibilityOfAllCrafts&&i.toggleVisibilityOfAllCrafts(...t))},[Ce,(0,a.Uk)(" Toggle visibility ")],8,ye)]),(0,a._)("div",ve,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[9]||(e[9]=t=>i.moveFolder("down")),disabled:!i.folder.parent||i.folder.parent.subfolders[i.folder.parent.subfolders.length-1]==i.folder},[ke,(0,a.Uk)(" Move down ")],8,we)]),(0,a._)("div",_e,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[10]||(e[10]=(...t)=>i.deleteFolder&&i.deleteFolder(...t)),disabled:!i.folder.parent},[Se,(0,a.Uk)(" Delete ")],8,xe)])])])}var De={name:"FolderDetails",computed:{folder(){return this.selectedEntity},totalCrafts(){return this.folder.findAllCrafts().length},...Q},methods:{addFolder(){const t=this.database.addFolder(this.folder,"New folder");this.folder.collapsed=!1,this.explorerStore.selectedEntity=t,this.$refs.txtName.focus()},deleteFolder(){const t=this.folder.findAllCrafts().length;(0==t||confirm(`Delete ${this.folder.name||"this folder"} and the ${t} craft(s) inside?`))&&(this.database.removeFolder(this.folder),this.explorerStore.selectedEntity=this.folder.parent)},copyImportCommand(){try{window.navigator.clipboard.writeText(this.folder.toBCImportCommand())}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},copyAsCompressedBCJsons(){window.navigator.clipboard.writeText(q.convertCraftsToCompressedBCJsons(this.folder.findAllCrafts()))},moveFolder(t){this.folder.move(t),this.database.saveToLocalStorageWithDebounce()},toggleVisibilityOfAllCrafts(){const t=this.folder.findAllCrafts(),e=t[0].private;t.forEach((t=>{t.private=!e})),this.database.saveToLocalStorage()},pluralize:F}};const Ee=(0,Rt.Z)(De,[["render",Te]]);var Fe=Ee,Ne=r(4652),Ue=r(3254),Be=r(3210);const Le=["checked"],Je={class:"total-crafts"},Oe=["src"],Ae={key:0,class:"crafts-table w-100"},$e=["onClick"],qe={class:"c-name"},Ie=["onDragstart"],Me=["checked","onChange"],ze={class:"c-priv text-center"},Pe={key:0,src:Ue,class:"icon",title:"Private",alt:"Private"},Ze={key:1,src:Be,class:"icon",title:"Public",alt:"Public"},je={class:"c-craft"},He={class:"mr-2"},Re={class:"c-prop"},Ge=(0,a._)("img",{src:dt,class:"icon",alt:""},null,-1),Ve={key:1,class:"muted"},We={class:"c-lock"},Ye=(0,a._)("img",{src:pt,class:"icon",alt:""},null,-1),Qe={key:1,class:"muted"},Ke={class:"c-type"},Xe={key:0,class:"muted"},tr={class:"c-priority"},er={key:1,class:"muted"},rr={class:"c-descr"},or={key:0,class:"muted"};function sr(t,e,s,l,i,n){const c=(0,a.up)("Folder",!0);return(0,a.wg)(),(0,a.iD)("div",{onDrop:e[4]||(e[4]=t=>n.drop(t)),onDragover:e[5]||(e[5]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:e[6]||(e[6]=(0,o.iM)((()=>{}),["prevent"]))},[(0,a._)("div",{class:(0,K.C_)({"folder clickable":!0,active:t.selectedEntity==s.folder}),onClick:e[3]||(e[3]=e=>t.explorerStore.selectedEntity=s.folder)},[s.depth>0?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"c-tree",style:(0,K.j5)({marginLeft:13*s.depth+"px"})},"├",4)):(0,a.kq)("",!0),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:1,src:Wt,class:"icon mx-1",alt:"",draggable:"",onDragstart:e[0]||(e[0]=t=>n.startDrag(t,s.folder))},null,32)):((0,a.wg)(),(0,a.iD)("input",{key:2,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(s.folder),onChange:e[1]||(e[1]=e=>t.explorerStore.toggleMultiselectionOf(s.folder))},null,40,Le)),(0,a._)("span",null,[(0,a.Uk)((0,K.zw)(s.folder.name||"Unnamed")+" ",1),(0,a._)("span",Je,"("+(0,K.zw)(n.totalCrafts)+")",1)]),!s.folder.parent||s.folder.isEmpty()||t.query?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:3,class:"px-2",onClick:e[2]||(e[2]=t=>n.toggleCollapse()),alt:"Toggle collapse"},[(0,a._)("img",{src:r(8278)(`./${n.effectiveCollapsed?"plus":"minus"}.svg`),class:"icon-sm",alt:""},null,8,Oe)]))],2),n.effectiveCollapsed?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.subfolders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.uuid},[(0,a.wy)((0,a.Wm)(c,{folder:e,depth:s.depth+1,query:t.query},null,8,["folder","depth","query"]),[[o.F8,!t.query||e.matchesQuery(t.query)]])])))),128)),s.folder.crafts?((0,a.wg)(),(0,a.iD)("table",Ae,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.crafts,((e,r)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{key:e.uuid,class:(0,K.C_)({active:t.selectedEntity==e}),onClick:r=>t.explorerStore.selectedEntity=e},[(0,a._)("td",qe,[(0,a._)("span",{class:"c-tree",style:(0,K.j5)({marginLeft:13*(s.depth+1)+"px"})},(0,K.zw)(r==s.folder.crafts.length-1?"└":"├"),5),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:0,src:Ne,class:"clickable-icon",draggable:"",onDragstart:t=>n.startDrag(t,e),title:"Drag to move craft to a different folder",alt:""},null,40,Ie)):((0,a.wg)(),(0,a.iD)("input",{key:1,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(e),onChange:r=>t.explorerStore.toggleMultiselectionOf(e)},null,40,Me)),(0,a._)("span",null,(0,K.zw)(e.name),1)]),(0,a._)("td",ze,[e.private?((0,a.wg)(),(0,a.iD)("img",Pe)):((0,a.wg)(),(0,a.iD)("img",Ze))]),(0,a._)("td",je,[(0,a._)("span",He,(0,K.zw)(e.item),1),e.color?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,K.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256)):(0,a.kq)("",!0)]),(0,a._)("td",Re,[e.property?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Ge,(0,a.Uk)(" "+(0,K.zw)(e.property),1)],64)):((0,a.wg)(),(0,a.iD)("span",Ve,"No property"))]),(0,a._)("td",We,[e.lock?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Ye,(0,a.Uk)(" "+(0,K.zw)(e.lock.replace("Padlock","")),1)],64)):((0,a.wg)(),(0,a.iD)("span",Qe,"No lock"))]),(0,a._)("td",Ke,[(0,a.Uk)((0,K.zw)(e.type)+" ",1),e.type?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Xe,"No position"))]),(0,a._)("td",tr,[null!=e.priority?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,K.zw)(e.priority),1)],64)):((0,a.wg)(),(0,a.iD)("span",er,"-"))]),(0,a._)("td",rr,[(0,a.Uk)((0,K.zw)(e.description)+" ",1),e.description?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",or,"No description"))])],10,$e)),[[o.F8,!t.query||e.matchesQuery(t.query)]]))),128))])])):(0,a.kq)("",!0)],64))],32)}var ar={name:"Folder",props:{folder:Object,depth:Number},computed:{totalCrafts(){return this.folder.findAllCrafts().length},effectiveCollapsed(){return this.folder.collapsed&&!this.query},...Q},methods:{startDrag(t,e){t.stopPropagation(),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",e.isFolder?t.dataTransfer.setData("folderUuid",e.uuid):t.dataTransfer.setData("craftUuid",e.uuid)},drop(t){t.stopPropagation();try{if(t.dataTransfer.getData("craftUuid")){const e=this.database.rootFolder.findCraft(t.dataTransfer.getData("craftUuid"));if(!e)throw"Couldn't find craft: "+t.dataTransfer.getData("craftUuid");this.database.moveCraft(e,this.folder)}else{const e=this.database.rootFolder.findFolder(t.dataTransfer.getData("folderUuid"));if(!e)throw"Couldn't find folder: "+t.dataTransfer.getData("folderUuid");this.database.moveFolder(e,this.folder),this.folder.collapsed=!1}}catch(e){if("MoveError"!=e.name)throw e;console.warn(e.message)}},toggleCollapse(){this.folder.collapsed=!this.folder.collapsed&&null!=this.folder.parent}}};const lr=(0,Rt.Z)(ar,[["render",sr]]);var ir=lr,nr={name:"Home",components:{Folder:ir,CraftDetails:Vt,FolderDetails:Fe},computed:{...Q,tooManyMultiselected(){return this.multiselectionCrafts.length>A.maxCraftsExportable}},methods:{handleCraftClick(t){this.selectedEntity=t},copyMultiselection(){try{window.navigator.clipboard.writeText(A.convertCraftsToBCImportCommand(this.multiselectionCrafts))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},pluralize:F},created(){this.explorerStore.findRepeatedCraftName()}};const cr=(0,Rt.Z)(nr,[["render",nt]]);var dr=cr,pr=r(8076),ur=r(121);const fr={class:"p-4"},mr=(0,a.uE)('<h1 class="mt-0"> What&#39;s this?</h1><p>A GUI to back up, organize, and edit items crafted in BC in a convenient way.</p><h1>Where&#39;s my data stored?</h1><p>In your browser&#39;s local storage. This means you should make regular backups (see Settings page).</p><h1>How do I import crafts from BC?</h1><p>There are currently two ways:</p><h2><img src="'+pr+'" class="icon"> Importing a single craft (via FBC):</h2><ol><li>Open your crafted item in BC</li><li>Click the FBC &quot;Export&quot; button</li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h2><img src="'+pr+'" class="icon"> Importing all your crafts at once (via console):</h2><ol><li>Open the browser console on BC</li><li>Copy the output of <code>JSON.stringify(Player.Crafting)</code></li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h1>How do I export crafts back to BC?</h1><p>There are currently two ways:</p><h2><img src="'+ur+'" class="icon"> Exporting a single craft (via FBC)</h2><ol><li>Select the craft and click &quot;Copy as export&quot; </li><li>Go to BC and open a new craft</li><li>Click the FBC &quot;Import&quot; button</li></ol><h2><img src="'+ur+'" class="icon"> Exporting many crafts at once (via console)</h2><img src="'+X+'" class="icon ml-4 mr-1"><span style="color:#d1b758;font-size:90%;">This replaces <u>all</u> your BC crafts.</span><ol><li>Select a folder to export and click &quot;Copy as command&quot;, or select multiple crafts/folders together and click &quot;Export&quot;</li><li>Open the browser console on BC</li><li>Paste the clipboard contents</li></ol>',18),hr=[mr];function gr(t,e,r,o,s,l){return(0,a.wg)(),(0,a.iD)("div",fr,hr)}var br={name:"About"};const yr=(0,Rt.Z)(br,[["render",gr]]);var Cr=yr;const vr={class:"p-4"},wr=(0,a._)("h1",{class:"mt-0"},"Settings",-1),kr=(0,a._)("h1",null,"Backup",-1),_r=(0,a._)("p",null,"Export your BCCM data as JSON. This will allow you to restore your data even if you clear your browser's storage.",-1),xr=(0,a._)("img",{src:ur},null,-1),Sr=(0,a._)("img",{src:ut},null,-1),Tr=(0,a._)("h1",null,"Restore",-1),Dr=(0,a._)("p",null,"Restore a BCCM JSON backup. This will replace all current data.",-1),Er=(0,a._)("img",{src:pr},null,-1),Fr=(0,a._)("img",{src:c},null,-1),Nr=(0,a._)("h1",null,"Export",-1),Ur=(0,a._)("p",null,"Generate a CSV export you can open as a human-friendly spreadsheet.",-1),Br=(0,a._)("img",{src:ur},null,-1),Lr=(0,a._)("img",{src:ut},null,-1),Jr=(0,a._)("h1",null,"Reset",-1),Or=(0,a._)("p",null,"Delete all crafts and user data.",-1),Ar=(0,a._)("img",{src:gt},null,-1);function $r(t,e,r,s,l,i){return(0,a.wg)(),(0,a.iD)("div",vr,[wr,(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=e=>t.database.settings.confirmCraftDeletion=e),onChange:e[1]||(e[1]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,t.database.settings.confirmCraftDeletion]]),(0,a.Uk)(" Confirm before deleting crafts ")]),kr,_r,(0,a._)("button",{class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>i.downloadBackup&&i.downloadBackup(...t))},[xr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=(...t)=>i.backupToClipboard&&i.backupToClipboard(...t))},[Sr,(0,a.Uk)(" Copy to clipboard")]),Tr,Dr,(0,a._)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=e=>t.$refs.uploader.click())},[Er,(0,a.Uk)("Load from file")]),(0,a._)("input",{ref:"uploader",type:"file",onChange:e[5]||(e[5]=(...t)=>i.handleFileSelect&&i.handleFileSelect(...t)),accept:".json",style:{display:"none"}},null,544),(0,a._)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>i.restoreFromClipboard&&i.restoreFromClipboard(...t))},[Fr,(0,a.Uk)(" Load from clipboard")]),Nr,Ur,(0,a._)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...t)=>i.downloadCsvExport&&i.downloadCsvExport(...t))},[Br,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[8]||(e[8]=(...t)=>i.copyCsvExportToClipboard&&i.copyCsvExportToClipboard(...t))},[Lr,(0,a.Uk)(" Copy to clipboard")]),Jr,Or,(0,a._)("button",{class:"btn btn-danger",onClick:e[9]||(e[9]=(...t)=>i.resetDatabase&&i.resetDatabase(...t))},[Ar,(0,a.Uk)("Delete database")])])}var qr={name:"Settings",computed:{...Q},methods:{backupToClipboard(){navigator.clipboard.writeText(this.database.serialize()),this.alertStore.alert("Copied to clipboard.","success")},downloadBackup(){x(this.database.serialize(),`BCCMBackup-${(new Date).toISOString().split("T")[0]}.json`)},restoreFromClipboard(){_().then(this.importDatabase)},handleFileSelect(t){S(t.target.files[0]).then((t=>this.importDatabase(t.join(""))))},importDatabase(t){try{this.database.deserialize(t),this.database.saveToLocalStorage(),this.$emit("goTo","home"),this.alertStore.alert(`Loaded database with ${this.database.findCraftCount()} crafts.`,"success")}catch(e){this.alertStore.alert(e.message)}},copyCsvExportToClipboard(){navigator.clipboard.writeText(this.getDatabaseCsv())},downloadCsvExport(){x(this.getDatabaseCsv(),`crafts-${(new Date).toISOString().split("T")[0]}.csv`)},getDatabaseCsv(){return T([["Name","Item","Private","Property","Lock","Type","Color","Description","Folder","Export"]].concat(this.database.rootFolder.findAllCrafts().map((t=>[t.name,t.item,t.private,t.property,t.lock,t.type||"",t.color,t.description,t.parent.getAncestry().slice(1).map((t=>t.name)).join("."),t.toCompressedBCJson()]))))},resetDatabase(){confirm("Are you sure you want to delete all your data?")&&(this.database.reset(),this.explorerStore.selectedEntity=null,this.$emit("goTo","home"))}}};const Ir=(0,Rt.Z)(qr,[["render",$r]]);var Mr=Ir,zr=r(5559);const Pr={key:0,src:zr,class:"alert-icon"},Zr={key:1,src:ft,class:"alert-icon"};function jr(t,e,r,o,s,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,K.C_)(`floating-alert ${l.type}`),onClick:e[0]||(e[0]=(...t)=>l.clearAlert&&l.clearAlert(...t))},["error"==l.type?((0,a.wg)(),(0,a.iD)("img",Pr)):(0,a.kq)("",!0),"success"==l.type?((0,a.wg)(),(0,a.iD)("img",Zr)):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,K.zw)(l.message),1)],2)}var Hr={name:"Alert",computed:{message(){return this.alertStore.message},type(){return this.alertStore.type},...(0,s.Kc)(B)},methods:{clearAlert(){this.alertStore.alert(null)}}};const Rr=(0,Rt.Z)(Hr,[["render",jr]]);var Gr=Rr,Vr={name:"App",components:{Alert:Gr,Explorer:dr,Settings:Mr,About:Cr},data:()=>({page:"home",queryField:""}),computed:{...Q},methods:{goTo(t){this.page=t},loadFromClipboard(){_().then((t=>{if(t)try{const e=this.database.importCrafts(t);console.log(`Imported ${e.new+e.edited}/${e.total} crafts (${e.new} new, ${e.edited} edited, ${e.failed} failed)`),e.failed>0?1==e.total?this.alertStore.alert("Could not load the craft, see console for details."):this.alertStore.alert(`Could not load ${e.failed} out of ${e.total} ${F("craft",e.total)}, see console for details.`):0==e.edited?this.alertStore.alert(`Added ${e.new} new ${F("craft",e.new)}.`,"success"):this.alertStore.alert(0==e.new?`Updated ${e.edited} ${F("craft",e.edited)}.`:`Added ${e.new} new ${F("craft",e.new)}, and updated ${e.edited}.`,"success")}catch(e){this.alertStore.alert("Couldn't parse clipboard data, see console for details."),console.error(e)}else this.alertStore.alert("Clipboard is empty.")}))},updateQuery(){this.explorerStore.query=this.queryField.toLowerCase()}},created(){this.updateQuery=E(this.updateQuery,200)}};const Wr=(0,Rt.Z)(Vr,[["render",w]]);var Yr=Wr;const Qr=(0,s.WB)(),Kr=(0,o.ri)(Yr);window.app=Yr,Kr.use(Qr),Kr.mount("#app")},8278:function(t,e,r){var o={"./about.svg":833,"./arrow-down.svg":8688,"./arrow-ne.svg":8894,"./arrow-up.svg":5362,"./check.svg":4443,"./clip-read.svg":2449,"./clip-write.svg":6240,"./cog.svg":9847,"./craft.svg":7100,"./cross.svg":5166,"./drag.svg":4652,"./error.svg":5559,"./folder.svg":3735,"./github.svg":2905,"./load.svg":8076,"./lock.svg":4485,"./logo.svg":5522,"./minus.svg":275,"./plus.svg":4355,"./private.svg":3254,"./public.svg":3210,"./save.svg":121,"./star.svg":6338,"./trash.svg":5588,"./visibility.svg":2165,"./warn.svg":8167};function s(t){var e=a(t);return r(e)}function a(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}s.keys=function(){return Object.keys(o)},s.resolve=a,t.exports=s,s.id=8278},833:function(t,e,r){"use strict";t.exports=r.p+"img/about.b9065e51.svg"},8688:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-down.1cf83ab8.svg"},8894:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-ne.e7788b52.svg"},5362:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-up.fb3b820b.svg"},4443:function(t,e,r){"use strict";t.exports=r.p+"img/check.c1759961.svg"},2449:function(t,e,r){"use strict";t.exports=r.p+"img/clip-read.12962e4f.svg"},6240:function(t,e,r){"use strict";t.exports=r.p+"img/clip-write.630c71d8.svg"},9847:function(t,e,r){"use strict";t.exports=r.p+"img/cog.11fa8f2d.svg"},7100:function(t,e,r){"use strict";t.exports=r.p+"img/craft.cb62eadc.svg"},5166:function(t,e,r){"use strict";t.exports=r.p+"img/cross.047dc357.svg"},4652:function(t,e,r){"use strict";t.exports=r.p+"img/drag.cc380d7e.svg"},5559:function(t,e,r){"use strict";t.exports=r.p+"img/error.8eb4b7fb.svg"},3735:function(t,e,r){"use strict";t.exports=r.p+"img/folder.4c905663.svg"},2905:function(t,e,r){"use strict";t.exports=r.p+"img/github.4fe90b8f.svg"},8076:function(t,e,r){"use strict";t.exports=r.p+"img/load.aed85cb8.svg"},4485:function(t,e,r){"use strict";t.exports=r.p+"img/lock.f44b2e25.svg"},5522:function(t,e,r){"use strict";t.exports=r.p+"img/logo.08a29e38.svg"},275:function(t,e,r){"use strict";t.exports=r.p+"img/minus.5e739917.svg"},4355:function(t,e,r){"use strict";t.exports=r.p+"img/plus.2d1d194c.svg"},3254:function(t,e,r){"use strict";t.exports=r.p+"img/private.54e41622.svg"},3210:function(t,e,r){"use strict";t.exports=r.p+"img/public.749147b3.svg"},121:function(t,e,r){"use strict";t.exports=r.p+"img/save.e2a4a06f.svg"},6338:function(t,e,r){"use strict";t.exports=r.p+"img/star.35ce245d.svg"},5588:function(t,e,r){"use strict";t.exports=r.p+"img/trash.331d8fc4.svg"},2165:function(t,e,r){"use strict";t.exports=r.p+"img/visibility.8e7adac8.svg"},8167:function(t,e,r){"use strict";t.exports=r.p+"img/warn.a9a4355b.svg"}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,a){if(!o){var l=1/0;for(d=0;d<t.length;d++){o=t[d][0],s=t[d][1],a=t[d][2];for(var i=!0,n=0;n<o.length;n++)(!1&a||l>=a)&&Object.keys(r.O).every((function(t){return r.O[t](o[n])}))?o.splice(n--,1):(i=!1,a<l&&(l=a));if(i){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[o,s,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.p="/bccm/"}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,a,l=o[0],i=o[1],n=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(n)var d=n(r)}for(e&&e(o);c<l.length;c++)a=l[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(d)},o=self["webpackChunkbccm"]=self["webpackChunkbccm"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(6432)}));o=r.O(o)})();
//# sourceMappingURL=app.5de2e4e8.js.map