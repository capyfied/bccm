(function(){var __webpack_modules__={6587:function(t,e,r){"use strict";var o=r(9242),s=r(1020),a=r(3396),i=r(7100),n=r(9847),l=r(833),c=r(2449),d=r(2905);const p={class:"d-flex justify-content-between"},u={class:"d-flex"},f=(0,a._)("img",{src:i,id:"logo",alt:""},null,-1),m=(0,a._)("span",{id:"name"},"BC Crafts Manager",-1),h=[f,m],_=(0,a._)("img",{src:n,class:"mr-1",alt:""},null,-1),g=(0,a._)("img",{src:l,class:"mr-1",alt:""},null,-1),b=(0,a._)("img",{src:c,alt:""},null,-1),w=(0,a._)("a",{href:"https://github.com/capyfied/bccm",title:"GitHub",target:"_blank"},[(0,a._)("img",{src:d,id:"github",class:"mx-2",alt:""})],-1),C={class:"container-fluid"};function y(t,e,r,s,i,n){const l=(0,a.up)("Alert"),c=(0,a.up)("Explorer"),d=(0,a.up)("About"),f=(0,a.up)("Settings");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",p,[(0,a._)("div",u,[(0,a._)("span",{id:"main-link",class:"menu-link",onClick:e[0]||(e[0]=e=>t.page="home")},h),(0,a._)("span",{class:"menu-link",onClick:e[1]||(e[1]=e=>t.page="settings")},[_,(0,a.Uk)(" Settings")]),(0,a._)("span",{class:"menu-link",onClick:e[2]||(e[2]=e=>t.page="about")},[g,(0,a.Uk)(" Help")])]),"home"==t.page?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>t.queryField=e),id:"query",class:"mx-3",onInput:e[4]||(e[4]=t=>n.updateQuery()),placeholder:"Filter items..."},null,544)),[[o.nr,t.queryField]]):(0,a.kq)("",!0),(0,a._)("span",null,[(0,a._)("button",{class:"btn btn-success",onClick:e[5]||(e[5]=t=>n.loadFromClipboard()),style:{height:"28px","margin-top":"3px"}},[b,(0,a.Uk)(" Load from clipboard ")]),w])]),(0,a._)("main",C,[(0,a.Wm)(l),"home"==t.page?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0),"about"==t.page?((0,a.wg)(),(0,a.j4)(d,{key:1})):(0,a.kq)("",!0),"settings"==t.page?((0,a.wg)(),(0,a.j4)(f,{key:2,onGoTo:n.goTo},null,8,["onGoTo"])):(0,a.kq)("",!0)])],64)}var v=r(3313);const k=(0,s.Q_)("alert",{state:()=>({message:null,type:null,dismissalTimeout:null}),actions:{alert(t,e="error"){if(t){let r;"error"==e?(r=1e4,console.error(t)):r=5e3,clearTimeout(this.dismissalTimeout),this.message=t,this.type=e,this.dismissalTimeout=setTimeout((()=>{this.alert(null)}),r)}else this.message=null,this.type=null}}});r(7658);var x=r(2482),E=r(9459),T=r(2186);class D{constructor(t,e){(0,x.Z)(this,"uuid",null),(0,x.Z)(this,"name",null),(0,x.Z)(this,"parent",null),(0,x.Z)(this,"subfolders",null),(0,x.Z)(this,"crafts",null),(0,x.Z)(this,"collapsed",null),(0,x.Z)(this,"isFolder",!0),this.uuid=(0,v.Rl)(),this.name=t,this.parent=e,this.subfolders=[],this.crafts=[],this.collapsed=!1}findAllCrafts(){return this.crafts.concat(...this.subfolders.map((t=>t.findAllCrafts())))}findCraft(t){let e=this.crafts.find((e=>e.uuid==t));if(e)return e;for(let r of this.subfolders)if(e=r.findCraft(t),e)return e;return!1}findFolder(t){return this.uuid==t?this:this.subfolders.reduce(((e,r)=>e||r.findFolder(t)),null)}toJson(){return{uuid:this.uuid,name:this.name,subfolders:this.subfolders.map((t=>t.toJson())),crafts:this.crafts.map((t=>t.toJson())),collapsed:this.collapsed}}isEmpty(){return 0==this.crafts.length&&0==this.subfolders.length}isWithin(t){return t==this||!!this.parent&&this.parent.isWithin(t)}getAncestry(){return this.parent?this.parent.getAncestry().concat([this]):[this]}static fromJson(t,e=null){const r=new D;return r.uuid=t.uuid,r.name=t.name,r.parent=e,r.subfolders=t.subfolders.map((t=>D.fromJson(t,r))),r.crafts=t.crafts.map((t=>T.Z.fromJson(t,r))),r.collapsed=t.collapsed,r}toBCImportCommand(t=0){return E.Z.convertCraftsToBCImportCommand(this.findAllCrafts(),t)}move(t){const e=this.parent.subfolders.indexOf(this);if(-1==e)throw"Could not find subfolder";"down"==t&&e<this.parent.subfolders.length-1?(0,v.LF)(this.parent.subfolders,e,e+1):"up"==t&&e>0?(0,v.LF)(this.parent.subfolders,e,e-1):console.warn(`Cannot move folder ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.crafts.some((e=>e.matchesQuery(t)))||this.subfolders.some((e=>e.matchesQuery(t)))}}var S=r(8780);class I{constructor(){this.loadJson(I.DEFAULT_SETTINGS)}static fromJson(t){const e=new I;return e.loadJson(t),e}loadJson(t){"string"==typeof t&&(t=JSON.parse(t));const e=I.DEFAULT_SETTINGS;for(let r of I.KEYS)void 0!==t[r]?this[r]=t[r]:(console.warn(`Missing field '${r}' in loaded settings, using default.`),this[r]=e[r]);this.validate()}toJson(){const t={};return I.KEYS.forEach((e=>{t[e]=this[e]})),t}validate(){(0,S.p)(this,"confirmCraftDeletion","boolean"),(0,S.p)(this,"overrideMaxCraftsExportableAsCommand","number")}}(0,x.Z)(I,"DEFAULT_SETTINGS",{confirmCraftDeletion:!0,overrideMaxCraftsExportableAsCommand:0}),(0,x.Z)(I,"KEYS",Object.keys(I.DEFAULT_SETTINGS));var U=r(6943);class F{constructor(){if((0,x.Z)(this,"rootFolder",null),(0,x.Z)(this,"settings",null),this.saveToLocalStorageWithDebounce=(0,v.Ds)((()=>this.saveToLocalStorage()),1e3),window.localStorage.database)try{this.deserialize(window.localStorage.database)}catch(t){window.localStorage.failed=window.localStorage.database,console.error(`Error loading saved database: ${t.message}. Copying old database to localStorage.failed and resetting.`),this.reset()}else this.reset()}reset(){this.rootFolder=new D("Crafted items"),this.settings=new I,this.saveToLocalStorage()}addCrafts(t){let e={new:0,edited:0,failed:0};const r=this.rootFolder.findAllCrafts();(0,v.El)(t);for(let s of t){try{s.parent=this.rootFolder,s.validate()}catch(o){console.warn(`Skipping invalid craft "${s.name}": ${o.message}"`),e.failed++;continue}const t=r.find((t=>t.name==s.name));t?(Object.assign(t,s),e.edited++):(s.parent=this.rootFolder,this.rootFolder.crafts.push(s),e.new++)}return this.saveToLocalStorage(),e.total=e.new+e.edited+e.failed,e}removeCraft(t){t.parent.crafts=t.parent.crafts.filter((e=>e!=t)),this.saveToLocalStorageWithDebounce()}moveCraft(t,e){const r=t.parent;r!=e&&(r.crafts=r.crafts.filter((e=>e!=t)),e.crafts.push(t),t.parent=e),this.saveToLocalStorage()}moveFolder(t,e){if(!t.parent)throw new A("Cannot move the root folder.");if(t==e)throw new A("Cannot move folder into itself.");if(e==t.parent)return;if(e.isWithin(t))throw new A("Cannot move a folder into one of its descendents.");const r=t.parent;r.subfolders=r.subfolders.filter((e=>e!=t)),t.parent=e,e.subfolders.push(t)}addFolder(t,e){const r=new D(e,t);return t.subfolders.push(r),this.saveToLocalStorage(),r}removeFolder(t){if(!t.parent)throw"Cannot delete root folder.";t.parent.subfolders=t.parent.subfolders.filter((e=>e!=t)),this.saveToLocalStorage()}importCrafts(t){return this.addCrafts(U.Z.convertStringToCrafts(t))}serialize(){return JSON.stringify({version:1,rootFolder:this.rootFolder.toJson(),settings:this.settings.toJson()})}deserialize(t){if(!t)throw new O("No data to process.");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new O(`The provided text is not valid JSON: "${(0,v.fk)(t,10)}"`)}try{if(!t.rootFolder)throw new O("Parsed JSON does not contain rootFolder attribute.");this.rootFolder=D.fromJson(t.rootFolder)}catch(e){throw new O("Unexpected error when deserializing crafts: "+e)}try{if(!t.settings)throw new O("Parsed JSON does not contain settings attribute.");this.settings=I.fromJson(t.settings)}catch(e){console.warn("Unexpected error when deserializing settings, using defaults instead. Reason: "+e),this.settings=new I}return this}saveToLocalStorage(){window.localStorage.database=this.serialize()}findCraftCount(){return this.rootFolder.findAllCrafts().length}findRepeatedCraftName(){return this.rootFolder.findAllCrafts().map((t=>t.name)).filter(((t,e,r)=>r.indexOf(t)!==e))[0]||null}}class O extends Error{constructor(t){super(t),this.name="DeserializationError"}}class A extends Error{constructor(t){super(t),this.name="MoveError"}}const B=(0,s.Q_)("explorer",{state:()=>({database:new F,query:"",selectedEntity:null,multiselectionEntities:[],repeatedCraftName:null}),getters:{multiselectionCrafts(t){const e=new Set;for(let r of t.multiselectionEntities)r.isFolder?r.findAllCrafts().forEach((t=>e.add(t))):e.add(r);return[...e]}},actions:{toggleMultiselectionOf(t){this.multiselectionEntities.includes(t)?this.multiselectionEntities=this.multiselectionEntities.filter((e=>e!=t)):this.multiselectionEntities.push(t)},findRepeatedCraftName(){this.repeatedCraftName=this.database.findRepeatedCraftName()}}});var L={...(0,s.rn)(B,["database","query","selectedEntity","multiselectionEntities","multiselectionCrafts","repeatedCraftName"]),...(0,s.Kc)(k,B)},q=r(7139),J=r(8167),M=r(8894);const N={class:"row"},$={class:"my-1"},Z={key:1,id:"repeated-notice",class:"explorer-notice"},P=(0,a._)("p",{class:"my-1"},[(0,a._)("img",{src:J,class:"icon"}),(0,a.Uk)(" Repeated craft name:")],-1),z={class:"my-1 text-bold"},j={key:3,class:"p-5 mt-5 text-center"},R=(0,a._)("img",{src:M,class:"ml-2",style:{width:"20px"}},null,-1);function W(t,e,r,s,i,n){const l=(0,a.up)("Folder"),c=(0,a.up)("FolderDetails"),d=(0,a.up)("CraftDetails");return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",{id:"craft-list",class:(0,q.C_)("scrollable "+(t.selectedEntity?"col-8 col-xl-9":"col-12")),onKeydown:e[2]||(e[2]=(0,o.D2)(((...e)=>t.deleteSelectedEntity&&t.deleteSelectedEntity(...e)),["delete"]))},[t.multiselectionCrafts.length>0?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"multiselection-notice",class:(0,q.C_)({"explorer-notice":!0,invalid:n.tooManyMultiselected})},[(0,a._)("p",$,(0,q.zw)(t.multiselectionCrafts.length)+" "+(0,q.zw)(n.pluralize("craft",t.multiselectionCrafts.length))+" selected.",1),(0,a._)("button",{class:"btn-transparent text-bold pl-0",onClick:e[0]||(e[0]=t=>this.explorerStore.multiselectionEntities=[])},"Cancel"),(0,a._)("button",{class:"btn-transparent float-right text-bold pr-0",onClick:e[1]||(e[1]=t=>n.copyMultiselection())},"Export")],2)):(0,a.kq)("",!0),t.repeatedCraftName?((0,a.wg)(),(0,a.iD)("div",Z,[P,(0,a._)("p",z,(0,q.zw)(t.repeatedCraftName),1)])):(0,a.kq)("",!0),t.database.rootFolder.crafts.length>0||t.database.rootFolder.subfolders.length>0?((0,a.wg)(),(0,a.j4)(l,{key:2,folder:t.database.rootFolder,depth:0},null,8,["folder"])):((0,a.wg)(),(0,a.iD)("div",j,[(0,a.Uk)(" Import some crafts to display them here. "),R]))],34),t.selectedEntity?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[t.selectedEntity.isFolder?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"col-4 col-xl-3"})):((0,a.wg)(),(0,a.j4)(d,{key:1,class:"col-4 col-xl-3"}))],64)):(0,a.kq)("",!0)])}var H=r(5166),G=r(6338),K=r(4485),V=r(6240),Y=r(4443),Q=r(5362),X=r(8688),tt=r(5588);const et={id:"sidepanel",class:"scrollable"},rt={class:"d-flex justify-content-between"},ot=(0,a._)("h1",null,[(0,a._)("img",{src:i,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit craft")],-1),st=(0,a._)("img",{src:H,class:"icon"},null,-1),at=[st],it={class:"float-right"},nt=["maxlength"],lt={class:"float-right"},ct=["maxlength"],dt={key:0,style:{float:"right"}},pt=(0,a._)("img",{src:G,class:"icon",alt:""},null,-1),ut=(0,a._)("img",{src:K,class:"icon",alt:""},null,-1),ft={class:"row mt-3 mx-n1"},mt={class:"col-12 col-md-6 p-1"},ht=(0,a._)("img",{src:V},null,-1),_t={class:"col-12 col-md-6 p-1"},gt=(0,a._)("img",{src:Y},null,-1),bt={class:"col-12 col-md-6 p-1"},wt=["disabled"],Ct=(0,a._)("img",{src:Q},null,-1),yt={class:"col-12 col-md-6 p-1"},vt=(0,a._)("img",{src:c},null,-1),kt={class:"col-12 col-md-6 p-1"},xt=["disabled"],Et=(0,a._)("img",{src:X},null,-1),Tt={class:"col-12 col-md-6 p-1"},Dt=(0,a._)("img",{src:tt},null,-1);function St(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",et,[(0,a._)("div",rt,[ot,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},at)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a._)("small",it,(0,q.zw)(n.craft.name.length)+"/"+(0,q.zw)(n.nameMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>n.craft.name=t),onInput:e[2]||(e[2]=t=>n.handleNameInput()),maxlength:n.nameMaxLength},null,40,nt),[[o.nr,n.craft.name]])]),(0,a._)("label",null,[(0,a.Uk)(" Description "),(0,a._)("small",lt,(0,q.zw)(n.craft.description.length)+"/"+(0,q.zw)(n.descrMaxLength),1),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>n.craft.description=t),onChange:e[4]||(e[4]=e=>t.database.saveToLocalStorage()),maxlength:n.descrMaxLength},null,40,ct),[[o.nr,n.craft.description]])]),(0,a._)("label",null,[(0,a.Uk)(" Colors "),n.craft.color?((0,a.wg)(),(0,a.iD)("span",dt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.craft.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,q.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256))])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>n.craft.color=t),disabled:""},null,512),[[o.nr,n.craft.color]])]),(0,a._)("label",null,[(0,a.Uk)(" Item codename "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>n.craft.item=t),disabled:""},null,512),[[o.nr,n.craft.item]])]),(0,a._)("label",null,[pt,(0,a.Uk)(" Property "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=t=>n.craft.property=t),disabled:""},null,512),[[o.nr,n.craft.property]])]),(0,a._)("label",null,[(0,a.Uk)(" Default position "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>n.craft.type=t),disabled:""},null,512),[[o.nr,n.craft.type]])]),(0,a._)("label",null,[ut,(0,a.Uk)(" Lock "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>n.craft.lock=t),disabled:""},null,512),[[o.nr,n.craft.lock]])]),(0,a._)("label",null,[(0,a.Uk)(" Override priority "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>n.craft.priority=t),disabled:""},null,512),[[o.nr,n.craft.priority]])]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=t=>n.craft.private=t),onChange:e[12]||(e[12]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,n.craft.private]]),(0,a.Uk)(" Private ")]),(0,a._)("div",ft,[(0,a._)("div",mt,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[13]||(e[13]=(...t)=>n.copyCompressedBCJson&&n.copyCompressedBCJson(...t))},[ht,(0,a.Uk)(" Copy as export")])]),(0,a._)("div",_t,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[14]||(e[14]=e=>t.explorerStore.toggleMultiselectionOf(n.craft))},[gt,(0,a.Uk)(" Select ")])]),(0,a._)("div",bt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[15]||(e[15]=t=>n.moveCraft("up")),disabled:!n.craft.parent||n.craft.parent.crafts[0]==n.craft},[Ct,(0,a.Uk)(" Move up ")],8,wt)]),(0,a._)("div",yt,[(0,a._)("button",{class:"btn btn-warning w-100",onClick:e[16]||(e[16]=(...t)=>n.overwriteCraftWithClipboard&&n.overwriteCraftWithClipboard(...t)),title:"Overwrite this craft with the data currently in the clipboard"},[vt,(0,a.Uk)(" Overwrite ")])]),(0,a._)("div",kt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[17]||(e[17]=t=>n.moveCraft("down")),disabled:!n.craft.parent||n.craft.parent.crafts[n.craft.parent.crafts.length-1]==n.craft},[Et,(0,a.Uk)(" Move down ")],8,xt)]),(0,a._)("div",Tt,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[18]||(e[18]=(...t)=>n.deleteCraft&&n.deleteCraft(...t))},[Dt,(0,a.Uk)(" Delete ")])])])])}var It={name:"CraftDetails",computed:{craft(){return this.selectedEntity},nameMaxLength(){return T.Z.NAME_MAX_LENGTH},descrMaxLength(){return T.Z.DESCR_MAX_LENGTH},...L},methods:{handleNameInput(){this.explorerStore.findRepeatedCraftName(),this.repeatedCraftName||this.database.saveToLocalStorage()},deleteCraft(){if(!this.database.settings.confirmCraftDeletion||confirm("Are you sure you want to delete this craft?")){const t=this.craft.parent,e=t.crafts.indexOf(this.craft),r=e<1?0:e-1;this.database.removeCraft(this.craft),this.explorerStore.selectedEntity=t.crafts[r]||null}},copyCompressedBCJson(){window.navigator.clipboard.writeText(this.craft.toCompressedBCJson())},overwriteCraftWithClipboard(){(0,v.Xi)().then((t=>{if(t&&t.length>100)try{const e=T.Z.fromCompressedBCJson(t),r=this.craft;for(let t of["item","property","lock","name","description","color","private","type","priority"])r[t]=e[t];this.database.saveToLocalStorage()}catch(e){console.error(e),this.alertStore.alert("Could not parse the provided craft.")}else this.alertStore.alert("You need to have an exported craft in your clipboard.")}))},moveCraft(t){this.craft.move(t),this.database.saveToLocalStorageWithDebounce()}},created(){this.handleNameInput=(0,v.Ds)(this.handleNameInput,500)}},Ut=r(89);const Ft=(0,Ut.Z)(It,[["render",St]]);var Ot=Ft,At=r(3735),Bt=r(4355),Lt=r(2165);const qt={id:"sidepanel",class:"scrollable"},Jt={class:"d-flex justify-content-between"},Mt=(0,a._)("h1",null,[(0,a._)("img",{src:At,class:"icon-lg",alt:""}),(0,a.Uk)(" Edit folder")],-1),Nt=(0,a._)("img",{src:H,class:"icon"},null,-1),$t=[Nt],Zt={key:0,class:"mt-2 text-sm"},Pt={key:1,class:"mt-2 text-sm"},zt={class:"row mt-2 mx-n1"},jt={class:"col-12 col-md-6 p-1"},Rt=["disabled"],Wt=(0,a._)("img",{src:V},null,-1),Ht={class:"col-12 col-md-6 p-1"},Gt=["disabled"],Kt=(0,a._)("img",{src:V},null,-1),Vt={class:"col-12 col-md-6 p-1"},Yt=(0,a._)("img",{src:Bt},null,-1),Qt={class:"col-12 col-md-6 p-1"},Xt=(0,a._)("img",{src:Y},null,-1),te={class:"col-12 col-md-6 p-1"},ee=["disabled"],re=(0,a._)("img",{src:Q},null,-1),oe={class:"col-12 col-md-6 p-1"},se=["disabled"],ae=(0,a._)("img",{src:Lt},null,-1),ie={class:"col-12 col-md-6 p-1"},ne=["disabled"],le=(0,a._)("img",{src:X},null,-1),ce={class:"col-12 col-md-6 p-1"},de=["disabled"],pe=(0,a._)("img",{src:tt},null,-1);function ue(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",qt,[(0,a._)("div",Jt,[Mt,(0,a._)("button",{class:"btn-transparent p-2 mt-4",onClick:e[0]||(e[0]=e=>t.explorerStore.selectedEntity=null)},$t)]),(0,a._)("label",null,[(0,a.Uk)(" Name "),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>n.folder.name=t),ref:"txtName",onChange:e[2]||(e[2]=e=>t.database.saveToLocalStorage()),maxlength:"30"},null,544),[[o.nr,n.folder.name]])]),n.totalCrafts>0?((0,a.wg)(),(0,a.iD)("div",Zt,(0,q.zw)(n.totalCrafts)+" total "+(0,q.zw)(n.pluralize("craft",n.totalCrafts)),1)):((0,a.wg)(),(0,a.iD)("div",Pt,"No crafts")),(0,a._)("div",zt,[(0,a._)("div",jt,[(0,a._)("button",{class:"btn btn-success w-100 ellipsis",onClick:e[3]||(e[3]=(...t)=>n.copyImportCommand&&n.copyImportCommand(...t)),disabled:0==n.totalCrafts},[Wt,(0,a.Uk)(" Copy as command")],8,Rt)]),(0,a._)("div",Ht,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",onClick:e[4]||(e[4]=(...t)=>n.copyAsCompressedBCJsons&&n.copyAsCompressedBCJsons(...t)),disabled:0==n.totalCrafts},[Kt,(0,a.Uk)(" Copy as export")],8,Gt)]),(0,a._)("div",Vt,[(0,a._)("button",{class:"btn btn-success w-100",onClick:e[5]||(e[5]=(...t)=>n.addFolder&&n.addFolder(...t))},[Yt,(0,a.Uk)(" New subfolder")])]),(0,a._)("div",Qt,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[6]||(e[6]=e=>t.explorerStore.toggleMultiselectionOf(n.folder))},[Xt,(0,a.Uk)(" Select ")])]),(0,a._)("div",te,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[7]||(e[7]=t=>n.moveFolder("up")),disabled:!n.folder.parent||n.folder.parent.subfolders[0]==n.folder},[re,(0,a.Uk)(" Move up ")],8,ee)]),(0,a._)("div",oe,[(0,a._)("button",{class:"btn btn-primary w-100 ellipsis",disabled:0==n.totalCrafts,onClick:e[8]||(e[8]=(...t)=>n.toggleVisibilityOfAllCrafts&&n.toggleVisibilityOfAllCrafts(...t))},[ae,(0,a.Uk)(" Toggle visibility ")],8,se)]),(0,a._)("div",ie,[(0,a._)("button",{class:"btn btn-primary w-100",onClick:e[9]||(e[9]=t=>n.moveFolder("down")),disabled:!n.folder.parent||n.folder.parent.subfolders[n.folder.parent.subfolders.length-1]==n.folder},[le,(0,a.Uk)(" Move down ")],8,ne)]),(0,a._)("div",ce,[(0,a._)("button",{class:"btn btn-danger w-100",onClick:e[10]||(e[10]=(...t)=>n.deleteFolder&&n.deleteFolder(...t)),disabled:!n.folder.parent},[pe,(0,a.Uk)(" Delete ")],8,de)])])])}var fe=r(9708),me={name:"FolderDetails",computed:{folder(){return this.selectedEntity},totalCrafts(){return this.folder.findAllCrafts().length},...L},methods:{addFolder(){const t=this.database.addFolder(this.folder,"New folder");this.folder.collapsed=!1,this.explorerStore.selectedEntity=t,this.$refs.txtName.focus()},deleteFolder(){const t=this.folder.findAllCrafts().length;(0==t||confirm(`Delete ${this.folder.name||"this folder"} and the ${t} craft(s) inside?`))&&(this.database.removeFolder(this.folder),this.explorerStore.selectedEntity=this.folder.parent)},copyImportCommand(){try{const t=this.database.settings.overrideMaxCraftsExportableAsCommand;window.navigator.clipboard.writeText(this.folder.toBCImportCommand(t))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},copyAsCompressedBCJsons(){window.navigator.clipboard.writeText(fe.Z.convertCraftsToCompressedBCJsons(this.folder.findAllCrafts()))},moveFolder(t){this.folder.move(t),this.database.saveToLocalStorageWithDebounce()},toggleVisibilityOfAllCrafts(){const t=this.folder.findAllCrafts(),e=t[0].private;t.forEach((t=>{t.private=!e})),this.database.saveToLocalStorage()},pluralize:v._6}};const he=(0,Ut.Z)(me,[["render",ue]]);var _e=he,ge=r(4652),be=r(3254),we=r(3210);const Ce=["checked"],ye={class:"total-crafts"},ve=["src"],ke={key:0,class:"crafts-table w-100"},xe=["onClick"],Ee={class:"c-name"},Te=["onDragstart"],De=["checked","onChange"],Se={class:"c-priv text-center"},Ie={key:0,src:be,class:"icon",title:"Private",alt:"Private"},Ue={key:1,src:we,class:"icon",title:"Public",alt:"Public"},Fe={class:"c-craft"},Oe={class:"mr-2"},Ae={class:"c-prop"},Be=(0,a._)("img",{src:G,class:"icon",alt:""},null,-1),Le={key:1,class:"muted"},qe={class:"c-lock"},Je=(0,a._)("img",{src:K,class:"icon",alt:""},null,-1),Me={key:1,class:"muted"},Ne={class:"c-type"},$e={key:0,class:"muted"},Ze={class:"c-priority"},Pe={key:1,class:"muted"},ze={class:"c-descr"},je={key:0,class:"muted"};function Re(t,e,s,i,n,l){const c=(0,a.up)("Folder",!0);return(0,a.wg)(),(0,a.iD)("div",{onDrop:e[4]||(e[4]=t=>l.drop(t)),onDragover:e[5]||(e[5]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:e[6]||(e[6]=(0,o.iM)((()=>{}),["prevent"]))},[(0,a._)("div",{class:(0,q.C_)({"folder clickable":!0,active:t.selectedEntity==s.folder}),onClick:e[3]||(e[3]=e=>t.explorerStore.selectedEntity=s.folder)},[s.depth>0?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"c-tree",style:(0,q.j5)({marginLeft:13*s.depth+"px"})},"├",4)):(0,a.kq)("",!0),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:1,src:At,class:"icon mx-1",alt:"",draggable:"",onDragstart:e[0]||(e[0]=t=>l.startDrag(t,s.folder))},null,32)):((0,a.wg)(),(0,a.iD)("input",{key:2,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(s.folder),onChange:e[1]||(e[1]=e=>t.explorerStore.toggleMultiselectionOf(s.folder))},null,40,Ce)),(0,a._)("span",null,[(0,a.Uk)((0,q.zw)(s.folder.name||"Unnamed")+" ",1),(0,a._)("span",ye,"("+(0,q.zw)(l.totalCrafts)+")",1)]),!s.folder.parent||s.folder.isEmpty()||t.query?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",{key:3,class:"px-2",onClick:e[2]||(e[2]=t=>l.toggleCollapse()),alt:"Toggle collapse"},[(0,a._)("img",{src:r(8278)(`./${l.effectiveCollapsed?"plus":"minus"}.svg`),class:"icon-sm",alt:""},null,8,ve)]))],2),l.effectiveCollapsed?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.subfolders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.uuid},[(0,a.wy)((0,a.Wm)(c,{folder:e,depth:s.depth+1,query:t.query},null,8,["folder","depth","query"]),[[o.F8,!t.query||e.matchesQuery(t.query)]])])))),128)),s.folder.crafts?((0,a.wg)(),(0,a.iD)("table",ke,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.folder.crafts,((e,r)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{key:e.uuid,class:(0,q.C_)({active:t.selectedEntity==e}),onClick:r=>t.explorerStore.selectedEntity=e},[(0,a._)("td",Ee,[(0,a._)("span",{class:"c-tree",style:(0,q.j5)({marginLeft:13*(s.depth+1)+"px"})},(0,q.zw)(r==s.folder.crafts.length-1?"└":"├"),5),0==t.multiselectionEntities.length?((0,a.wg)(),(0,a.iD)("img",{key:0,src:ge,class:"clickable-icon",draggable:"",onDragstart:t=>l.startDrag(t,e),title:"Drag to move craft to a different folder",alt:""},null,40,Te)):((0,a.wg)(),(0,a.iD)("input",{key:1,type:"checkbox",class:"my-0 mr-1",checked:t.multiselectionEntities.includes(e),onChange:r=>t.explorerStore.toggleMultiselectionOf(e)},null,40,De)),(0,a._)("span",null,(0,q.zw)(e.name),1)]),(0,a._)("td",Se,[e.private?((0,a.wg)(),(0,a.iD)("img",Ie)):((0,a.wg)(),(0,a.iD)("img",Ue))]),(0,a._)("td",Fe,[(0,a._)("span",Oe,(0,q.zw)(e.item),1),e.color?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.color.split(","),(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,["Default"!=t?((0,a.wg)(),(0,a.iD)("span",{key:0,style:(0,q.j5)({color:t})},"▮",4)):(0,a.kq)("",!0)],64)))),256)):(0,a.kq)("",!0)]),(0,a._)("td",Ae,[e.property?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Be,(0,a.Uk)(" "+(0,q.zw)(e.property),1)],64)):((0,a.wg)(),(0,a.iD)("span",Le,"No property"))]),(0,a._)("td",qe,[e.lock?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Je,(0,a.Uk)(" "+(0,q.zw)(e.lock.replace("Padlock","")),1)],64)):((0,a.wg)(),(0,a.iD)("span",Me,"No lock"))]),(0,a._)("td",Ne,[(0,a.Uk)((0,q.zw)(e.type)+" ",1),e.type?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",$e,"No position"))]),(0,a._)("td",Ze,[null!=e.priority?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Uk)((0,q.zw)(e.priority),1)],64)):((0,a.wg)(),(0,a.iD)("span",Pe,"-"))]),(0,a._)("td",ze,[(0,a.Uk)((0,q.zw)(e.description)+" ",1),e.description?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",je,"No description"))])],10,xe)),[[o.F8,!t.query||e.matchesQuery(t.query)]]))),128))])])):(0,a.kq)("",!0)],64))],32)}var We={name:"Folder",props:{folder:Object,depth:Number},computed:{totalCrafts(){return this.folder.findAllCrafts().length},effectiveCollapsed(){return this.folder.collapsed&&!this.query},...L},methods:{startDrag(t,e){t.stopPropagation(),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",e.isFolder?t.dataTransfer.setData("folderUuid",e.uuid):t.dataTransfer.setData("craftUuid",e.uuid)},drop(t){t.stopPropagation();try{if(t.dataTransfer.getData("craftUuid")){const e=this.database.rootFolder.findCraft(t.dataTransfer.getData("craftUuid"));if(!e)throw"Couldn't find craft: "+t.dataTransfer.getData("craftUuid");this.database.moveCraft(e,this.folder)}else{const e=this.database.rootFolder.findFolder(t.dataTransfer.getData("folderUuid"));if(!e)throw"Couldn't find folder: "+t.dataTransfer.getData("folderUuid");this.database.moveFolder(e,this.folder),this.folder.collapsed=!1}}catch(e){if("MoveError"!=e.name)throw e;console.warn(e.message)}},toggleCollapse(){this.folder.collapsed=!this.folder.collapsed&&null!=this.folder.parent}}};const He=(0,Ut.Z)(We,[["render",Re]]);var Ge=He,Ke={name:"Home",components:{Folder:Ge,CraftDetails:Ot,FolderDetails:_e},computed:{...L,maxCraftsExportableAsCommand(){return this.database.settings.overrideMaxCraftsExportableAsCommand||E.Z.defaultMaxCraftsExportable},tooManyMultiselected(){return this.multiselectionCrafts.length>this.maxCraftsExportableAsCommand}},methods:{handleCraftClick(t){this.selectedEntity=t},copyMultiselection(){try{window.navigator.clipboard.writeText(E.Z.convertCraftsToBCImportCommand(this.multiselectionCrafts,this.maxCraftsExportableAsCommand))}catch(t){if("ExportLimitError"!=t.name)throw t;this.alertStore.alert(t.message)}},pluralize:v._6},created(){this.explorerStore.findRepeatedCraftName()}};const Ve=(0,Ut.Z)(Ke,[["render",W]]);var Ye=Ve,Qe=r(8076),Xe=r(121);const tr={class:"p-4"},er=(0,a.uE)('<h1 class="mt-0"> What&#39;s this?</h1><p>A GUI to back up, organize, and edit items crafted in BC in a convenient way.</p><h1>Where&#39;s my data stored?</h1><p>In your browser&#39;s local storage. This means you should make regular backups (see Settings page).</p><h1>How do I import crafts from BC?</h1><p>There are currently two ways:</p><h2><img src="'+Qe+'" class="icon"> Importing a single craft (via FBC):</h2><ol><li>Open your crafted item in BC</li><li>Click the FBC &quot;Export&quot; button</li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h2><img src="'+Qe+'" class="icon"> Importing all your crafts at once (via console):</h2><ol><li>Open the browser console on BC</li><li>Copy the output of <code>JSON.stringify(Player.Crafting)</code></li><li>Return here and click &quot;Load from clipboard&quot;</li></ol><h1>How do I export crafts back to BC?</h1><p>There are currently two ways:</p><h2><img src="'+Xe+'" class="icon"> Exporting a single craft (via FBC)</h2><ol><li>Select the craft and click &quot;Copy as export&quot; </li><li>Go to BC and open a new craft</li><li>Click the FBC &quot;Import&quot; button</li></ol><h2><img src="'+Xe+'" class="icon"> Exporting many crafts at once (via console)</h2><img src="'+J+'" class="icon ml-4 mr-1"><span style="color:#d1b758;font-size:90%;">This replaces <u>all</u> your BC crafts.</span><ol><li>Select a folder to export and click &quot;Copy as command&quot;, or select multiple crafts/folders together and click &quot;Export&quot;</li><li>Open the browser console on BC</li><li>Paste the clipboard contents</li></ol>',18),rr=[er];function or(t,e,r,o,s,i){return(0,a.wg)(),(0,a.iD)("div",tr,rr)}var sr={name:"About"};const ar=(0,Ut.Z)(sr,[["render",or]]);var ir=ar;const nr={class:"p-4"},lr=(0,a._)("h1",{class:"mt-0"},"Settings",-1),cr={class:"d-block my-3"},dr=(0,a._)("img",{src:l,class:"icon help ml-1",title:"If checked, you will be prompted for confirmation every time you delete a craft."},null,-1),pr=(0,a._)("br",null,null,-1),ur={class:"d-block my-3"},fr=(0,a._)("img",{src:l,class:"icon help ml-1",title:"BC limits how many crafts you can have, so BCCM will prevent you from exporting more than that at once. You can override this limit here if you want. Leave as zero to use the default."},null,-1),mr=(0,a._)("br",null,null,-1),hr=(0,a._)("h1",null,"Backup",-1),_r=(0,a._)("p",null,"Export your BCCM data as JSON. This will allow you to restore your data even if you clear your browser's storage.",-1),gr=(0,a._)("img",{src:Xe},null,-1),br=(0,a._)("img",{src:V},null,-1),wr=(0,a._)("h1",null,"Restore",-1),Cr=(0,a._)("p",null,"Restore a BCCM JSON backup. This will replace all current data.",-1),yr=(0,a._)("img",{src:Qe},null,-1),vr=(0,a._)("img",{src:c},null,-1),kr=(0,a._)("h1",null,"Export",-1),xr=(0,a._)("p",null,"Generate a CSV export you can open as a human-friendly spreadsheet.",-1),Er=(0,a._)("img",{src:Xe},null,-1),Tr=(0,a._)("img",{src:V},null,-1),Dr=(0,a._)("h1",null,"Reset",-1),Sr=(0,a._)("p",null,"Delete all crafts and user data.",-1),Ir=(0,a._)("img",{src:tt},null,-1);function Ur(t,e,r,s,i,n){return(0,a.wg)(),(0,a.iD)("div",nr,[lr,(0,a._)("label",null,[(0,a._)("label",cr,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=e=>t.database.settings.confirmCraftDeletion=e),onChange:e[1]||(e[1]=e=>t.database.saveToLocalStorage())},null,544),[[o.e8,t.database.settings.confirmCraftDeletion]]),(0,a.Uk)(" Confirm before deleting crafts "),dr,pr]),(0,a._)("label",ur,[(0,a.Uk)(" Override export limit: "),fr,mr,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=e=>t.database.settings.overrideMaxCraftsExportableAsCommand=e),class:"mt-1",min:"0",max:"999",onChange:e[3]||(e[3]=e=>t.database.saveToLocalStorageWithDebounce())},null,544),[[o.nr,t.database.settings.overrideMaxCraftsExportableAsCommand]])])]),hr,_r,(0,a._)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...t)=>n.downloadBackup&&n.downloadBackup(...t))},[gr,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...t)=>n.backupToClipboard&&n.backupToClipboard(...t))},[br,(0,a.Uk)(" Copy to clipboard")]),wr,Cr,(0,a._)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=e=>t.$refs.uploader.click())},[yr,(0,a.Uk)("Load from file")]),(0,a._)("input",{ref:"uploader",type:"file",onChange:e[7]||(e[7]=(...t)=>n.handleFileSelect&&n.handleFileSelect(...t)),accept:".json",style:{display:"none"}},null,544),(0,a._)("button",{class:"btn btn-primary",onClick:e[8]||(e[8]=(...t)=>n.restoreFromClipboard&&n.restoreFromClipboard(...t))},[vr,(0,a.Uk)(" Load from clipboard")]),kr,xr,(0,a._)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>n.downloadCsvExport&&n.downloadCsvExport(...t))},[Er,(0,a.Uk)(" Save to file")]),(0,a._)("button",{class:"btn btn-primary",onClick:e[10]||(e[10]=(...t)=>n.copyCsvExportToClipboard&&n.copyCsvExportToClipboard(...t))},[Tr,(0,a.Uk)(" Copy to clipboard")]),Dr,Sr,(0,a._)("button",{class:"btn btn-danger",onClick:e[11]||(e[11]=(...t)=>n.resetDatabase&&n.resetDatabase(...t))},[Ir,(0,a.Uk)("Delete database")])])}var Fr={name:"Settings",computed:{...L},methods:{backupToClipboard(){navigator.clipboard.writeText(this.database.serialize()),this.alertStore.alert("Copied to clipboard.","success")},downloadBackup(){(0,v.kG)(this.database.serialize(),`BCCMBackup-${(new Date).toISOString().split("T")[0]}.json`)},restoreFromClipboard(){(0,v.Xi)().then(this.importDatabase)},handleFileSelect(t){(0,v.pJ)(t.target.files[0]).then((t=>this.importDatabase(t.join(""))))},importDatabase(t){try{this.database.deserialize(t),this.database.saveToLocalStorage(),this.$emit("goTo","home"),this.alertStore.alert(`Loaded database with ${this.database.findCraftCount()} crafts.`,"success")}catch(e){this.alertStore.alert(e.message)}},copyCsvExportToClipboard(){navigator.clipboard.writeText(this.getDatabaseCsv())},downloadCsvExport(){(0,v.kG)(this.getDatabaseCsv(),`crafts-${(new Date).toISOString().split("T")[0]}.csv`)},getDatabaseCsv(){return(0,v.Sk)([["Name","Item","Private","Property","Lock","Type","Color","Description","Folder","Export"]].concat(this.database.rootFolder.findAllCrafts().map((t=>[t.name,t.item,t.private,t.property,t.lock,t.type||"",t.color,t.description,t.parent.getAncestry().slice(1).map((t=>t.name)).join("."),t.toCompressedBCJson()]))))},resetDatabase(){confirm("Are you sure you want to delete all your data?")&&(this.database.reset(),this.explorerStore.selectedEntity=null,this.$emit("goTo","home"))}}};const Or=(0,Ut.Z)(Fr,[["render",Ur]]);var Ar=Or,Br=r(5559);const Lr={key:0,src:Br,class:"alert-icon"},qr={key:1,src:Y,class:"alert-icon"};function Jr(t,e,r,o,s,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,q.C_)(`floating-alert ${i.type}`),onClick:e[0]||(e[0]=(...t)=>i.clearAlert&&i.clearAlert(...t))},["error"==i.type?((0,a.wg)(),(0,a.iD)("img",Lr)):(0,a.kq)("",!0),"success"==i.type?((0,a.wg)(),(0,a.iD)("img",qr)):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,q.zw)(i.message),1)],2)}var Mr={name:"Alert",computed:{message(){return this.alertStore.message},type(){return this.alertStore.type},...(0,s.Kc)(k)},methods:{clearAlert(){this.alertStore.alert(null)}}};const Nr=(0,Ut.Z)(Mr,[["render",Jr]]);var $r=Nr,Zr={name:"App",components:{Alert:$r,Explorer:Ye,Settings:Ar,About:ir},data:()=>({page:"home",queryField:""}),computed:{...L},methods:{goTo(t){this.page=t},loadFromClipboard(){(0,v.Xi)().then((t=>{if(t)try{const e=this.database.importCrafts(t);console.log(`Imported ${e.new+e.edited}/${e.total} crafts (${e.new} new, ${e.edited} edited, ${e.failed} failed)`),e.failed>0?1==e.total?this.alertStore.alert("Could not load the craft, see console for details."):this.alertStore.alert(`Could not load ${e.failed} out of ${e.total} ${(0,v._6)("craft",e.total)}, see console for details.`):0==e.edited?this.alertStore.alert(`Added ${e.new} new ${(0,v._6)("craft",e.new)}.`,"success"):this.alertStore.alert(0==e.new?`Updated ${e.edited} ${(0,v._6)("craft",e.edited)}.`:`Added ${e.new} new ${(0,v._6)("craft",e.new)}, and updated ${e.edited}.`,"success")}catch(e){this.alertStore.alert("Couldn't parse clipboard data, see console for details."),console.error(e)}else this.alertStore.alert("Clipboard is empty.")}))},updateQuery(){this.explorerStore.query=this.queryField.toLowerCase()}},created(){this.updateQuery=(0,v.Ds)(this.updateQuery,200)}};const Pr=(0,Ut.Z)(Zr,[["render",y]]);var zr=Pr;const jr=(0,s.WB)(),Rr=(0,o.ri)(zr);window.app=zr,Rr.use(jr),Rr.mount("#app")},2186:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});var o=r(2482),s=r(9708),a=r(3313),i=r(8780);class n{constructor(){(0,o.Z)(this,"uuid",null),(0,o.Z)(this,"parent",null),(0,o.Z)(this,"item",null),(0,o.Z)(this,"property",null),(0,o.Z)(this,"lock",null),(0,o.Z)(this,"name",null),(0,o.Z)(this,"description",null),(0,o.Z)(this,"color",null),(0,o.Z)(this,"private",null),(0,o.Z)(this,"type",null)}static fromJson(t,e=null){if(!t)throw"Missing argument";const r=new n;return r.uuid=t.uuid,r.parent=e,r.item=t.item,r.property=t.property,r.lock=t.lock,r.name=t.name,r.description=t.description,r.color=t.color,r.private=1==t.private,r.type=t.type,r.priority=t.priority,r}toJson(){return{uuid:this.uuid,item:this.item,property:this.property,lock:this.lock,name:this.name,description:this.description,color:this.color,private:this.private,type:this.type,priority:this.priority}}validate(){(0,i.p)(this,"uuid","string"),(0,i.p)(this,"parent","object"),(0,i.p)(this,"item","string"),(0,i.p)(this,"property","string",!1),(0,i.p)(this,"lock","string",!1),(0,i.p)(this,"name","string"),(0,i.p)(this,"description","string",!1),(0,i.p)(this,"color","string",!1),(0,i.p)(this,"private","boolean"),(0,i.p)(this,"type","string",!1),(0,i.p)(this,"priority","number",!1),(0,i.h)(null===this.priority||Number.isInteger(this.priority),"Priority must be an integer."),(0,i.h)(this.name.length>0&&this.name.length<=n.NAME_MAX_LENGTH,`Name must be between 1 and ${n.NAME_MAX_LENGTH} characters.`),(0,i.h)(this.name.length<=n.DESCR_MAX_LENGTH,`Description must be under ${n.DESCR_MAX_LENGTH} characters.`)}move(t){const e=this.parent.crafts.indexOf(this);if(-1==e)throw"Could not find craft";"down"==t&&e<this.parent.crafts.length-1?(0,a.LF)(this.parent.crafts,e,e+1):"up"==t&&e>0?(0,a.LF)(this.parent.crafts,e,e-1):console.warn(`Cannot move craft ${this.name} (${e}) ${t}`)}matchesQuery(t){return this.name.toLowerCase().includes(t)||this.item.toLowerCase().includes(t)}static fromCompressedBCJson(t){return s.Z.convertCompressedBCJsonToCraft(t)}static fromBCJson(t){return s.Z.convertBCJsonToCraft(t)}toBCJson(){return s.Z.convertCraftToBCJson(this)}toCompressedBCJson(){return s.Z.convertCraftToCompressedBCJson(this)}}(0,o.Z)(n,"NAME_MAX_LENGTH",30),(0,o.Z)(n,"DESCR_MAX_LENGTH",100)},9459:function(t,e,r){"use strict";r.d(e,{Z:function(){return i}});var o=r(2482),s=r(7840),a=r.n(s);class i{static convertCraftsToBCImportCommand(t,e=0){if(!t)throw"No crafts to encode.";const r=e||this.defaultMaxCraftsExportable;if(t.length>r)throw new n(r);const o=a().compressToBase64(JSON.stringify(t.map((t=>t.toBCJson()))));return`CraftingLoadServer(JSON.parse(LZString.decompressFromBase64("${o}")))`}static convertBCImportCommandToBCCraftJSONs(t){if(!t)throw"No data to deserialize.";if(t=t.match(/decompressFromBase64\(["'`](.*?)["'`]\)/)[1],!t)throw"Failed to extract data from CraftingLoadServer command via regex.";return JSON.parse(a().decompressFromBase64(t))}}(0,o.Z)(i,"defaultMaxCraftsExportable",40);class n extends Error{constructor(t){super(`Cannot export more than ${t} crafts at once.`),this.name="ExportLimitError"}}},9708:function(t,e,r){"use strict";r.d(e,{Z:function(){return n}});var o=r(7840),s=r.n(o),a=r(2186),i=r(3313);class n{static convertCraftToBCJson(t){return{Item:t.item,Property:t.property,Lock:t.lock,Name:t.name,Description:t.description,Color:t.color,Private:t.private,Type:t.type,OverridePriority:t.priority}}static convertCraftToCompressedBCJson(t){return s().compressToBase64(JSON.stringify(t.toBCJson()))}static convertCraftsToCompressedBCJsons(t){return s().compressToBase64(JSON.stringify(t.map((t=>t.toBCJson()))))}static convertBCJsonToCraft(t){const e=new a.Z;return e.uuid=(0,i.Rl)(),e.item=t.Item,e.property=t.Property,e.lock=t.Lock,e.name=t.Name,e.description=t.Description,e.color=t.Color,e.private=1==t.Private,e.type=t.Type,e.priority=Number.isInteger(t.OverridePriority)?t.OverridePriority:null,e}static convertCompressedBCJsonToCraft(t){return this.convertBCJsonToCraft(JSON.parse(s().decompressFromBase64(t)))}}},6943:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Importer}});var lz_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7840),lz_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lz_string__WEBPACK_IMPORTED_MODULE_0__),_models_craft_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2186),_util_formats_bcImportCommandFormat_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9459),_util_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3313);class Importer{static convertStringToCrafts(stringToImport){if(stringToImport=(stringToImport||"").trim(),!stringToImport)throw new ImportError(stringToImport,null,"No data to import.");let parsedJson=null;if(stringToImport.match(/^['"`]/)&&stringToImport.match(/['"`]$/))try{stringToImport=eval(stringToImport)}catch(e){throw new ImportError(stringToImport,"string",e)}if(stringToImport.match(/^[a-zA-Z0-9+/=]+$/))try{parsedJson=JSON.parse(lz_string__WEBPACK_IMPORTED_MODULE_0___default().decompressFromBase64(stringToImport))}catch(e){throw new ImportError(stringToImport,"base64",e)}else if(stringToImport.startsWith("CraftingLoadServer("))try{parsedJson=_util_formats_bcImportCommandFormat_js__WEBPACK_IMPORTED_MODULE_2__.Z.convertBCImportCommandToBCCraftJSONs(stringToImport)}catch(e){throw new ImportError(stringToImport,"Import command",e)}else{if("{"!=stringToImport[0]&&"["!=stringToImport[0])throw new ImportError(stringToImport,null,"The provided data does not appear to match any supported format.");try{parsedJson=JSON.parse(stringToImport)}catch(e){throw new ImportError(stringToImport,"JSON",`The provided text is not valid JSON: "${stringToImport.length>10?`${stringToImport.substr(0,9)}...`:stringToImport}"`)}}if(parsedJson.version&&parsedJson.rootFolder)throw new ImportError(stringToImport,null,"This is a full database backup, please use the backup restoring feature on the Settings page to restore this data.");Array.isArray(parsedJson)||(parsedJson=[parsedJson]);try{return parsedJson.filter((t=>null!=t)).map((t=>_models_craft_js__WEBPACK_IMPORTED_MODULE_1__.Z.fromBCJson(t)))}catch(e){throw new ImportError(stringToImport,null,e)}}}class ImportError extends Error{constructor(t,e,r){super(e?`An error occurred when attempting to process the data "${(0,_util_util_js__WEBPACK_IMPORTED_MODULE_3__.fk)(t,20)}" as ${e}: ${r}`:`An error occurred when attempting to process the data "${(0,_util_util_js__WEBPACK_IMPORTED_MODULE_3__.fk)(t,20)}": ${r}`),this.name="ImportError"}}},3313:function(t,e,r){"use strict";r.d(e,{Ds:function(){return c},El:function(){return u},LF:function(){return l},Rl:function(){return o},Sk:function(){return n},Xi:function(){return s},_6:function(){return d},fk:function(){return p},kG:function(){return a},pJ:function(){return i}});r(3408),r(4590);function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))}function s(){return new Promise((t=>{navigator.clipboard.readText?navigator.clipboard.readText().then((e=>t(e))):t(prompt("Paste your text below:"))}))}function a(t,e="download"){const r=new Blob([t],{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function i(t){return new Promise((function(e){const r=new FileReader;r.onload=()=>{e(r.result.split("\n"))},r.readAsText(t)}))}function n(t){return t.map((t=>t.map(String).map((t=>t.replaceAll('"','""'))).map((t=>`"${t}"`)).join(","))).join("\r\n")}function l(t,e,r){if(e==r)return;const o=t[e];t[e]=t[r],t[r]=o}function c(t,e=300){let r;return(...o)=>{clearTimeout(r),r=setTimeout((()=>{t.apply(this,o)}),e)}}function d(t,e,r=null){return 1==e?t:r||t+"s"}function p(t,e){return t.length<=e?t:t.substring(0,e-3)+"..."}function u(t,e="name"){for(let r in t){const o=t[r];let s=o[e];while(![-1,parseInt(r)].includes(t.findIndex((t=>t[e]==s)))){const t=s.match(/^(.*) \((\d+)\)$/);s=t?`${t[1]} (${parseInt(t[2])+1})`:`${s} (2)`}o[e]=s}}},8780:function(t,e,r){"use strict";function o(t,e){if(!t)throw new a(e)}function s(t,e,r,o=!0){if(void 0==t[e]||null==t[e]){if(!o)return;throw console.log(t),new a(`Attribute is missing: "${e}".`)}if(typeof t[e]!=r)throw console.log(t),new a(`Error on attribute "${e}": expected ${r} but got ${typeof t[e]}`)}r.d(e,{h:function(){return o},p:function(){return s}});class a extends Error{constructor(t){super(t),this.name="InvalidCraftError"}}},8278:function(t,e,r){var o={"./about.svg":833,"./arrow-down.svg":8688,"./arrow-ne.svg":8894,"./arrow-up.svg":5362,"./check.svg":4443,"./clip-read.svg":2449,"./clip-write.svg":6240,"./cog.svg":9847,"./craft.svg":7100,"./cross.svg":5166,"./drag.svg":4652,"./error.svg":5559,"./folder.svg":3735,"./github.svg":2905,"./load.svg":8076,"./lock.svg":4485,"./logo.svg":5522,"./minus.svg":275,"./plus.svg":4355,"./private.svg":3254,"./public.svg":3210,"./save.svg":121,"./star.svg":6338,"./trash.svg":5588,"./visibility.svg":2165,"./warn.svg":8167};function s(t){var e=a(t);return r(e)}function a(t){if(!r.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}s.keys=function(){return Object.keys(o)},s.resolve=a,t.exports=s,s.id=8278},833:function(t,e,r){"use strict";t.exports=r.p+"img/about.b9065e51.svg"},8688:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-down.1cf83ab8.svg"},8894:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-ne.e7788b52.svg"},5362:function(t,e,r){"use strict";t.exports=r.p+"img/arrow-up.fb3b820b.svg"},4443:function(t,e,r){"use strict";t.exports=r.p+"img/check.c1759961.svg"},2449:function(t,e,r){"use strict";t.exports=r.p+"img/clip-read.12962e4f.svg"},6240:function(t,e,r){"use strict";t.exports=r.p+"img/clip-write.630c71d8.svg"},9847:function(t,e,r){"use strict";t.exports=r.p+"img/cog.11fa8f2d.svg"},7100:function(t,e,r){"use strict";t.exports=r.p+"img/craft.cb62eadc.svg"},5166:function(t,e,r){"use strict";t.exports=r.p+"img/cross.047dc357.svg"},4652:function(t,e,r){"use strict";t.exports=r.p+"img/drag.cc380d7e.svg"},5559:function(t,e,r){"use strict";t.exports=r.p+"img/error.8eb4b7fb.svg"},3735:function(t,e,r){"use strict";t.exports=r.p+"img/folder.4c905663.svg"},2905:function(t,e,r){"use strict";t.exports=r.p+"img/github.4fe90b8f.svg"},8076:function(t,e,r){"use strict";t.exports=r.p+"img/load.aed85cb8.svg"},4485:function(t,e,r){"use strict";t.exports=r.p+"img/lock.f44b2e25.svg"},5522:function(t,e,r){"use strict";t.exports=r.p+"img/logo.08a29e38.svg"},275:function(t,e,r){"use strict";t.exports=r.p+"img/minus.5e739917.svg"},4355:function(t,e,r){"use strict";t.exports=r.p+"img/plus.2d1d194c.svg"},3254:function(t,e,r){"use strict";t.exports=r.p+"img/private.54e41622.svg"},3210:function(t,e,r){"use strict";t.exports=r.p+"img/public.749147b3.svg"},121:function(t,e,r){"use strict";t.exports=r.p+"img/save.e2a4a06f.svg"},6338:function(t,e,r){"use strict";t.exports=r.p+"img/star.35ce245d.svg"},5588:function(t,e,r){"use strict";t.exports=r.p+"img/trash.331d8fc4.svg"},2165:function(t,e,r){"use strict";t.exports=r.p+"img/visibility.8e7adac8.svg"},8167:function(t,e,r){"use strict";t.exports=r.p+"img/warn.a9a4355b.svg"}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,function(){var t=[];__webpack_require__.O=function(e,r,o,s){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],o=t[c][1],s=t[c][2];for(var i=!0,n=0;n<r.length;n++)(!1&s||a>=s)&&Object.keys(__webpack_require__.O).every((function(t){return __webpack_require__.O[t](r[n])}))?r.splice(n--,1):(i=!1,s<a&&(a=s));if(i){t.splice(c--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,o,s]}}(),function(){__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return __webpack_require__.d(e,{a:e}),e}}(),function(){__webpack_require__.d=function(t,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){__webpack_require__.p="/bccm/"}(),function(){var t={143:0};__webpack_require__.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,a=r[0],i=r[1],n=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)__webpack_require__.o(i,o)&&(__webpack_require__.m[o]=i[o]);if(n)var c=n(__webpack_require__)}for(e&&e(r);l<a.length;l++)s=a[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return __webpack_require__.O(c)},r=self["webpackChunkbccm"]=self["webpackChunkbccm"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(6587)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.b70392c1.js.map